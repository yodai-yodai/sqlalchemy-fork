<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    Working with Engines and Connections
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../index.html" />
        <link rel="up" title="Engine and Connection Use" href="engines_connections.html" />
        <link rel="next" title="Connection Pooling" href="pooling.html" />
        <link rel="prev" title="Engine Configuration" href="engines.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.31</span>


        | Release Date: June 18, 2024

    </div>

    <h1><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy Core">SQLAlchemy Core</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="expression_api.html">SQL Statements and Expressions API</a></span></li>
<li><span class="link-container"><a class="reference external" href="schema.html">Schema Definition Language</a></span></li>
<li><span class="link-container"><a class="reference external" href="types.html">SQL Datatype Objects</a></span></li>
<li><span class="link-container"><a class="reference external" href="engines_connections.html">Engine and Connection Use</a></span><ul>
<li><span class="link-container"><a class="reference external" href="engines.html">Engine Configuration</a></span></li>
<li class="selected"><span class="link-container"><strong>Working with Engines and Connections</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#basic-usage">Basic Usage</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-transactions">Using Transactions</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#commit-as-you-go">Commit As You Go</a></span></li>
<li><span class="link-container"><a class="reference external" href="#begin-once">Begin Once</a></span></li>
<li><span class="link-container"><a class="reference external" href="#connect-and-begin-once-from-the-engine">Connect and Begin Once from the Engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#mixing-styles">Mixing Styles</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#setting-transaction-isolation-levels-including-dbapi-autocommit">Setting Transaction Isolation Levels including DBAPI Autocommit</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#setting-isolation-level-or-dbapi-autocommit-for-a-connection">Setting Isolation Level or DBAPI Autocommit for a Connection</a></span></li>
<li><span class="link-container"><a class="reference external" href="#setting-isolation-level-or-dbapi-autocommit-for-an-engine">Setting Isolation Level or DBAPI Autocommit for an Engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#maintaining-multiple-isolation-levels-for-a-single-engine">Maintaining Multiple Isolation Levels for a Single Engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#understanding-the-dbapi-level-autocommit-isolation-level">Understanding the DBAPI-Level Autocommit Isolation Level</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#changing-between-isolation-levels">Changing Between Isolation Levels</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#using-server-side-cursors-a-k-a-stream-results">Using Server Side Cursors (a.k.a. stream results)</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#streaming-with-a-fixed-buffer-via-yield-per">Streaming with a fixed buffer via yield_per</a></span></li>
<li><span class="link-container"><a class="reference external" href="#streaming-with-a-dynamically-growing-buffer-using-stream-results">Streaming with a dynamically growing buffer using stream_results</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#translation-of-schema-names">Translation of Schema Names</a></span></li>
<li><span class="link-container"><a class="reference external" href="#sql-compilation-caching">SQL Compilation Caching</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#configuration">Configuration</a></span></li>
<li><span class="link-container"><a class="reference external" href="#estimating-cache-performance-using-logging">Estimating Cache Performance Using Logging</a></span></li>
<li><span class="link-container"><a class="reference external" href="#how-much-memory-does-the-cache-use">How much memory does the cache use?</a></span></li>
<li><span class="link-container"><a class="reference external" href="#disabling-or-using-an-alternate-dictionary-to-cache-some-or-all-statements">Disabling or using an alternate dictionary to cache some (or all) statements</a></span></li>
<li><span class="link-container"><a class="reference external" href="#caching-for-third-party-dialects">Caching for Third Party Dialects</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#example-rendering-limit-offset-with-post-compile-parameters">Example: Rendering LIMIT / OFFSET with post compile parameters</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#using-lambdas-to-add-significant-speed-gains-to-statement-production">Using Lambdas to add significant speed gains to statement production</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#synopsis">Synopsis</a></span></li>
<li><span class="link-container"><a class="reference external" href="#quick-guidelines-for-lambdas">Quick Guidelines for Lambdas</a></span></li>
<li><span class="link-container"><a class="reference external" href="#cache-key-generation">Cache Key Generation</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#insert-many-values-behavior-for-insert-statements">“Insert Many Values” Behavior for INSERT statements</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#current-support">Current Support</a></span></li>
<li><span class="link-container"><a class="reference external" href="#disabling-the-feature">Disabling the feature</a></span></li>
<li><span class="link-container"><a class="reference external" href="#batched-mode-operation">Batched Mode Operation</a></span></li>
<li><span class="link-container"><a class="reference external" href="#correlating-returning-rows-to-parameter-sets">Correlating RETURNING rows to parameter sets</a></span></li>
<li><span class="link-container"><a class="reference external" href="#non-batched-mode-operation">Non-Batched Mode Operation</a></span></li>
<li><span class="link-container"><a class="reference external" href="#statement-execution-model">Statement Execution Model</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#configuring-sentinel-columns">Configuring Sentinel Columns</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#controlling-the-batch-size">Controlling the Batch Size</a></span></li>
<li><span class="link-container"><a class="reference external" href="#logging-and-events">Logging and Events</a></span></li>
<li><span class="link-container"><a class="reference external" href="#upsert-support">Upsert Support</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#engine-disposal">Engine Disposal</a></span></li>
<li><span class="link-container"><a class="reference external" href="#working-with-driver-sql-and-raw-dbapi-connections">Working with Driver SQL and Raw DBAPI Connections</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#invoking-sql-strings-directly-to-the-driver">Invoking SQL strings directly to the driver</a></span></li>
<li><span class="link-container"><a class="reference external" href="#working-with-the-dbapi-cursor-directly">Working with the DBAPI cursor directly</a></span></li>
<li><span class="link-container"><a class="reference external" href="#calling-stored-procedures-and-user-defined-functions">Calling Stored Procedures and User Defined Functions</a></span></li>
<li><span class="link-container"><a class="reference external" href="#multiple-result-sets">Multiple Result Sets</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#registering-new-dialects">Registering New Dialects</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#registering-dialects-in-process">Registering Dialects In-Process</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#connection-engine-api">Connection / Engine API</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.__init__"><code class="docutils literal notranslate"><span class="pre">Connection.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.begin"><code class="docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.begin_nested"><code class="docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.begin_twophase"><code class="docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.close"><code class="docutils literal notranslate"><span class="pre">Connection.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.closed"><code class="docutils literal notranslate"><span class="pre">Connection.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.commit"><code class="docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.connection"><code class="docutils literal notranslate"><span class="pre">Connection.connection</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.default_isolation_level"><code class="docutils literal notranslate"><span class="pre">Connection.default_isolation_level</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.detach"><code class="docutils literal notranslate"><span class="pre">Connection.detach()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.exec_driver_sql"><code class="docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.execute"><code class="docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.execution_options"><code class="docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.get_execution_options"><code class="docutils literal notranslate"><span class="pre">Connection.get_execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.get_isolation_level"><code class="docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">Connection.get_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.get_transaction"><code class="docutils literal notranslate"><span class="pre">Connection.get_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">Connection.in_nested_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.in_transaction"><code class="docutils literal notranslate"><span class="pre">Connection.in_transaction()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.info"><code class="docutils literal notranslate"><span class="pre">Connection.info</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.invalidate"><code class="docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.invalidated"><code class="docutils literal notranslate"><span class="pre">Connection.invalidated</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.rollback"><code class="docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.scalar"><code class="docutils literal notranslate"><span class="pre">Connection.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.scalars"><code class="docutils literal notranslate"><span class="pre">Connection.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Connection.schema_for_object"><code class="docutils literal notranslate"><span class="pre">Connection.schema_for_object()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CreateEnginePlugin.__init__"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.__init__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.engine_created()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CreateEnginePlugin.handle_dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.handle_dialect_kwargs()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CreateEnginePlugin.handle_pool_kwargs"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.handle_pool_kwargs()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">Engine</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.begin"><code class="docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.clear_compiled_cache"><code class="docutils literal notranslate"><span class="pre">Engine.clear_compiled_cache()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.connect"><code class="docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.dispose"><code class="docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.driver"><code class="docutils literal notranslate"><span class="pre">Engine.driver</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.engine"><code class="docutils literal notranslate"><span class="pre">Engine.engine</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.execution_options"><code class="docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.get_execution_options"><code class="docutils literal notranslate"><span class="pre">Engine.get_execution_options()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.name"><code class="docutils literal notranslate"><span class="pre">Engine.name</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.raw_connection"><code class="docutils literal notranslate"><span class="pre">Engine.raw_connection()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Engine.update_execution_options"><code class="docutils literal notranslate"><span class="pre">Engine.update_execution_options()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">ExceptionContext</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.chained_exception"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.chained_exception</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.connection"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.connection</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.cursor"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.cursor</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.dialect"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.dialect</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.engine"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.engine</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.execution_context"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.execution_context</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.invalidate_pool_on_disconnect</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.is_disconnect"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.is_disconnect</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.is_pre_ping"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.is_pre_ping</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.original_exception"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.original_exception</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.parameters"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.parameters</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.sqlalchemy_exception"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.sqlalchemy_exception</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ExceptionContext.statement"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.statement</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.NestedTransaction"><code class="docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.NestedTransaction.close"><code class="docutils literal notranslate"><span class="pre">NestedTransaction.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.NestedTransaction.commit"><code class="docutils literal notranslate"><span class="pre">NestedTransaction.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.NestedTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">NestedTransaction.rollback()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.RootTransaction"><code class="docutils literal notranslate"><span class="pre">RootTransaction</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.RootTransaction.close"><code class="docutils literal notranslate"><span class="pre">RootTransaction.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.RootTransaction.commit"><code class="docutils literal notranslate"><span class="pre">RootTransaction.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.RootTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">RootTransaction.rollback()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Transaction"><code class="docutils literal notranslate"><span class="pre">Transaction</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Transaction.close"><code class="docutils literal notranslate"><span class="pre">Transaction.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Transaction.commit"><code class="docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Transaction.rollback"><code class="docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.TwoPhaseTransaction.close"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.TwoPhaseTransaction.commit"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction.commit()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction.prepare()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.TwoPhaseTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction.rollback()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#result-set-api">Result Set API</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ChunkedIteratorResult"><code class="docutils literal notranslate"><span class="pre">ChunkedIteratorResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ChunkedIteratorResult.yield_per"><code class="docutils literal notranslate"><span class="pre">ChunkedIteratorResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">CursorResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.all"><code class="docutils literal notranslate"><span class="pre">CursorResult.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.close"><code class="docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.columns"><code class="docutils literal notranslate"><span class="pre">CursorResult.columns()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.fetchall"><code class="docutils literal notranslate"><span class="pre">CursorResult.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">CursorResult.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.fetchone"><code class="docutils literal notranslate"><span class="pre">CursorResult.fetchone()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.first"><code class="docutils literal notranslate"><span class="pre">CursorResult.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.freeze"><code class="docutils literal notranslate"><span class="pre">CursorResult.freeze()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><code class="docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key_rows</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.is_insert"><code class="docutils literal notranslate"><span class="pre">CursorResult.is_insert</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.keys"><code class="docutils literal notranslate"><span class="pre">CursorResult.keys()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.last_inserted_params"><code class="docutils literal notranslate"><span class="pre">CursorResult.last_inserted_params()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.last_updated_params"><code class="docutils literal notranslate"><span class="pre">CursorResult.last_updated_params()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.lastrow_has_defaults"><code class="docutils literal notranslate"><span class="pre">CursorResult.lastrow_has_defaults()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.lastrowid"><code class="docutils literal notranslate"><span class="pre">CursorResult.lastrowid</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.mappings"><code class="docutils literal notranslate"><span class="pre">CursorResult.mappings()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.merge"><code class="docutils literal notranslate"><span class="pre">CursorResult.merge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.one"><code class="docutils literal notranslate"><span class="pre">CursorResult.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">CursorResult.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.partitions"><code class="docutils literal notranslate"><span class="pre">CursorResult.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.postfetch_cols"><code class="docutils literal notranslate"><span class="pre">CursorResult.postfetch_cols()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.prefetch_cols"><code class="docutils literal notranslate"><span class="pre">CursorResult.prefetch_cols()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.returned_defaults"><code class="docutils literal notranslate"><span class="pre">CursorResult.returned_defaults</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.returned_defaults_rows"><code class="docutils literal notranslate"><span class="pre">CursorResult.returned_defaults_rows</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.returns_rows"><code class="docutils literal notranslate"><span class="pre">CursorResult.returns_rows</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.rowcount"><code class="docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.scalar"><code class="docutils literal notranslate"><span class="pre">CursorResult.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.scalar_one"><code class="docutils literal notranslate"><span class="pre">CursorResult.scalar_one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.scalar_one_or_none"><code class="docutils literal notranslate"><span class="pre">CursorResult.scalar_one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.scalars"><code class="docutils literal notranslate"><span class="pre">CursorResult.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.splice_horizontally"><code class="docutils literal notranslate"><span class="pre">CursorResult.splice_horizontally()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.splice_vertically"><code class="docutils literal notranslate"><span class="pre">CursorResult.splice_vertically()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount"><code class="docutils literal notranslate"><span class="pre">CursorResult.supports_sane_multi_rowcount()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.supports_sane_rowcount"><code class="docutils literal notranslate"><span class="pre">CursorResult.supports_sane_rowcount()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.t"><code class="docutils literal notranslate"><span class="pre">CursorResult.t</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.tuples"><code class="docutils literal notranslate"><span class="pre">CursorResult.tuples()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.unique"><code class="docutils literal notranslate"><span class="pre">CursorResult.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.CursorResult.yield_per"><code class="docutils literal notranslate"><span class="pre">CursorResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.FilterResult"><code class="docutils literal notranslate"><span class="pre">FilterResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.FilterResult.close"><code class="docutils literal notranslate"><span class="pre">FilterResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.FilterResult.closed"><code class="docutils literal notranslate"><span class="pre">FilterResult.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.FilterResult.yield_per"><code class="docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.FrozenResult"><code class="docutils literal notranslate"><span class="pre">FrozenResult</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.IteratorResult"><code class="docutils literal notranslate"><span class="pre">IteratorResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.IteratorResult.closed"><code class="docutils literal notranslate"><span class="pre">IteratorResult.closed</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MergedResult"><code class="docutils literal notranslate"><span class="pre">MergedResult</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">Result</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.all"><code class="docutils literal notranslate"><span class="pre">Result.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.close"><code class="docutils literal notranslate"><span class="pre">Result.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.closed"><code class="docutils literal notranslate"><span class="pre">Result.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.columns"><code class="docutils literal notranslate"><span class="pre">Result.columns()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.fetchall"><code class="docutils literal notranslate"><span class="pre">Result.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.fetchmany"><code class="docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.fetchone"><code class="docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.first"><code class="docutils literal notranslate"><span class="pre">Result.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.freeze"><code class="docutils literal notranslate"><span class="pre">Result.freeze()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.keys"><code class="docutils literal notranslate"><span class="pre">Result.keys()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.mappings"><code class="docutils literal notranslate"><span class="pre">Result.mappings()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.merge"><code class="docutils literal notranslate"><span class="pre">Result.merge()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.one"><code class="docutils literal notranslate"><span class="pre">Result.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.one_or_none"><code class="docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.partitions"><code class="docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.scalar"><code class="docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.scalar_one"><code class="docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.scalar_one_or_none"><code class="docutils literal notranslate"><span class="pre">Result.scalar_one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.scalars"><code class="docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.t"><code class="docutils literal notranslate"><span class="pre">Result.t</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.tuples"><code class="docutils literal notranslate"><span class="pre">Result.tuples()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.unique"><code class="docutils literal notranslate"><span class="pre">Result.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Result.yield_per"><code class="docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">ScalarResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.all"><code class="docutils literal notranslate"><span class="pre">ScalarResult.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.close"><code class="docutils literal notranslate"><span class="pre">ScalarResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.closed"><code class="docutils literal notranslate"><span class="pre">ScalarResult.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.fetchall"><code class="docutils literal notranslate"><span class="pre">ScalarResult.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">ScalarResult.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.first"><code class="docutils literal notranslate"><span class="pre">ScalarResult.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.one"><code class="docutils literal notranslate"><span class="pre">ScalarResult.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">ScalarResult.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.partitions"><code class="docutils literal notranslate"><span class="pre">ScalarResult.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.unique"><code class="docutils literal notranslate"><span class="pre">ScalarResult.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.ScalarResult.yield_per"><code class="docutils literal notranslate"><span class="pre">ScalarResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">MappingResult</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.all"><code class="docutils literal notranslate"><span class="pre">MappingResult.all()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.close"><code class="docutils literal notranslate"><span class="pre">MappingResult.close()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.closed"><code class="docutils literal notranslate"><span class="pre">MappingResult.closed</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.columns"><code class="docutils literal notranslate"><span class="pre">MappingResult.columns()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.fetchall"><code class="docutils literal notranslate"><span class="pre">MappingResult.fetchall()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">MappingResult.fetchmany()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.fetchone"><code class="docutils literal notranslate"><span class="pre">MappingResult.fetchone()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.first"><code class="docutils literal notranslate"><span class="pre">MappingResult.first()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.keys"><code class="docutils literal notranslate"><span class="pre">MappingResult.keys()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.one"><code class="docutils literal notranslate"><span class="pre">MappingResult.one()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">MappingResult.one_or_none()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.partitions"><code class="docutils literal notranslate"><span class="pre">MappingResult.partitions()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.unique"><code class="docutils literal notranslate"><span class="pre">MappingResult.unique()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.MappingResult.yield_per"><code class="docutils literal notranslate"><span class="pre">MappingResult.yield_per()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">Row</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row._asdict"><code class="docutils literal notranslate"><span class="pre">Row._asdict()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row._fields"><code class="docutils literal notranslate"><span class="pre">Row._fields</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row._mapping"><code class="docutils literal notranslate"><span class="pre">Row._mapping</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row._t"><code class="docutils literal notranslate"><span class="pre">Row._t</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row._tuple"><code class="docutils literal notranslate"><span class="pre">Row._tuple()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row.count"><code class="docutils literal notranslate"><span class="pre">Row.count</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row.index"><code class="docutils literal notranslate"><span class="pre">Row.index</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row.t"><code class="docutils literal notranslate"><span class="pre">Row.t</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.Row.tuple"><code class="docutils literal notranslate"><span class="pre">Row.tuple()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.RowMapping"><code class="docutils literal notranslate"><span class="pre">RowMapping</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.RowMapping.items"><code class="docutils literal notranslate"><span class="pre">RowMapping.items()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.RowMapping.keys"><code class="docutils literal notranslate"><span class="pre">RowMapping.keys()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.RowMapping.values"><code class="docutils literal notranslate"><span class="pre">RowMapping.values()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.engine.TupleResult"><code class="docutils literal notranslate"><span class="pre">TupleResult</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="pooling.html">Connection Pooling</a></span></li>
<li><span class="link-container"><a class="reference external" href="events.html">Core Events</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="api_basics.html">Core API Basics</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="engines.html" title="previous chapter">Engine Configuration</a></li>
                <li><b>Next:</b>
                <a href="pooling.html" title="next chapter">Connection Pooling</a></li>

            <li><b>Up:</b> <a href="../index.html">Home</a></li>
                    <ul><li><a href="index.html" title="SQLAlchemy Core">SQLAlchemy Core</a></li>
                    <ul><li><a href="engines_connections.html" title="Engine and Connection Use">Engine and Connection Use</a></li>
                </ul>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#module-sqlalchemy.engine">Working with Engines and Connections</a><ul>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li><a class="reference internal" href="#using-transactions">Using Transactions</a><ul>
<li><a class="reference internal" href="#commit-as-you-go">Commit As You Go</a></li>
<li><a class="reference internal" href="#begin-once">Begin Once</a></li>
<li><a class="reference internal" href="#connect-and-begin-once-from-the-engine">Connect and Begin Once from the Engine</a></li>
<li><a class="reference internal" href="#mixing-styles">Mixing Styles</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-transaction-isolation-levels-including-dbapi-autocommit">Setting Transaction Isolation Levels including DBAPI Autocommit</a><ul>
<li><a class="reference internal" href="#setting-isolation-level-or-dbapi-autocommit-for-a-connection">Setting Isolation Level or DBAPI Autocommit for a Connection</a></li>
<li><a class="reference internal" href="#setting-isolation-level-or-dbapi-autocommit-for-an-engine">Setting Isolation Level or DBAPI Autocommit for an Engine</a></li>
<li><a class="reference internal" href="#maintaining-multiple-isolation-levels-for-a-single-engine">Maintaining Multiple Isolation Levels for a Single Engine</a></li>
<li><a class="reference internal" href="#understanding-the-dbapi-level-autocommit-isolation-level">Understanding the DBAPI-Level Autocommit Isolation Level</a><ul>
<li><a class="reference internal" href="#changing-between-isolation-levels">Changing Between Isolation Levels</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#using-server-side-cursors-a-k-a-stream-results">Using Server Side Cursors (a.k.a. stream results)</a><ul>
<li><a class="reference internal" href="#streaming-with-a-fixed-buffer-via-yield-per">Streaming with a fixed buffer via yield_per</a></li>
<li><a class="reference internal" href="#streaming-with-a-dynamically-growing-buffer-using-stream-results">Streaming with a dynamically growing buffer using stream_results</a></li>
</ul>
</li>
<li><a class="reference internal" href="#translation-of-schema-names">Translation of Schema Names</a></li>
<li><a class="reference internal" href="#sql-compilation-caching">SQL Compilation Caching</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#estimating-cache-performance-using-logging">Estimating Cache Performance Using Logging</a></li>
<li><a class="reference internal" href="#how-much-memory-does-the-cache-use">How much memory does the cache use?</a></li>
<li><a class="reference internal" href="#disabling-or-using-an-alternate-dictionary-to-cache-some-or-all-statements">Disabling or using an alternate dictionary to cache some (or all) statements</a></li>
<li><a class="reference internal" href="#caching-for-third-party-dialects">Caching for Third Party Dialects</a><ul>
<li><a class="reference internal" href="#example-rendering-limit-offset-with-post-compile-parameters">Example: Rendering LIMIT / OFFSET with post compile parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-lambdas-to-add-significant-speed-gains-to-statement-production">Using Lambdas to add significant speed gains to statement production</a><ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#quick-guidelines-for-lambdas">Quick Guidelines for Lambdas</a></li>
<li><a class="reference internal" href="#cache-key-generation">Cache Key Generation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#insert-many-values-behavior-for-insert-statements">“Insert Many Values” Behavior for INSERT statements</a><ul>
<li><a class="reference internal" href="#current-support">Current Support</a></li>
<li><a class="reference internal" href="#disabling-the-feature">Disabling the feature</a></li>
<li><a class="reference internal" href="#batched-mode-operation">Batched Mode Operation</a></li>
<li><a class="reference internal" href="#correlating-returning-rows-to-parameter-sets">Correlating RETURNING rows to parameter sets</a></li>
<li><a class="reference internal" href="#non-batched-mode-operation">Non-Batched Mode Operation</a></li>
<li><a class="reference internal" href="#statement-execution-model">Statement Execution Model</a><ul>
<li><a class="reference internal" href="#configuring-sentinel-columns">Configuring Sentinel Columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#controlling-the-batch-size">Controlling the Batch Size</a></li>
<li><a class="reference internal" href="#logging-and-events">Logging and Events</a></li>
<li><a class="reference internal" href="#upsert-support">Upsert Support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#engine-disposal">Engine Disposal</a></li>
<li><a class="reference internal" href="#working-with-driver-sql-and-raw-dbapi-connections">Working with Driver SQL and Raw DBAPI Connections</a><ul>
<li><a class="reference internal" href="#invoking-sql-strings-directly-to-the-driver">Invoking SQL strings directly to the driver</a></li>
<li><a class="reference internal" href="#working-with-the-dbapi-cursor-directly">Working with the DBAPI cursor directly</a></li>
<li><a class="reference internal" href="#calling-stored-procedures-and-user-defined-functions">Calling Stored Procedures and User Defined Functions</a></li>
<li><a class="reference internal" href="#multiple-result-sets">Multiple Result Sets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registering-new-dialects">Registering New Dialects</a><ul>
<li><a class="reference internal" href="#registering-dialects-in-process">Registering Dialects In-Process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#connection-engine-api">Connection / Engine API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.__init__"><code class="docutils literal notranslate"><span class="pre">Connection.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.begin"><code class="docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested"><code class="docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase"><code class="docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.close"><code class="docutils literal notranslate"><span class="pre">Connection.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.closed"><code class="docutils literal notranslate"><span class="pre">Connection.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.commit"><code class="docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.connection"><code class="docutils literal notranslate"><span class="pre">Connection.connection</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.default_isolation_level"><code class="docutils literal notranslate"><span class="pre">Connection.default_isolation_level</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.detach"><code class="docutils literal notranslate"><span class="pre">Connection.detach()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql"><code class="docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.execute"><code class="docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options"><code class="docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.get_execution_options"><code class="docutils literal notranslate"><span class="pre">Connection.get_execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level"><code class="docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">Connection.get_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.get_transaction"><code class="docutils literal notranslate"><span class="pre">Connection.get_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">Connection.in_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.in_transaction"><code class="docutils literal notranslate"><span class="pre">Connection.in_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.info"><code class="docutils literal notranslate"><span class="pre">Connection.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate"><code class="docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.invalidated"><code class="docutils literal notranslate"><span class="pre">Connection.invalidated</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.rollback"><code class="docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.scalar"><code class="docutils literal notranslate"><span class="pre">Connection.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.scalars"><code class="docutils literal notranslate"><span class="pre">Connection.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Connection.schema_for_object"><code class="docutils literal notranslate"><span class="pre">Connection.schema_for_object()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.__init__"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.engine_created()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.handle_dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.handle_dialect_kwargs()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.handle_pool_kwargs"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.handle_pool_kwargs()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">Engine</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.begin"><code class="docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.clear_compiled_cache"><code class="docutils literal notranslate"><span class="pre">Engine.clear_compiled_cache()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.connect"><code class="docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.dispose"><code class="docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.driver"><code class="docutils literal notranslate"><span class="pre">Engine.driver</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.engine"><code class="docutils literal notranslate"><span class="pre">Engine.engine</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options"><code class="docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.get_execution_options"><code class="docutils literal notranslate"><span class="pre">Engine.get_execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.name"><code class="docutils literal notranslate"><span class="pre">Engine.name</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.raw_connection"><code class="docutils literal notranslate"><span class="pre">Engine.raw_connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Engine.update_execution_options"><code class="docutils literal notranslate"><span class="pre">Engine.update_execution_options()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">ExceptionContext</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.chained_exception"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.chained_exception</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.connection"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.connection</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.cursor"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.cursor</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.dialect"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.dialect</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.engine"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.engine</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.execution_context"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.execution_context</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.invalidate_pool_on_disconnect</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.is_disconnect"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.is_disconnect</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.is_pre_ping"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.is_pre_ping</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.original_exception"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.original_exception</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.parameters"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.parameters</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.sqlalchemy_exception"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.sqlalchemy_exception</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.statement"><code class="docutils literal notranslate"><span class="pre">ExceptionContext.statement</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction"><code class="docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.close"><code class="docutils literal notranslate"><span class="pre">NestedTransaction.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.commit"><code class="docutils literal notranslate"><span class="pre">NestedTransaction.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">NestedTransaction.rollback()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.RootTransaction"><code class="docutils literal notranslate"><span class="pre">RootTransaction</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.RootTransaction.close"><code class="docutils literal notranslate"><span class="pre">RootTransaction.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.RootTransaction.commit"><code class="docutils literal notranslate"><span class="pre">RootTransaction.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.RootTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">RootTransaction.rollback()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.Transaction"><code class="docutils literal notranslate"><span class="pre">Transaction</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.Transaction.close"><code class="docutils literal notranslate"><span class="pre">Transaction.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Transaction.commit"><code class="docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback"><code class="docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.close"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.commit"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction.prepare()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.rollback"><code class="docutils literal notranslate"><span class="pre">TwoPhaseTransaction.rollback()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#result-set-api">Result Set API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult"><code class="docutils literal notranslate"><span class="pre">ChunkedIteratorResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult.yield_per"><code class="docutils literal notranslate"><span class="pre">ChunkedIteratorResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">CursorResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.all"><code class="docutils literal notranslate"><span class="pre">CursorResult.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.close"><code class="docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.columns"><code class="docutils literal notranslate"><span class="pre">CursorResult.columns()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchall"><code class="docutils literal notranslate"><span class="pre">CursorResult.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">CursorResult.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchone"><code class="docutils literal notranslate"><span class="pre">CursorResult.fetchone()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.first"><code class="docutils literal notranslate"><span class="pre">CursorResult.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.freeze"><code class="docutils literal notranslate"><span class="pre">CursorResult.freeze()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><code class="docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key_rows</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.is_insert"><code class="docutils literal notranslate"><span class="pre">CursorResult.is_insert</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.keys"><code class="docutils literal notranslate"><span class="pre">CursorResult.keys()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.last_inserted_params"><code class="docutils literal notranslate"><span class="pre">CursorResult.last_inserted_params()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.last_updated_params"><code class="docutils literal notranslate"><span class="pre">CursorResult.last_updated_params()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.lastrow_has_defaults"><code class="docutils literal notranslate"><span class="pre">CursorResult.lastrow_has_defaults()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.lastrowid"><code class="docutils literal notranslate"><span class="pre">CursorResult.lastrowid</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.mappings"><code class="docutils literal notranslate"><span class="pre">CursorResult.mappings()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.merge"><code class="docutils literal notranslate"><span class="pre">CursorResult.merge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.one"><code class="docutils literal notranslate"><span class="pre">CursorResult.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">CursorResult.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.partitions"><code class="docutils literal notranslate"><span class="pre">CursorResult.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.postfetch_cols"><code class="docutils literal notranslate"><span class="pre">CursorResult.postfetch_cols()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.prefetch_cols"><code class="docutils literal notranslate"><span class="pre">CursorResult.prefetch_cols()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.returned_defaults"><code class="docutils literal notranslate"><span class="pre">CursorResult.returned_defaults</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.returned_defaults_rows"><code class="docutils literal notranslate"><span class="pre">CursorResult.returned_defaults_rows</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.returns_rows"><code class="docutils literal notranslate"><span class="pre">CursorResult.returns_rows</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount"><code class="docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.scalar"><code class="docutils literal notranslate"><span class="pre">CursorResult.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.scalar_one"><code class="docutils literal notranslate"><span class="pre">CursorResult.scalar_one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.scalar_one_or_none"><code class="docutils literal notranslate"><span class="pre">CursorResult.scalar_one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.scalars"><code class="docutils literal notranslate"><span class="pre">CursorResult.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.splice_horizontally"><code class="docutils literal notranslate"><span class="pre">CursorResult.splice_horizontally()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.splice_vertically"><code class="docutils literal notranslate"><span class="pre">CursorResult.splice_vertically()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount"><code class="docutils literal notranslate"><span class="pre">CursorResult.supports_sane_multi_rowcount()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.supports_sane_rowcount"><code class="docutils literal notranslate"><span class="pre">CursorResult.supports_sane_rowcount()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.t"><code class="docutils literal notranslate"><span class="pre">CursorResult.t</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.tuples"><code class="docutils literal notranslate"><span class="pre">CursorResult.tuples()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.unique"><code class="docutils literal notranslate"><span class="pre">CursorResult.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.CursorResult.yield_per"><code class="docutils literal notranslate"><span class="pre">CursorResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.FilterResult"><code class="docutils literal notranslate"><span class="pre">FilterResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.FilterResult.close"><code class="docutils literal notranslate"><span class="pre">FilterResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.FilterResult.closed"><code class="docutils literal notranslate"><span class="pre">FilterResult.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per"><code class="docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.FrozenResult"><code class="docutils literal notranslate"><span class="pre">FrozenResult</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.IteratorResult"><code class="docutils literal notranslate"><span class="pre">IteratorResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.IteratorResult.closed"><code class="docutils literal notranslate"><span class="pre">IteratorResult.closed</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.MergedResult"><code class="docutils literal notranslate"><span class="pre">MergedResult</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">Result</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.all"><code class="docutils literal notranslate"><span class="pre">Result.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.close"><code class="docutils literal notranslate"><span class="pre">Result.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.closed"><code class="docutils literal notranslate"><span class="pre">Result.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.columns"><code class="docutils literal notranslate"><span class="pre">Result.columns()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.fetchall"><code class="docutils literal notranslate"><span class="pre">Result.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany"><code class="docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.fetchone"><code class="docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.first"><code class="docutils literal notranslate"><span class="pre">Result.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.freeze"><code class="docutils literal notranslate"><span class="pre">Result.freeze()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.keys"><code class="docutils literal notranslate"><span class="pre">Result.keys()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.mappings"><code class="docutils literal notranslate"><span class="pre">Result.mappings()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.merge"><code class="docutils literal notranslate"><span class="pre">Result.merge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.one"><code class="docutils literal notranslate"><span class="pre">Result.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none"><code class="docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.partitions"><code class="docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.scalar"><code class="docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one"><code class="docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one_or_none"><code class="docutils literal notranslate"><span class="pre">Result.scalar_one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.scalars"><code class="docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.t"><code class="docutils literal notranslate"><span class="pre">Result.t</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.tuples"><code class="docutils literal notranslate"><span class="pre">Result.tuples()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.unique"><code class="docutils literal notranslate"><span class="pre">Result.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Result.yield_per"><code class="docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">ScalarResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.all"><code class="docutils literal notranslate"><span class="pre">ScalarResult.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.close"><code class="docutils literal notranslate"><span class="pre">ScalarResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.closed"><code class="docutils literal notranslate"><span class="pre">ScalarResult.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.fetchall"><code class="docutils literal notranslate"><span class="pre">ScalarResult.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">ScalarResult.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.first"><code class="docutils literal notranslate"><span class="pre">ScalarResult.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.one"><code class="docutils literal notranslate"><span class="pre">ScalarResult.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">ScalarResult.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.partitions"><code class="docutils literal notranslate"><span class="pre">ScalarResult.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.unique"><code class="docutils literal notranslate"><span class="pre">ScalarResult.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.yield_per"><code class="docutils literal notranslate"><span class="pre">ScalarResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">MappingResult</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.all"><code class="docutils literal notranslate"><span class="pre">MappingResult.all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.close"><code class="docutils literal notranslate"><span class="pre">MappingResult.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.closed"><code class="docutils literal notranslate"><span class="pre">MappingResult.closed</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.columns"><code class="docutils literal notranslate"><span class="pre">MappingResult.columns()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.fetchall"><code class="docutils literal notranslate"><span class="pre">MappingResult.fetchall()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.fetchmany"><code class="docutils literal notranslate"><span class="pre">MappingResult.fetchmany()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.fetchone"><code class="docutils literal notranslate"><span class="pre">MappingResult.fetchone()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.first"><code class="docutils literal notranslate"><span class="pre">MappingResult.first()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.keys"><code class="docutils literal notranslate"><span class="pre">MappingResult.keys()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.one"><code class="docutils literal notranslate"><span class="pre">MappingResult.one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.one_or_none"><code class="docutils literal notranslate"><span class="pre">MappingResult.one_or_none()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.partitions"><code class="docutils literal notranslate"><span class="pre">MappingResult.partitions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.unique"><code class="docutils literal notranslate"><span class="pre">MappingResult.unique()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.MappingResult.yield_per"><code class="docutils literal notranslate"><span class="pre">MappingResult.yield_per()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">Row</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.Row._asdict"><code class="docutils literal notranslate"><span class="pre">Row._asdict()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Row._fields"><code class="docutils literal notranslate"><span class="pre">Row._fields</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Row._mapping"><code class="docutils literal notranslate"><span class="pre">Row._mapping</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Row._t"><code class="docutils literal notranslate"><span class="pre">Row._t</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Row._tuple"><code class="docutils literal notranslate"><span class="pre">Row._tuple()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Row.count"><code class="docutils literal notranslate"><span class="pre">Row.count</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Row.index"><code class="docutils literal notranslate"><span class="pre">Row.index</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Row.t"><code class="docutils literal notranslate"><span class="pre">Row.t</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.Row.tuple"><code class="docutils literal notranslate"><span class="pre">Row.tuple()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.RowMapping"><code class="docutils literal notranslate"><span class="pre">RowMapping</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.RowMapping.items"><code class="docutils literal notranslate"><span class="pre">RowMapping.items()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.RowMapping.keys"><code class="docutils literal notranslate"><span class="pre">RowMapping.keys()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.RowMapping.values"><code class="docutils literal notranslate"><span class="pre">RowMapping.values()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.engine.TupleResult"><code class="docutils literal notranslate"><span class="pre">TupleResult</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar core-connections" >
        
<section id="module-sqlalchemy.engine">
<span id="working-with-engines-and-connections"></span><span id="connections-toplevel"></span><h1>Working with Engines and Connections<a class="headerlink" href="#module-sqlalchemy.engine" title="Link to this heading">¶</a></h1>
<p>This section details direct usage of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, and related objects. Its important to note that when
using the SQLAlchemy ORM, these objects are not generally accessed; instead,
the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object is used as the interface to the database.
However, for applications that are built around direct usage of textual SQL
statements and/or SQL expression constructs without involvement by the ORM’s
higher level management services, the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> are king (and queen?) - read on.</p>
<section id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading">¶</a></h2>
<p>Recall from <a class="reference internal" href="engines.html"><span class="doc">Engine Configuration</span></a> that an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is created via
the <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mysql+mysqldb://scott:tiger@localhost/test&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The typical usage of <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> is once per particular database
URL, held globally for the lifetime of a single application process. A single
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> manages many individual <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a> connections on behalf of
the process and is intended to be called upon in a concurrent fashion. The
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is <strong>not</strong> synonymous to the DBAPI <code class="docutils literal notranslate"><span class="pre">connect()</span></code> function, which
represents just one connection resource - the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is most
efficient when created just once at the module level of an application, not
per-object or per-function call.</p>
<aside class="sidebar">
<p class="sidebar-title">tip</p>
<p>When using an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> with multiple Python processes, such as when
using <code class="docutils literal notranslate"><span class="pre">os.fork</span></code> or Python <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code>, it’s important that the
engine is initialized per process.  See <a class="reference internal" href="pooling.html#pooling-multiprocessing"><span class="std std-ref">Using Connection Pools with Multiprocessing or os.fork()</span></a> for
details.</p>
</aside>
<p>The most basic function of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is to provide access to a
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, which can then invoke SQL statements.   To emit
a textual statement to the database looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">text</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select username from users&quot;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="n">print</span><span class="p">(</span><span class="s2">&quot;username:&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">username</span><span class="p">)</span></pre></div>
</div>
<p>Above, the <a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> method returns a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
object, and by using it in a Python context manager (e.g. the <code class="docutils literal notranslate"><span class="pre">with:</span></code>
statement) the <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a> method is automatically invoked at the
end of the block.  The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, is a <strong>proxy</strong> object for an
actual DBAPI connection. The DBAPI connection is retrieved from the connection
pool at the point at which <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is created.</p>
<p>The object returned is known as <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>, which
references a DBAPI cursor and provides methods for fetching rows
similar to that of the DBAPI cursor.   The DBAPI cursor will be closed
by the <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> when all of its result rows (if any) are
exhausted.  A <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> that returns no rows, such as that of
an UPDATE statement (without any returned rows),
releases cursor resources immediately upon construction.</p>
<p>When the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is closed at the end of the <code class="docutils literal notranslate"><span class="pre">with:</span></code> block, the
referenced DBAPI connection is <a class="reference internal" href="../glossary.html#term-released"><span class="xref std std-term">released</span></a> to the connection pool.   From
the perspective of the database itself, the connection pool will not actually
“close” the connection assuming the pool has room to store this connection  for
the next use.  When the connection is returned to the pool for re-use, the
pooling mechanism issues a <code class="docutils literal notranslate"><span class="pre">rollback()</span></code> call on the DBAPI connection so that
any transactional state or locks are removed (this is known as
<a class="reference internal" href="pooling.html#pool-reset-on-return"><span class="std std-ref">Reset On Return</span></a>), and the connection is ready for its next use.</p>
<p>Our example above illustrated the execution of a textual SQL string, which
should be invoked by using the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct to indicate that
we’d like to use textual SQL.  The <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method can of
course accommodate more than that; see <a class="reference internal" href="../tutorial/data.html#tutorial-working-with-data"><span class="std std-ref">Working with Data</span></a>
in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy Unified Tutorial</span></a> for a tutorial.</p>
</section>
<section id="using-transactions">
<h2>Using Transactions<a class="headerlink" href="#using-transactions" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section describes how to use transactions when working directly
with <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects. When using the
SQLAlchemy ORM, the public API for transaction control is via the
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object, which makes usage of the <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
object internally. See <a class="reference internal" href="../orm/session_transaction.html#unitofwork-transaction"><span class="std std-ref">Managing Transactions</span></a> for further
information.</p>
</div>
<section id="commit-as-you-go">
<h3>Commit As You Go<a class="headerlink" href="#commit-as-you-go" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object always emits SQL statements
within the context of a transaction block.   The first time the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method is called to execute a SQL
statement, this transaction is begun automatically, using a behavior known
as <strong>autobegin</strong>.  The transaction remains in place for the scope of the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object until the <a class="reference internal" href="#sqlalchemy.engine.Connection.commit" title="sqlalchemy.engine.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a>
or <a class="reference internal" href="#sqlalchemy.engine.Connection.rollback" title="sqlalchemy.engine.Connection.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a> methods are called.  Subsequent
to the transaction ending, the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> waits for the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method to be called again, at which point
it autobegins again.</p>
<p>This calling style is known as <strong>commit as you go</strong>, and is
illustrated in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">some_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some data&quot;</span><span class="p">})</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">some_other_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some more data&quot;</span><span class="p">}</span>
    <span class="p">)</span>

    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># commit the transaction</span></pre></div>
</div>
<aside class="topic">
<p class="topic-title">the Python DBAPI is where autobegin actually happens</p>
<p>The design of “commit as you go” is intended to be complementary to the
design of the <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a>, which is the underlying database interface
that SQLAlchemy interacts with. In the DBAPI, the <code class="docutils literal notranslate"><span class="pre">connection</span></code> object does
not assume changes to the database will be automatically committed, instead
requiring in the default case that the <code class="docutils literal notranslate"><span class="pre">connection.commit()</span></code> method is
called in order to commit changes to the database. It should be noted that
the DBAPI itself <strong>does not have a begin() method at all</strong>.  All
Python DBAPIs implement “autobegin” as the primary means of managing
transactions, and handle the job of emitting a statement like BEGIN on the
connection when SQL statements are first emitted.
SQLAlchemy’s API is basically re-stating this behavior in terms of higher
level Python objects.</p>
</aside>
<p>In “commit as you go” style, we can call upon <a class="reference internal" href="#sqlalchemy.engine.Connection.commit" title="sqlalchemy.engine.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a>
and <a class="reference internal" href="#sqlalchemy.engine.Connection.rollback" title="sqlalchemy.engine.Connection.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a> methods freely within an ongoing
sequence of other statements emitted using <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>;
each time the transaction is ended, and a new statement is
emitted, a new transaction begins implicitly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;some statement&gt;&quot;</span><span class="p">))</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># commits &quot;some statement&quot;</span>

    <span class="c1"># new transaction starts</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;some other statement&gt;&quot;</span><span class="p">))</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>  <span class="c1"># rolls back &quot;some other statement&quot;</span>

    <span class="c1"># new transaction starts</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;a third statement&gt;&quot;</span><span class="p">))</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># commits &quot;a third statement&quot;</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0: </span>“commit as you go” style is a new feature of
SQLAlchemy 2.0.  It is also available in SQLAlchemy 1.4’s “transitional”
mode when using a “future” style engine.</p>
</div>
</section>
<section id="begin-once">
<h3>Begin Once<a class="headerlink" href="#begin-once" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object provides a more explicit transaction
management style known as <strong>begin once</strong>. In contrast to “commit as
you go”, “begin once” allows the start point of the transaction to be
stated explicitly,
and allows that the transaction itself may be framed out as a context manager
block so that the end of the transaction is instead implicit. To use
“begin once”, the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is used, which returns a
<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object which represents the DBAPI transaction.
This object also supports explicit management via its own
<a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a>
methods, but as a preferred practice also supports the context manager interface,
where it will commit itself when
the block ends normally and emit a rollback if an exception is raised, before
propagating the exception outwards. Below illustrates the form of a “begin
once” block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">some_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some data&quot;</span><span class="p">})</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">some_other_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some more data&quot;</span><span class="p">}</span>
        <span class="p">)</span>

    <span class="c1"># transaction is committed</span></pre></div>
</div>
</section>
<section id="connect-and-begin-once-from-the-engine">
<h3>Connect and Begin Once from the Engine<a class="headerlink" href="#connect-and-begin-once-from-the-engine" title="Link to this heading">¶</a></h3>
<p>A convenient shorthand form for the above “begin once” block is to use
the <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> method at the level of the originating
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object, rather than performing the two separate
steps of <a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>;
the <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> method returns a special context manager
that internally maintains both the context manager for the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
as well as the context manager for the <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> normally
returned by the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">some_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some data&quot;</span><span class="p">})</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">some_other_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some more data&quot;</span><span class="p">}</span>
    <span class="p">)</span>

<span class="c1"># transaction is committed, and Connection is released to the connection</span>
<span class="c1"># pool</span></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Within the <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> block, we can call upon the
<a class="reference internal" href="#sqlalchemy.engine.Connection.commit" title="sqlalchemy.engine.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Connection.rollback" title="sqlalchemy.engine.Connection.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a>
methods, which will end the transaction normally demarcated by the block
ahead of time.  However, if we do so, no further SQL operations may be
emitted on the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> until the block ends:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">e</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="go">2021-11-08 09:49:07,517 INFO sqlalchemy.engine.Engine BEGIN (implicit)</span>
<span class="go">2021-11-08 09:49:07,517 INFO sqlalchemy.engine.Engine COMMIT</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">sqlalchemy.exc.InvalidRequestError</span>: <span class="n">Can&#39;t operate on closed transaction inside</span>
<span class="x">context manager.  Please complete the context manager before emitting</span>
<span class="x">further commands.</span></pre></div>
</div>
</div>
</section>
<section id="mixing-styles">
<h3>Mixing Styles<a class="headerlink" href="#mixing-styles" title="Link to this heading">¶</a></h3>
<p>The “commit as you go” and “begin once” styles can be freely mixed within
a single <a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> block, provided that the call to
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> does not conflict with the “autobegin”
behavior.  To accomplish this, <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> should only
be called either before any SQL statements have been emitted, or directly
after a previous call to <a class="reference internal" href="#sqlalchemy.engine.Connection.commit" title="sqlalchemy.engine.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Connection.rollback" title="sqlalchemy.engine.Connection.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
        <span class="c1"># run statements in a &quot;begin once&quot; block</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">some_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some data&quot;</span><span class="p">})</span>

    <span class="c1"># transaction is committed</span>

    <span class="c1"># run a new statement outside of a block. The connection</span>
    <span class="c1"># autobegins</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">some_other_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some more data&quot;</span><span class="p">}</span>
    <span class="p">)</span>

    <span class="c1"># commit explicitly</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># can use a &quot;begin once&quot; block here</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
        <span class="c1"># run more statements</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span></pre></div>
</div>
<p>When developing code that uses “begin once”, the library will raise
<a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if a transaction was already “autobegun”.</p>
</section>
</section>
<section id="setting-transaction-isolation-levels-including-dbapi-autocommit">
<span id="dbapi-autocommit"></span><h2>Setting Transaction Isolation Levels including DBAPI Autocommit<a class="headerlink" href="#setting-transaction-isolation-levels-including-dbapi-autocommit" title="Link to this heading">¶</a></h2>
<p>Most DBAPIs support the concept of configurable transaction <a class="reference internal" href="../glossary.html#term-isolation"><span class="xref std std-term">isolation</span></a> levels.
These are traditionally the four levels “READ UNCOMMITTED”, “READ COMMITTED”,
“REPEATABLE READ” and “SERIALIZABLE”.  These are usually applied to a
DBAPI connection before it begins a new transaction, noting that most
DBAPIs will begin this transaction implicitly when SQL statements are first
emitted.</p>
<p>DBAPIs that support isolation levels also usually support the concept of true
“autocommit”, which means that the DBAPI connection itself will be placed into
a non-transactional autocommit mode. This usually means that the typical DBAPI
behavior of emitting “BEGIN” to the database automatically no longer occurs,
but it may also include other directives. SQLAlchemy treats the concept of
“autocommit” like any other isolation level; in that it is an isolation level
that loses not only “read committed” but also loses atomicity.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is important to note, as will be discussed further in the section below at
<a class="reference internal" href="#dbapi-autocommit-understanding"><span class="std std-ref">Understanding the DBAPI-Level Autocommit Isolation Level</span></a>, that “autocommit” isolation level like
any other isolation level does <strong>not</strong> affect the “transactional” behavior of
the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object, which continues to call upon DBAPI
<code class="docutils literal notranslate"><span class="pre">.commit()</span></code> and <code class="docutils literal notranslate"><span class="pre">.rollback()</span></code> methods (they just have no effect under
autocommit), and for which the <code class="docutils literal notranslate"><span class="pre">.begin()</span></code> method assumes the DBAPI will
start a transaction implicitly (which means that SQLAlchemy’s “begin” <strong>does
not change autocommit mode</strong>).</p>
</div>
<p>SQLAlchemy dialects should support these isolation levels as well as autocommit
to as great a degree as possible.</p>
<section id="setting-isolation-level-or-dbapi-autocommit-for-a-connection">
<h3>Setting Isolation Level or DBAPI Autocommit for a Connection<a class="headerlink" href="#setting-isolation-level-or-dbapi-autocommit-for-a-connection" title="Link to this heading">¶</a></h3>
<p>For an individual <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object that’s acquired from
<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a>, the isolation level can be set for the duration of
that <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a> method. The parameter is known as
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a> and the values
are strings which are typically a subset of the following names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># possible values for Connection.execution_options(isolation_level=&quot;&lt;value&gt;&quot;)</span>

<span class="s2">&quot;AUTOCOMMIT&quot;</span>
<span class="s2">&quot;READ COMMITTED&quot;</span>
<span class="s2">&quot;READ UNCOMMITTED&quot;</span>
<span class="s2">&quot;REPEATABLE READ&quot;</span>
<span class="s2">&quot;SERIALIZABLE&quot;</span></pre></div>
</div>
<p>Not every DBAPI supports every value; if an unsupported value is used for a
certain backend, an error is raised.</p>
<p>For example, to force REPEATABLE READ on a specific connection, then
begin a transaction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span>
    <span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;REPEATABLE READ&quot;</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The return value of
the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a> method is the same
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object upon which the method was called,
meaning, it modifies the state of the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
object in place.  This is a new behavior as of SQLAlchemy 2.0.
This behavior does not apply to the <a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a>
method; that method still returns a copy of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and
as described below may be used to construct multiple <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
objects with different execution options, which nonetheless share the same
dialect and connection pool.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
parameter necessarily does not apply to statement level options, such as
that of <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a>, and will be rejected if
set at this level. This because the option must be set on a DBAPI connection
on a per-transaction basis.</p>
</div>
</section>
<section id="setting-isolation-level-or-dbapi-autocommit-for-an-engine">
<h3>Setting Isolation Level or DBAPI Autocommit for an Engine<a class="headerlink" href="#setting-isolation-level-or-dbapi-autocommit-for-an-engine" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a> option may
also be set engine wide, as is often preferable.  This may be
achieved by passing the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a>
parameter to <code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">eng</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">,</span> <span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;REPEATABLE READ&quot;</span>
<span class="p">)</span></pre></div>
</div>
<p>With the above setting, each new DBAPI connection the moment it’s created will
be set to use a <code class="docutils literal notranslate"><span class="pre">&quot;REPEATABLE</span> <span class="pre">READ&quot;</span></code> isolation level setting for all
subsequent operations.</p>
</section>
<section id="maintaining-multiple-isolation-levels-for-a-single-engine">
<span id="dbapi-autocommit-multiple"></span><h3>Maintaining Multiple Isolation Levels for a Single Engine<a class="headerlink" href="#maintaining-multiple-isolation-levels-for-a-single-engine" title="Link to this heading">¶</a></h3>
<p>The isolation level may also be set per engine, with a potentially greater
level of flexibility, using either the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.execution_options" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.execution_options</span></code></a> parameter to
<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> or the <a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a>
method, the latter of which will create a copy of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> that
shares the dialect and connection pool of the original engine, but has its own
per-connection isolation level setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">eng</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
    <span class="n">execution_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;isolation_level&quot;</span><span class="p">:</span> <span class="s2">&quot;REPEATABLE READ&quot;</span><span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
<p>With the above setting, the DBAPI connection will be set to use a
<code class="docutils literal notranslate"><span class="pre">&quot;REPEATABLE</span> <span class="pre">READ&quot;</span></code> isolation level setting for each new transaction
begun; but the connection as pooled will be reset to the original isolation
level that was present when the connection first occurred.   At the level
of <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>, the end effect is not any different
from using the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a> parameter.</p>
<p>However, an application that frequently chooses to run operations within
different isolation levels may wish to create multiple “sub-engines” of a lead
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, each of which will be configured to a different
isolation level. One such use case is an application that has operations that
break into “transactional” and “read-only” operations, a separate
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> that makes use of <code class="docutils literal notranslate"><span class="pre">&quot;AUTOCOMMIT&quot;</span></code> may be separated off
from the main engine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">eng</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost/test&quot;</span><span class="p">)</span>

<span class="n">autocommit_engine</span> <span class="o">=</span> <span class="n">eng</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;AUTOCOMMIT&quot;</span><span class="p">)</span></pre></div>
</div>
<p>Above, the <a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a> method creates a shallow
copy of the original <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.  Both <code class="docutils literal notranslate"><span class="pre">eng</span></code> and
<code class="docutils literal notranslate"><span class="pre">autocommit_engine</span></code> share the same dialect and connection pool.  However, the
“AUTOCOMMIT” mode will be set upon connections when they are acquired from the
<code class="docutils literal notranslate"><span class="pre">autocommit_engine</span></code>.</p>
<p>The isolation level setting, regardless of which one it is, is unconditionally
reverted when a connection is returned to the connection pool.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/sqlite.html#sqlite-isolation-level"><span class="std std-ref">SQLite Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/postgresql.html#postgresql-isolation-level"><span class="std std-ref">PostgreSQL Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/mysql.html#mysql-isolation-level"><span class="std std-ref">MySQL Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/mssql.html#mssql-isolation-level"><span class="std std-ref">SQL Server Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/oracle.html#oracle-isolation-level"><span class="std std-ref">Oracle Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../orm/session_transaction.html#session-transaction-isolation"><span class="std std-ref">Setting Transaction Isolation Levels / DBAPI AUTOCOMMIT</span></a> - for the ORM</p>
<p><a class="reference internal" href="../faq/connections.html#faq-execute-retry-autocommit"><span class="std std-ref">Using DBAPI Autocommit Allows for a Readonly Version of Transparent Reconnect</span></a> - a recipe that uses DBAPI autocommit
to transparently reconnect to the database for read-only operations</p>
</div>
</section>
<section id="understanding-the-dbapi-level-autocommit-isolation-level">
<span id="dbapi-autocommit-understanding"></span><h3>Understanding the DBAPI-Level Autocommit Isolation Level<a class="headerlink" href="#understanding-the-dbapi-level-autocommit-isolation-level" title="Link to this heading">¶</a></h3>
<p>In the parent section, we introduced the concept of the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
parameter and how it can be used to set database isolation levels, including
DBAPI-level “autocommit” which is treated by SQLAlchemy as another transaction
isolation level.   In this section we will attempt to clarify the implications
of this approach.</p>
<p>If we wanted to check out a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object and use it
“autocommit” mode, we would proceed as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;AUTOCOMMIT&quot;</span><span class="p">)</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span></pre></div>
</div>
<p>Above illustrates normal usage of “DBAPI autocommit” mode.   There is no
need to make use of methods such as <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>
or <a class="reference internal" href="#sqlalchemy.engine.Connection.commit" title="sqlalchemy.engine.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a>, as all statements are committed
to the database immediately.  When the block ends, the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
object will revert the “autocommit” isolation level, and the DBAPI connection
is released to the connection pool where the DBAPI <code class="docutils literal notranslate"><span class="pre">connection.rollback()</span></code>
method will normally be invoked, but as the above statements were already
committed, this rollback has no change on the state of the database.</p>
<p>It is important to note that “autocommit” mode
persists even when the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is called;
the DBAPI will not emit any BEGIN to the database, nor will it emit
COMMIT when <a class="reference internal" href="#sqlalchemy.engine.Connection.commit" title="sqlalchemy.engine.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a> is called.  This usage is also
not an error scenario, as it is expected that the “autocommit” isolation level
may be applied to code that otherwise was written assuming a transactional context;
the “isolation level” is, after all, a configurational detail of the transaction
itself just like any other isolation level.</p>
<p>In the example below, statements remain
<strong>autocommitting</strong> regardless of SQLAlchemy-level transaction blocks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;AUTOCOMMIT&quot;</span><span class="p">)</span>

    <span class="c1"># this begin() does not affect the DBAPI connection, isolation stays at AUTOCOMMIT</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">trans</span><span class="p">:</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span></pre></div>
</div>
<p>When we run a block like the above with logging turned on, the logging
will attempt to indicate that while a DBAPI level <code class="docutils literal notranslate"><span class="pre">.commit()</span></code> is called,
it probably will have no effect due to autocommit mode:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>INFO sqlalchemy.engine.Engine BEGIN (implicit)
...
INFO sqlalchemy.engine.Engine COMMIT using DBAPI connection.commit(), DBAPI should ignore due to autocommit mode</pre></div>
</div>
<p>At the same time, even though we are using “DBAPI autocommit”, SQLAlchemy’s
transactional semantics, that is, the in-Python behavior of <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>
as well as the behavior of “autobegin”, <strong>remain in place, even though these
don’t impact the DBAPI connection itself</strong>.  To illustrate, the code
below will raise an error, as <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> is being
called after autobegin has already occurred:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;AUTOCOMMIT&quot;</span><span class="p">)</span>

    <span class="c1"># &quot;transaction&quot; is autobegin (but has no effect due to autocommit)</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span>

    <span class="c1"># this will raise; &quot;transaction&quot; is already begun</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">trans</span><span class="p">:</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span></pre></div>
</div>
<p>The above example also demonstrates the same theme that the “autocommit”
isolation level is a configurational detail of the underlying database
transaction, and is independent of the begin/commit behavior of the SQLAlchemy
Connection object. The “autocommit” mode will not interact with
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> in any way and the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
does not consult this status when performing its own state changes with regards
to the transaction (with the exception of suggesting within engine logging that
these blocks are not actually committing). The rationale for this design is to
maintain a completely consistent usage pattern with the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> where DBAPI-autocommit mode can be changed
independently without indicating any code changes elsewhere.</p>
<section id="changing-between-isolation-levels">
<h4>Changing Between Isolation Levels<a class="headerlink" href="#changing-between-isolation-levels" title="Link to this heading">¶</a></h4>
<aside class="topic">
<p class="topic-title">TL;DR;</p>
<p>prefer to use individual <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects
each with just one isolation level, rather than switching isolation on a single
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.  The code will be easier to read and less
error prone.</p>
</aside>
<p>Isolation level settings, including autocommit mode, are reset automatically
when the connection is released back to the connection pool. Therefore it is
preferable to avoid trying to switch isolation levels on a single
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object as this leads to excess verbosity.</p>
<p>To illustrate how to use “autocommit” in an ad-hoc mode within the scope of a
single <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> checkout, the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a> parameter
must be re-applied with the previous isolation level.
The previous section illustrated an attempt to call <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>
in order to start a transaction while autocommit was taking place; we can
rewrite that example to actually do so by first reverting the isolation level
before we call upon <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># if we wanted to flip autocommit on and off on a single connection/</span>
<span class="c1"># which... we usually don&#39;t.</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;AUTOCOMMIT&quot;</span><span class="p">)</span>

    <span class="c1"># run statement(s) in autocommit mode</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span>

    <span class="c1"># &quot;commit&quot; the autobegun &quot;transaction&quot;</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># switch to default isolation level</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="n">connection</span><span class="o">.</span><span class="n">default_isolation_level</span><span class="p">)</span>

    <span class="c1"># use a begin block</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">trans</span><span class="p">:</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span></pre></div>
</div>
<p>Above, to manually revert the isolation level we made use of
<a class="reference internal" href="#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.default_isolation_level</span></code></a> to restore the default
isolation level (assuming that’s what we want here). However, it’s
probably a better idea to work with the architecture of of the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> which already handles resetting of isolation level
automatically upon checkin. The <strong>preferred</strong> way to write the above is to
use two blocks</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># use an autocommit block</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;AUTOCOMMIT&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="c1"># run statement in autocommit mode</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span>

<span class="c1"># use a regular block</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;&lt;statement&gt;&quot;</span><span class="p">))</span></pre></div>
</div>
<p>To sum up:</p>
<ol class="arabic simple">
<li><p>“DBAPI level autocommit” isolation level is entirely independent of the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object’s notion of “begin” and “commit”</p></li>
<li><p>use individual <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> checkouts per isolation level.
Avoid trying to change back and forth between “autocommit” on a single
connection checkout; let the engine do the work of restoring default
isolation levels</p></li>
</ol>
</section>
</section>
</section>
<section id="using-server-side-cursors-a-k-a-stream-results">
<span id="engine-stream-results"></span><h2>Using Server Side Cursors (a.k.a. stream results)<a class="headerlink" href="#using-server-side-cursors-a-k-a-stream-results" title="Link to this heading">¶</a></h2>
<p>Some backends feature explicit support for the concept of “server
side cursors” versus “client side cursors”.  A client side cursor here
means that the database driver fully fetches all rows from a result set
into memory before returning from a statement execution.  Drivers such as
those of PostgreSQL and MySQL/MariaDB generally use client side cursors
by default.   A server side cursor, by contrast, indicates that result rows
remain pending within the database server’s state as result rows are consumed
by the client.  The drivers for Oracle generally use a “server side” model,
for example, and the SQLite dialect, while not using a real “client / server”
architecture, still uses an unbuffered result fetching approach that will
leave result rows outside of process memory before they are consumed.</p>
<aside class="topic">
<p class="topic-title">What we really mean is “buffered” vs. “unbuffered” results</p>
<p>Server side cursors also imply a wider set of features with relational
databases, such as the ability to “scroll” a cursor forwards and backwards.
SQLAlchemy does not include any explicit support for these behaviors; within
SQLAlchemy itself, the general term “server side cursors” should be considered
to mean “unbuffered results” and “client side cursors” means “result rows
are buffered into memory before the first row is returned”.   To work with
a richer “server side cursor” featureset specific to a certain DBAPI driver,
see the section <a class="reference internal" href="#dbapi-connections-cursor"><span class="std std-ref">Working with the DBAPI cursor directly</span></a>.</p>
</aside>
<p>From this basic architecture it follows that a “server side cursor” is more
memory efficient when fetching very large result sets, while at the same time
may introduce more complexity in the client/server communication process
and be less efficient for small result sets (typically less than 10000 rows).</p>
<p>For those dialects that have conditional support for buffered or unbuffered
results, there are usually caveats to the use of the “unbuffered”, or server
side cursor mode.   When using the psycopg2 dialect for example, an error is
raised if a server side cursor is used with any kind of DML or DDL statement.
When using MySQL drivers with a server side cursor, the DBAPI connection is in
a more fragile state and does not recover as gracefully from error conditions
nor will it allow a rollback to proceed until the cursor is fully closed.</p>
<p>For this reason, SQLAlchemy’s dialects will always default to the less error
prone version of a cursor, which means for PostgreSQL and MySQL dialects
it defaults to a buffered, “client side” cursor where the full set of results
is pulled into memory before any fetch methods are called from the cursor.
This mode of operation is appropriate in the <strong>vast majority</strong> of cases;
unbuffered cursors are not generally useful except in the uncommon case
of an application fetching a very large number of rows in chunks, where
the processing of these rows can be complete before more rows are fetched.</p>
<p>For database drivers that provide client and server side cursor options,
the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
and <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a> execution
options provide access to “server side cursors” on a per-<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
or per-statement basis.    Similar options exist when using an ORM
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> as well.</p>
<section id="streaming-with-a-fixed-buffer-via-yield-per">
<h3>Streaming with a fixed buffer via yield_per<a class="headerlink" href="#streaming-with-a-fixed-buffer-via-yield-per" title="Link to this heading">¶</a></h3>
<p>As individual row-fetch operations with fully unbuffered server side cursors
are typically more expensive than fetching batches of rows at once, The
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a> execution option
configures a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> or statement to make use of
server-side cursors as are available, while at the same time configuring a
fixed-size buffer of rows that will retrieve rows from the server in batches as
they are consumed. This parameter may be to a positive integer value using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a> method on
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> or on a statement using the
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a> as a
Core-only option is new as of SQLAlchemy 1.4.40; for prior 1.4 versions,
use <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
directly in combination with <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a>.</p>
</div>
<p>Using this option is equivalent to manually setting the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> option,
described in the next section, and then invoking the
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method on the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>
object with the given integer value.   In both cases, the effect this
combination has includes:</p>
<ul class="simple">
<li><p>server side cursors mode is selected for the given backend, if available
and not already the default behavior for that backend</p></li>
<li><p>as result rows are fetched, they will be buffered in batches, where the
size of each batch up until the last batch will be equal to the integer
argument passed to the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a> option or the
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method; the last batch is then sized against
the remaining rows fewer than this size</p></li>
<li><p>The default partition size used by the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>
method, if used, will be made equal to this integer size as well.</p></li>
</ul>
<p>These three behaviors are illustrated in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">yield_per</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">text</span><span class="p">(</span><span class="s2">&quot;select * from table&quot;</span><span class="p">)</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">partitions</span><span class="p">():</span>
            <span class="c1"># partition is an iterable that will be at most 100 items</span>
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">:</span>
                <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The above example illustrates the combination of <code class="docutils literal notranslate"><span class="pre">yield_per=100</span></code> along
with using the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> method to run processing
on rows in batches that match the size fetched from the server.   The
use of <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> is optional, and if the
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> is iterated directly, a new batch of rows will be
buffered for each 100 rows fetched.    Calling a method such as
<a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> should <strong>not</strong> be used, as this will fully
fetch all remaining rows at once and defeat the purpose of using <code class="docutils literal notranslate"><span class="pre">yield_per</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object may be used as a context manager as illustrated
above.  When iterating with a server-side cursor, this is the best way to
ensure the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object is closed, even if exceptions are
raised within the iteration process.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a> option
is portable to the ORM as well, used by a <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to fetch
ORM objects, where it also limits the amount of ORM objects generated at once.
See the section <a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a>
for further background on using
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a> with the ORM.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>Added
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a>
as a Core level execution option to conveniently set streaming results,
buffer size, and partition size all at once in a manner that is transferrable
to that of the ORM’s similar use case.</p>
</div>
</section>
<section id="streaming-with-a-dynamically-growing-buffer-using-stream-results">
<span id="engine-stream-results-sr"></span><h3>Streaming with a dynamically growing buffer using stream_results<a class="headerlink" href="#streaming-with-a-dynamically-growing-buffer-using-stream-results" title="Link to this heading">¶</a></h3>
<p>To enable server side cursors without a specific partition size, the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> option may be
used, which like <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a> may
be called on the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object or the statement object.</p>
<p>When a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object delivered using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> option
is iterated directly, rows are fetched internally
using a default buffering scheme that buffers first a small set of rows,
then a larger and larger buffer on each fetch up to a pre-configured limit
of 1000 rows.   The maximum size of this buffer can be affected using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.max_row_buffer" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.max_row_buffer</span></code></a> execution option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">stream_results</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">max_row_buffer</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">text</span><span class="p">(</span><span class="s2">&quot;select * from table&quot;</span><span class="p">)</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
</div>
<p>While the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
option may be combined with use of the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>
method, a specific partition size should be passed to
<a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> so that the entire result is not fetched.
It is usually more straightforward to use the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a> option when setting
up to use the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> method.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
</div>
</section>
</section>
<section id="translation-of-schema-names">
<span id="schema-translating"></span><h2>Translation of Schema Names<a class="headerlink" href="#translation-of-schema-names" title="Link to this heading">¶</a></h2>
<p>To support multi-tenancy applications that distribute common sets of tables
into multiple schemas, the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a>
execution option may be used to repurpose a set of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects
to render under different schema names without any changes.</p>
<p>Given a table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;user&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
<span class="p">)</span></pre></div>
</div>
<p>The “schema” of this <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> as defined by the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a> attribute is <code class="docutils literal notranslate"><span class="pre">None</span></code>.  The
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a> can specify
that all <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects with a schema of <code class="docutils literal notranslate"><span class="pre">None</span></code> would instead
render the schema as <code class="docutils literal notranslate"><span class="pre">user_schema_one</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span>
    <span class="n">schema_translate_map</span><span class="o">=</span><span class="p">{</span><span class="kc">None</span><span class="p">:</span> <span class="s2">&quot;user_schema_one&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span></pre></div>
</div>
<p>The above code will invoke SQL on the database of the form:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">user_schema_one</span><span class="p">.</span><span class="k">user</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">user_schema_one</span><span class="p">.</span><span class="k">user</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">FROM</span>
<span class="n">user_schema_one</span><span class="p">.</span><span class="k">user</span></pre></div>
</div>
<p>That is, the schema name is substituted with our translated name.  The
map can specify any number of target-&gt;destination schemas:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span>
    <span class="n">schema_translate_map</span><span class="o">=</span><span class="p">{</span>
        <span class="kc">None</span><span class="p">:</span> <span class="s2">&quot;user_schema_one&quot;</span><span class="p">,</span>  <span class="c1"># no schema name -&gt; &quot;user_schema_one&quot;</span>
        <span class="s2">&quot;special&quot;</span><span class="p">:</span> <span class="s2">&quot;special_schema&quot;</span><span class="p">,</span>  <span class="c1"># schema=&quot;special&quot; becomes &quot;special_schema&quot;</span>
        <span class="s2">&quot;public&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Table objects with schema=&quot;public&quot; will render with no schema</span>
    <span class="p">}</span>
<span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a> parameter
affects all DDL and SQL constructs generated from the SQL expression language,
as derived from the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or <a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> objects.
It does <strong>not</strong> impact literal string SQL used via the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>
construct nor via plain strings passed to <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>.</p>
<p>The feature takes effect <strong>only</strong> in those cases where the name of the
schema is derived directly from that of a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or <a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>;
it does not impact methods where a string schema name is passed directly.
By this pattern, it takes effect within the “can create” / “can drop” checks
performed by methods such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a> or
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.drop_all()</span></code></a> are called, and it takes effect when
using table reflection given a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object.  However it does
<strong>not</strong> affect the operations present on the <a class="reference internal" href="reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Inspector</span></code></a> object,
as the schema name is passed to these methods explicitly.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To use the schema translation feature with the ORM <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>,
set this option at the level of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, then pass that engine
to the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.  The <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> uses a new
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> for each transaction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">schema_engine</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">schema_translate_map</span><span class="o">=</span><span class="p">{</span><span class="o">...</span><span class="p">})</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">schema_engine</span><span class="p">)</span>

<span class="o">...</span></pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using the ORM <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> without extensions, the schema
translate feature is only supported as
<strong>a single schema translate map per Session</strong>.   It will <strong>not work</strong> if
different schema translate maps are given on a per-statement basis, as
the ORM <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> does not take current schema translate
values into account for individual objects.</p>
<p>To use a single <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> with multiple <code class="docutils literal notranslate"><span class="pre">schema_translate_map</span></code>
configurations, the <a class="reference internal" href="../orm/extensions/horizontal_shard.html"><span class="std std-ref">Horizontal Sharding</span></a> extension may
be used.  See the example at <a class="reference internal" href="../orm/examples.html#examples-sharding"><span class="std std-ref">Horizontal Sharding</span></a>.</p>
</div>
</div>
</section>
<section id="sql-compilation-caching">
<span id="sql-caching"></span><h2>SQL Compilation Caching<a class="headerlink" href="#sql-compilation-caching" title="Link to this heading">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span>SQLAlchemy now has a transparent query caching system
that substantially lowers the Python computational overhead involved in
converting SQL statement constructs into SQL strings across both
Core and ORM.   See the introduction at <a class="reference internal" href="../changelog/migration_14.html#change-4639"><span class="std std-ref">Transparent SQL Compilation Caching added to All DQL, DML Statements in Core, ORM</span></a>.</p>
</div>
<p>SQLAlchemy includes a comprehensive caching system for the SQL compiler as well
as its ORM variants.   This caching system is transparent within the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and provides that the SQL compilation process for a given Core
or ORM SQL statement, as well as related computations which assemble
result-fetching mechanics for that statement, will only occur once for that
statement object and all others with the identical
structure, for the duration that the particular structure remains within the
engine’s “compiled cache”. By “statement objects that have the identical
structure”, this generally corresponds to a SQL statement that is
constructed within a function and is built each time that function runs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run_my_statement</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span></pre></div>
</div>
<p>The above statement will generate SQL resembling
<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">id,</span> <span class="pre">col</span> <span class="pre">FROM</span> <span class="pre">table</span> <span class="pre">WHERE</span> <span class="pre">col</span> <span class="pre">=</span> <span class="pre">:col</span> <span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">id</span></code>, noting that
while the value of <code class="docutils literal notranslate"><span class="pre">parameter</span></code> is a plain Python object such as a string
or an integer, the string SQL form of the statement does not include this
value as it uses bound parameters.  Subsequent invocations of the above
<code class="docutils literal notranslate"><span class="pre">run_my_statement()</span></code> function will use a cached compilation construct
within the scope of the <code class="docutils literal notranslate"><span class="pre">connection.execute()</span></code> call for enhanced performance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it is important to note that the SQL compilation cache is caching
the <strong>SQL string that is passed to the database only</strong>, and <strong>not the data</strong>
returned by a query.   It is in no way a data cache and does not
impact the results returned for a particular SQL statement nor does it
imply any memory use linked to fetching of result rows.</p>
</div>
<p>While SQLAlchemy has had a rudimentary statement cache since the early 1.x
series, and additionally has featured the “Baked Query” extension for the ORM,
both of these systems required a high degree of special API use in order for
the cache to be effective.  The new cache as of 1.4 is instead completely
automatic and requires no change in programming style to be effective.</p>
<p>The cache is automatically used without any configurational changes and no
special steps are needed in order to enable it. The following sections
detail the configuration and advanced usage patterns for the cache.</p>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h3>
<p>The cache itself is a dictionary-like object called an <code class="docutils literal notranslate"><span class="pre">LRUCache</span></code>, which is
an internal SQLAlchemy dictionary subclass that tracks the usage of particular
keys and features a periodic “pruning” step which removes the least recently
used items when the size of the cache reaches a certain threshold.  The size
of this cache defaults to 500 and may be configured using the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost/test&quot;</span><span class="p">,</span> <span class="n">query_cache_size</span><span class="o">=</span><span class="mi">1200</span>
<span class="p">)</span></pre></div>
</div>
<p>The size of the cache can grow to be a factor of 150% of the size given, before
it’s pruned back down to the target size.  A cache of size 1200 above can therefore
grow to be 1800 elements in size at which point it will be pruned to 1200.</p>
<p>The sizing of the cache is based on a single entry per unique SQL statement rendered,
per engine.   SQL statements generated from both the Core and the ORM are
treated equally.  DDL statements will usually not be cached.  In order to determine
what the cache is doing, engine logging will include details about the
cache’s behavior, described in the next section.</p>
</section>
<section id="estimating-cache-performance-using-logging">
<span id="sql-caching-logging"></span><h3>Estimating Cache Performance Using Logging<a class="headerlink" href="#estimating-cache-performance-using-logging" title="Link to this heading">¶</a></h3>
<p>The above cache size of 1200 is actually fairly large.   For small applications,
a size of 100 is likely sufficient.  To estimate the optimal size of the cache,
assuming enough memory is present on the target host, the size of the cache
should be based on the number of unique SQL strings that may be rendered for the
target engine in use.    The most expedient way to see this is to use
SQL echoing, which is most directly enabled by using the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.echo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo</span></code></a> flag, or by using Python logging; see the
section <a class="reference internal" href="engines.html#dbengine-logging"><span class="std std-ref">Configuring Logging</span></a> for background on logging configuration.</p>
<p>As an example, we will examine the logging produced by the following program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">ForeignKey</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Integer</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Session</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

    <span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>
    <span class="n">bs</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
    <span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">a_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;a.id&quot;</span><span class="p">))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>


<span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">add_all</span><span class="p">([</span><span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()]),</span> <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()]),</span> <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()])])</span>
<span class="n">s</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="k">for</span> <span class="n">a_rec</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)):</span>
    <span class="n">print</span><span class="p">(</span><span class="n">a_rec</span><span class="o">.</span><span class="n">bs</span><span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>When run, each SQL statement that’s logged will include a bracketed
cache statistics badge to the left of the parameters passed.   The four
types of message we may see are summarized as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[raw</span> <span class="pre">sql]</span></code> - the driver or the end-user emitted raw SQL using
<a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a> - caching does not apply</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[no</span> <span class="pre">key]</span></code> - the statement object is a DDL statement that is not cached, or
the statement object contains uncacheable elements such as user-defined
constructs or arbitrarily large VALUES clauses.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[generated</span> <span class="pre">in</span> <span class="pre">Xs]</span></code> - the statement was a <strong>cache miss</strong> and had to be
compiled, then stored in the cache.  it took X seconds to produce the
compiled construct.  The number X will be in the small fractional seconds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[cached</span> <span class="pre">since</span> <span class="pre">Xs</span> <span class="pre">ago]</span></code> - the statement was a <strong>cache hit</strong> and did not
have to be recompiled.  The statement has been stored in the cache since
X seconds ago.  The number X will be proportional to how long the application
has been running and how long the statement has been cached, so for example
would be 86400 for a 24 hour period.</p></li>
</ul>
<p>Each badge is described in more detail below.</p>
<p>The first statements we see for the above program will be the SQLite dialect
checking for the existence of the “a” and “b” tables:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>INFO sqlalchemy.engine.Engine PRAGMA temp.table_info(&quot;a&quot;)
INFO sqlalchemy.engine.Engine [raw sql] ()
INFO sqlalchemy.engine.Engine PRAGMA main.table_info(&quot;b&quot;)
INFO sqlalchemy.engine.Engine [raw sql] ()</pre></div>
</div>
<p>For the above two SQLite PRAGMA statements, the badge reads <code class="docutils literal notranslate"><span class="pre">[raw</span> <span class="pre">sql]</span></code>,
which indicates the driver is sending a Python string directly to the
database using <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a>.  Caching does not apply
to such statements because they already exist in string form, and there
is nothing known about what kinds of result rows will be returned since
SQLAlchemy does not parse SQL strings ahead of time.</p>
<p>The next statements we see are the CREATE TABLE statements:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="k">data</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="p">[</span><span class="k">no</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">00007</span><span class="n">s</span><span class="p">]</span><span class="w"> </span><span class="p">()</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">a_id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">  </span><span class="k">data</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">),</span>
<span class="w">  </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">a_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="p">[</span><span class="k">no</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">00006</span><span class="n">s</span><span class="p">]</span><span class="w"> </span><span class="p">()</span></pre></div>
</div>
<p>For each of these statements, the badge reads <code class="docutils literal notranslate"><span class="pre">[no</span> <span class="pre">key</span> <span class="pre">0.00006s]</span></code>.  This
indicates that these two particular statements, caching did not occur because
the DDL-oriented <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> construct did not produce a
cache key.  DDL constructs generally do not participate in caching because
they are not typically subject to being repeated a second time and DDL
is also a database configurational step where performance is not as critical.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">[no</span> <span class="pre">key]</span></code> badge is important for one other reason, as it can be produced
for SQL statements that are cacheable except for some particular sub-construct
that is not currently cacheable.   Examples of this include custom user-defined
SQL elements that don’t define caching parameters, as well as some constructs
that generate arbitrarily long and non-reproducible SQL strings, the main
examples being the <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Values" title="sqlalchemy.sql.expression.Values"><code class="xref py py-class docutils literal notranslate"><span class="pre">Values</span></code></a> construct as well as when using “multivalued
inserts” with the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.values" title="sqlalchemy.sql.expression.Insert.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.values()</span></code></a> method.</p>
<p>So far our cache is still empty.  The next statements will be cached however,
a segment looks like:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="k">data</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="p">[</span><span class="k">generated</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">00011</span><span class="n">s</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="k">None</span><span class="p">,)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="k">data</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="p">[</span><span class="n">cached</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0003533</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="k">None</span><span class="p">,)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="k">data</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="p">[</span><span class="n">cached</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0005326</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="k">None</span><span class="p">,)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span><span class="w"> </span><span class="k">data</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="p">[</span><span class="k">generated</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">00010</span><span class="n">s</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k">None</span><span class="p">)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span><span class="w"> </span><span class="k">data</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="p">[</span><span class="n">cached</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0003232</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k">None</span><span class="p">)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span><span class="w"> </span><span class="k">data</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span>
<span class="n">INFO</span><span class="w"> </span><span class="n">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">Engine</span><span class="w"> </span><span class="p">[</span><span class="n">cached</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0004887</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k">None</span><span class="p">)</span></pre></div>
</div>
<p>Above, we see essentially two unique SQL strings; <code class="docutils literal notranslate"><span class="pre">&quot;INSERT</span> <span class="pre">INTO</span> <span class="pre">a</span> <span class="pre">(data)</span> <span class="pre">VALUES</span> <span class="pre">(?)&quot;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&quot;INSERT</span> <span class="pre">INTO</span> <span class="pre">b</span> <span class="pre">(a_id,</span> <span class="pre">data)</span> <span class="pre">VALUES</span> <span class="pre">(?,</span> <span class="pre">?)&quot;</span></code>.  Since SQLAlchemy uses
bound parameters for all literal values, even though these statements are
repeated many times for different objects, because the parameters are separate,
the actual SQL string stays the same.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the above two statements are generated by the ORM unit of work
process, and in fact will be caching these in a separate cache that is
local to each mapper.  However the mechanics and terminology are the same.
The section <a class="reference internal" href="#engine-compiled-cache"><span class="std std-ref">Disabling or using an alternate dictionary to cache some (or all) statements</span></a> below will describe how user-facing
code can also use an alternate caching container on a per-statement basis.</p>
</div>
<p>The caching badge we see for the first occurrence of each of these two
statements is <code class="docutils literal notranslate"><span class="pre">[generated</span> <span class="pre">in</span> <span class="pre">0.00011s]</span></code>. This indicates that the statement
was <strong>not in the cache, was compiled into a String in .00011s and was then
cached</strong>.   When we see the <code class="docutils literal notranslate"><span class="pre">[generated]</span></code> badge, we know that this means
there was a <strong>cache miss</strong>.  This is to be expected for the first occurrence of
a particular statement.  However, if lots of new <code class="docutils literal notranslate"><span class="pre">[generated]</span></code> badges are
observed for a long-running application that is generally using the same series
of SQL statements over and over, this may be a sign that the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> parameter is too small.  When a
statement that was cached is then evicted from the cache due to the LRU
cache pruning lesser used items, it will display the <code class="docutils literal notranslate"><span class="pre">[generated]</span></code> badge
when it is next used.</p>
<p>The caching badge that we then see for the subsequent occurrences of each of
these two statements looks like <code class="docutils literal notranslate"><span class="pre">[cached</span> <span class="pre">since</span> <span class="pre">0.0003533s</span> <span class="pre">ago]</span></code>.  This
indicates that the statement <strong>was found in the cache, and was originally
placed into the cache .0003533 seconds ago</strong>.   It is important to note that
while the <code class="docutils literal notranslate"><span class="pre">[generated]</span></code> and <code class="docutils literal notranslate"><span class="pre">[cached</span> <span class="pre">since]</span></code> badges refer to a number of
seconds, they mean different things; in the case of <code class="docutils literal notranslate"><span class="pre">[generated]</span></code>, the number
is a rough timing of how long it took to compile the statement, and will be an
extremely small amount of time.   In the case of <code class="docutils literal notranslate"><span class="pre">[cached</span> <span class="pre">since]</span></code>, this is
the total time that a statement has been present in the cache.  For an
application that’s been running for six hours, this number may read <code class="docutils literal notranslate"><span class="pre">[cached</span>
<span class="pre">since</span> <span class="pre">21600</span> <span class="pre">seconds</span> <span class="pre">ago]</span></code>, and that’s a good thing.    Seeing high numbers for
“cached since” is an indication that these statements have not been subject to
cache misses for a long time.  Statements that frequently have a low number of
“cached since” even if the application has been running a long time may
indicate these statements are too frequently subject to cache misses, and that
the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> may need to be increased.</p>
<p>Our example program then performs some SELECTs where we can see the same
pattern of “generated” then “cached”, for the SELECT of the “a” table as well
as for subsequent lazy loads of the “b” table:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>INFO sqlalchemy.engine.Engine SELECT a.id AS a_id, a.data AS a_data
FROM a
INFO sqlalchemy.engine.Engine [generated in 0.00009s] ()
INFO sqlalchemy.engine.Engine SELECT b.id AS b_id, b.a_id AS b_a_id, b.data AS b_data
FROM b
WHERE ? = b.a_id
INFO sqlalchemy.engine.Engine [generated in 0.00010s] (1,)
INFO sqlalchemy.engine.Engine SELECT b.id AS b_id, b.a_id AS b_a_id, b.data AS b_data
FROM b
WHERE ? = b.a_id
INFO sqlalchemy.engine.Engine [cached since 0.0005922s ago] (2,)
INFO sqlalchemy.engine.Engine SELECT b.id AS b_id, b.a_id AS b_a_id, b.data AS b_data
FROM b
WHERE ? = b.a_id</pre></div>
</div>
<p>From our above program, a full run shows a total of four distinct SQL strings
being cached.   Which indicates a cache size of <strong>four</strong> would be sufficient.   This is
obviously an extremely small size, and the default size of 500 is fine to be left
at its default.</p>
</section>
<section id="how-much-memory-does-the-cache-use">
<h3>How much memory does the cache use?<a class="headerlink" href="#how-much-memory-does-the-cache-use" title="Link to this heading">¶</a></h3>
<p>The previous section detailed some techniques to check if the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> needs to be bigger.   How do we know
if the cache is not too large?   The reason we may want to set
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> to not be higher than a certain
number would be because we have an application that may make use of a very large
number of different statements, such as an application that is building queries
on the fly from a search UX, and we don’t want our host to run out of memory
if for example, a hundred thousand different queries were run in the past 24 hours
and they were all cached.</p>
<p>It is extremely difficult to measure how much memory is occupied by Python
data structures, however using a process to measure growth in memory via <code class="docutils literal notranslate"><span class="pre">top</span></code> as a
successive series of 250 new statements are added to the cache suggest a
moderate Core statement takes up about 12K while a small ORM statement takes about
20K, including result-fetching structures which for the ORM will be much greater.</p>
</section>
<section id="disabling-or-using-an-alternate-dictionary-to-cache-some-or-all-statements">
<span id="engine-compiled-cache"></span><h3>Disabling or using an alternate dictionary to cache some (or all) statements<a class="headerlink" href="#disabling-or-using-an-alternate-dictionary-to-cache-some-or-all-statements" title="Link to this heading">¶</a></h3>
<p>The internal cache used is known as <code class="docutils literal notranslate"><span class="pre">LRUCache</span></code>, but this is mostly just
a dictionary.  Any dictionary may be used as a cache for any series of
statements by using the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.compiled_cache" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.compiled_cache</span></code></a>
option as an execution option.  Execution options may be set on a statement,
on an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, as well as
when using the ORM <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method for SQLAlchemy-2.0
style invocations.   For example, to run a series of SQL statements and have
them cached in a particular dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_cache</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">compiled_cache</span><span class="o">=</span><span class="n">my_cache</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span></pre></div>
</div>
<p>The SQLAlchemy ORM uses the above technique to hold onto per-mapper caches
within the unit of work “flush” process that are separate from the default
cache configured on the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, as well as for some
relationship loader queries.</p>
<p>The cache can also be disabled with this argument by sending a value of
<code class="docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># disable caching for this connection</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">compiled_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span></pre></div>
</div>
</section>
<section id="caching-for-third-party-dialects">
<span id="engine-thirdparty-caching"></span><h3>Caching for Third Party Dialects<a class="headerlink" href="#caching-for-third-party-dialects" title="Link to this heading">¶</a></h3>
<p>The caching feature requires that the dialect’s compiler produces SQL
strings that are safe to reuse for many statement invocations, given
a particular cache key that is keyed to that SQL string.  This means
that any literal values in a statement, such as the LIMIT/OFFSET values for
a SELECT, can not be hardcoded in the dialect’s compilation scheme, as
the compiled string will not be re-usable.   SQLAlchemy supports rendered
bound parameters using the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.BindParameter.render_literal_execute" title="sqlalchemy.sql.expression.BindParameter.render_literal_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BindParameter.render_literal_execute()</span></code></a>
method which can be applied to the existing <code class="docutils literal notranslate"><span class="pre">Select._limit_clause</span></code> and
<code class="docutils literal notranslate"><span class="pre">Select._offset_clause</span></code> attributes by a custom compiler, which
are illustrated later in this section.</p>
<p>As there are many third party dialects, many of which may be generating literal
values from SQL statements without the benefit of the newer “literal execute”
feature, SQLAlchemy as of version 1.4.5 has added an attribute to dialects
known as <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect.supports_statement_cache" title="sqlalchemy.engine.Dialect.supports_statement_cache"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dialect.supports_statement_cache</span></code></a>. This attribute is
checked at runtime for its presence directly on a particular dialect’s class,
even if it’s already present on a superclass, so that even a third party
dialect that subclasses an existing cacheable SQLAlchemy dialect such as
<code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.postgresql.PGDialect</span></code> must still explicitly include this
attribute for caching to be enabled. The attribute should <strong>only</strong> be enabled
once the dialect has been altered as needed and tested for reusability of
compiled SQL statements with differing parameters.</p>
<p>For all third party dialects that don’t support this attribute, the logging for
such a dialect will indicate <code class="docutils literal notranslate"><span class="pre">dialect</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">support</span> <span class="pre">caching</span></code>.</p>
<p>When a dialect has been tested against caching, and in particular the SQL
compiler has been updated to not render any literal LIMIT / OFFSET within
a SQL string directly, dialect authors can apply the attribute as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.engine.default</span> <span class="kn">import</span> <span class="n">DefaultDialect</span>


<span class="k">class</span> <span class="nc">MyDialect</span><span class="p">(</span><span class="n">DefaultDialect</span><span class="p">):</span>
    <span class="n">supports_statement_cache</span> <span class="o">=</span> <span class="kc">True</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The flag needs to be applied to all subclasses of the dialect as well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyDBAPIForMyDialect</span><span class="p">(</span><span class="n">MyDialect</span><span class="p">):</span>
    <span class="n">supports_statement_cache</span> <span class="o">=</span> <span class="kc">True</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.5: </span>Added the <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect.supports_statement_cache" title="sqlalchemy.engine.Dialect.supports_statement_cache"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dialect.supports_statement_cache</span></code></a> attribute.</p>
</div>
<p>The typical case for dialect modification follows.</p>
<section id="example-rendering-limit-offset-with-post-compile-parameters">
<h4>Example: Rendering LIMIT / OFFSET with post compile parameters<a class="headerlink" href="#example-rendering-limit-offset-with-post-compile-parameters" title="Link to this heading">¶</a></h4>
<p>As an example, suppose a dialect overrides the <code class="xref py py-meth docutils literal notranslate"><span class="pre">SQLCompiler.limit_clause()</span></code>
method, which produces the “LIMIT / OFFSET” clause for a SQL statement,
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># pre 1.4 style code</span>
<span class="k">def</span> <span class="nf">limit_clause</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">select</span><span class="o">.</span><span class="n">_limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="se">\n</span><span class="s2"> LIMIT </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">select</span><span class="o">.</span><span class="n">_limit</span><span class="p">,)</span>
    <span class="k">if</span> <span class="n">select</span><span class="o">.</span><span class="n">_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="se">\n</span><span class="s2"> OFFSET </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">select</span><span class="o">.</span><span class="n">_offset</span><span class="p">,)</span>
    <span class="k">return</span> <span class="n">text</span></pre></div>
</div>
<p>The above routine renders the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Select._limit</span></code> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Select._offset</span></code> integer values as literal integers embedded in the SQL
statement. This is a common requirement for databases that do not support using
a bound parameter within the LIMIT/OFFSET clauses of a SELECT statement.
However, rendering the integer value within the initial compilation stage is
directly <strong>incompatible</strong> with caching as the limit and offset integer values
of a <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> object are not part of the cache key, so that many
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> statements with different limit/offset values would not render
with the correct value.</p>
<p>The correction for the above code is to move the literal integer into
SQLAlchemy’s <a class="reference internal" href="../changelog/migration_14.html#change-4808"><span class="std std-ref">post-compile</span></a> facility, which will render the
literal integer outside of the initial compilation stage, but instead at
execution time before the statement is sent to the DBAPI.  This is accessed
within the compilation stage using the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.BindParameter.render_literal_execute" title="sqlalchemy.sql.expression.BindParameter.render_literal_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BindParameter.render_literal_execute()</span></code></a>
method, in conjunction with using the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Select._limit_clause</span></code> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Select._offset_clause</span></code> attributes, which represent the LIMIT/OFFSET
as a complete SQL expression, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1.4 cache-compatible code</span>
<span class="k">def</span> <span class="nf">limit_clause</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">limit_clause</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">_limit_clause</span>
    <span class="n">offset_clause</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">_offset_clause</span>

    <span class="k">if</span> <span class="n">select</span><span class="o">.</span><span class="n">_simple_int_clause</span><span class="p">(</span><span class="n">limit_clause</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="se">\n</span><span class="s2"> LIMIT </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">limit_clause</span><span class="o">.</span><span class="n">render_literal_execute</span><span class="p">(),</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">limit_clause</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># assuming the DB doesn&#39;t support SQL expressions for LIMIT.</span>
        <span class="c1"># Otherwise render here normally</span>
        <span class="k">raise</span> <span class="n">exc</span><span class="o">.</span><span class="n">CompileError</span><span class="p">(</span>
            <span class="s2">&quot;dialect &#39;mydialect&#39; can only render simple integers for LIMIT&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">select</span><span class="o">.</span><span class="n">_simple_int_clause</span><span class="p">(</span><span class="n">offset_clause</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="se">\n</span><span class="s2"> OFFSET </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">offset_clause</span><span class="o">.</span><span class="n">render_literal_execute</span><span class="p">(),</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">offset_clause</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># assuming the DB doesn&#39;t support SQL expressions for OFFSET.</span>
        <span class="c1"># Otherwise render here normally</span>
        <span class="k">raise</span> <span class="n">exc</span><span class="o">.</span><span class="n">CompileError</span><span class="p">(</span>
            <span class="s2">&quot;dialect &#39;mydialect&#39; can only render simple integers for OFFSET&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">text</span></pre></div>
</div>
<p>The approach above will generate a compiled SELECT statement that looks like:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">y</span>
<span class="k">LIMIT</span><span class="w"> </span><span class="n">__</span><span class="p">[</span><span class="n">POSTCOMPILE_param_1</span><span class="p">]</span>
<span class="k">OFFSET</span><span class="w"> </span><span class="n">__</span><span class="p">[</span><span class="n">POSTCOMPILE_param_2</span><span class="p">]</span></pre></div>
</div>
<p>Where above, the <code class="docutils literal notranslate"><span class="pre">__[POSTCOMPILE_param_1]</span></code> and <code class="docutils literal notranslate"><span class="pre">__[POSTCOMPILE_param_2]</span></code>
indicators will be populated with their corresponding integer values at
statement execution time, after the SQL string has been retrieved from the
cache.</p>
<p>After changes like the above have been made as appropriate, the
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect.supports_statement_cache" title="sqlalchemy.engine.Dialect.supports_statement_cache"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dialect.supports_statement_cache</span></code></a> flag should be set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
It is strongly recommended that third party dialects make use of the
<a class="reference external" href="https://github.com/sqlalchemy/sqlalchemy/blob/main/README.dialects.rst">dialect third party test suite</a>
which will assert that operations like
SELECTs with LIMIT/OFFSET are correctly rendered and cached.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../faq/performance.html#faq-new-caching"><span class="std std-ref">Why is my application slow after upgrading to 1.4 and/or 2.x?</span></a> - in the <a class="reference internal" href="../faq/index.html"><span class="std std-ref">Frequently Asked Questions</span></a> section</p>
</div>
</section>
</section>
<section id="using-lambdas-to-add-significant-speed-gains-to-statement-production">
<span id="engine-lambda-caching"></span><h3>Using Lambdas to add significant speed gains to statement production<a class="headerlink" href="#using-lambdas-to-add-significant-speed-gains-to-statement-production" title="Link to this heading">¶</a></h3>
<div class="admonition deepalchemy">
<p class="admonition-title">Deep Alchemy</p>
<p>This technique is generally non-essential except in very performance
intensive scenarios, and intended for experienced Python programmers.
While fairly straightforward, it involves metaprogramming concepts that are
not appropriate for novice Python developers.  The lambda approach can be
applied to at a later time to existing code with a minimal amount of effort.</p>
</div>
<p>Python functions, typically expressed as lambdas, may be used to generate
SQL expressions which are cacheable based on the Python code location of
the lambda function itself as well as the closure variables within the
lambda.   The rationale is to allow caching of not only the SQL string-compiled
form of a SQL expression construct as is SQLAlchemy’s normal behavior when
the lambda system isn’t used, but also the in-Python composition
of the SQL expression construct itself, which also has some degree of
Python overhead.</p>
<p>The lambda SQL expression feature is available as a performance enhancing
feature, and is also optionally used in the <a class="reference internal" href="../orm/queryguide/api.html#sqlalchemy.orm.with_loader_criteria" title="sqlalchemy.orm.with_loader_criteria"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_loader_criteria()</span></code></a>
ORM option in order to provide a generic SQL fragment.</p>
<section id="synopsis">
<h4>Synopsis<a class="headerlink" href="#synopsis" title="Link to this heading">¶</a></h4>
<p>Lambda statements are constructed using the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.lambda_stmt" title="sqlalchemy.sql.expression.lambda_stmt"><code class="xref py py-func docutils literal notranslate"><span class="pre">lambda_stmt()</span></code></a> function,
which returns an instance of <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.StatementLambdaElement" title="sqlalchemy.sql.expression.StatementLambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementLambdaElement</span></code></a>, which is
itself an executable statement construct.    Additional modifiers and criteria
are added to the object using the Python addition operator <code class="docutils literal notranslate"><span class="pre">+</span></code>, or
alternatively the <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.StatementLambdaElement.add_criteria" title="sqlalchemy.sql.expression.StatementLambdaElement.add_criteria"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StatementLambdaElement.add_criteria()</span></code></a> method which
allows for more options.</p>
<p>It is assumed that the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.lambda_stmt" title="sqlalchemy.sql.expression.lambda_stmt"><code class="xref py py-func docutils literal notranslate"><span class="pre">lambda_stmt()</span></code></a> construct is being invoked
within an enclosing function or method that expects to be used many times
within an application, so that subsequent executions beyond the first one
can take advantage of the compiled SQL being cached.  When the lambda is
constructed inside of an enclosing function in Python it is then subject
to also having closure variables, which are significant to the whole
approach:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">lambda_stmt</span>


<span class="k">def</span> <span class="nf">run_my_statement</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>


<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">run_my_statement</span><span class="p">(</span><span class="n">some_connection</span><span class="p">,</span> <span class="s2">&quot;some parameter&quot;</span><span class="p">)</span></pre></div>
</div>
<p>Above, the three <code class="docutils literal notranslate"><span class="pre">lambda</span></code> callables that are used to define the structure
of a SELECT statement are invoked exactly once, and the resulting SQL
string cached in the compilation cache of the engine.   From that point
forward, the <code class="docutils literal notranslate"><span class="pre">run_my_statement()</span></code> function may be invoked any number
of times and the <code class="docutils literal notranslate"><span class="pre">lambda</span></code> callables within it will not be called, only
used as cache keys to retrieve the already-compiled SQL.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important to note that there is already SQL caching in place
when the lambda system is not used.   The lambda system only adds an
additional layer of work reduction per SQL statement invoked by caching
the building up of the SQL construct itself and also using a simpler
cache key.</p>
</div>
</section>
<section id="quick-guidelines-for-lambdas">
<h4>Quick Guidelines for Lambdas<a class="headerlink" href="#quick-guidelines-for-lambdas" title="Link to this heading">¶</a></h4>
<p>Above all, the emphasis within the lambda SQL system is ensuring that there
is never a mismatch between the cache key generated for a lambda and the
SQL string it will produce.   The <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.LambdaElement" title="sqlalchemy.sql.expression.LambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">LambdaElement</span></code></a> and related
objects will run and analyze the given lambda in order to calculate how
it should be cached on each run, trying to detect any potential problems.
Basic guidelines include:</p>
<ul>
<li><p><strong>Any kind of statement is supported</strong> - while it’s expected that
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> constructs are the prime use case for <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.lambda_stmt" title="sqlalchemy.sql.expression.lambda_stmt"><code class="xref py py-func docutils literal notranslate"><span class="pre">lambda_stmt()</span></code></a>,
DML statements such as <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> and <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.update" title="sqlalchemy.sql.expression.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">update()</span></code></a> are
equally usable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">upd</span><span class="p">(</span><span class="n">id_</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">())</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">newname</span><span class="p">)</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">id_</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stmt</span>


<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">upd</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">))</span></pre></div>
</div>
</li>
<li><p><strong>ORM use cases directly supported as well</strong> - the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.lambda_stmt" title="sqlalchemy.sql.expression.lambda_stmt"><code class="xref py py-func docutils literal notranslate"><span class="pre">lambda_stmt()</span></code></a>
can accommodate ORM functionality completely and used directly with
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">))</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">)</span>

    <span class="n">row</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">row</span></pre></div>
</div>
</li>
<li><p><strong>Bound parameters are automatically accommodated</strong> - in contrast to SQLAlchemy’s
previous “baked query” system, the lambda SQL system accommodates for
Python literal values which become SQL bound parameters automatically.
This means that even though a given lambda runs only once, the values that
become bound parameters are extracted from the <strong>closure</strong> of the lambda
on every run:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="go">...     stmt = lambda_stmt(lambda: select(func.max(x, y)))</span>
<span class="go">...     return stmt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="go">...     print(conn.scalar(my_stmt(5, 10)))</span>
<span class="go">...     print(conn.scalar(my_stmt(12, 8)))</span>
<div class='show_sql'><span class="k">SELECT</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">max_1</span>
<span class="p">[</span><span class="k">generated</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">00057</span><span class="n">s</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
</div><span class="go">10</span>
<div class='show_sql'><span class="k">SELECT</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">max_1</span>
<span class="p">[</span><span class="n">cached</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">002059</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
</div><span class="go">12</span></pre></div>
</div>
<p>Above, <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.StatementLambdaElement" title="sqlalchemy.sql.expression.StatementLambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementLambdaElement</span></code></a> extracted the values of <code class="docutils literal notranslate"><span class="pre">x</span></code>
and <code class="docutils literal notranslate"><span class="pre">y</span></code> from the <strong>closure</strong> of the lambda that is generated each time
<code class="docutils literal notranslate"><span class="pre">my_stmt()</span></code> is invoked; these were substituted into the cached SQL
construct as the values of the parameters.</p>
</li>
<li><p><strong>The lambda should ideally produce an identical SQL structure in all cases</strong> -
Avoid using conditionals or custom callables inside of lambdas that might make
it produce different SQL based on inputs; if a function might conditionally
use two different SQL fragments, use two separate lambdas:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># **Don&#39;t** do this:</span>


<span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">thing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="p">(</span>
        <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">parameter</span><span class="p">)</span> <span class="k">if</span> <span class="n">thing</span> <span class="k">else</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">stmt</span>


<span class="c1"># **Do** do this:</span>


<span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">thing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">thing</span><span class="p">:</span>
        <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>There are a variety of failures which can occur if the lambda does not
produce a consistent SQL construct and some are not trivially detectable
right now.</p>
</li>
<li><p><strong>Don’t use functions inside the lambda to produce bound values</strong> - the
bound value tracking approach requires that the actual value to be used in
the SQL statement be locally present in the closure of the lambda.  This is
not possible if values are generated from other functions, and the
<a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.LambdaElement" title="sqlalchemy.sql.expression.LambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">LambdaElement</span></code></a> should normally raise an error if this is
attempted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">get_x</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">x</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">get_y</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">get_x</span><span class="p">(),</span> <span class="n">get_y</span><span class="p">())))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">my_stmt</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  # ...</span>
<span class="gr">sqlalchemy.exc.InvalidRequestError</span>: <span class="n">Can&#39;t invoke Python callable get_x()</span>
<span class="x">inside of lambda expression argument at</span>
<span class="x">&lt;code object &lt;lambda&gt; at 0x7fed15f350e0, file &quot;&lt;stdin&gt;&quot;, line 6&gt;;</span>
<span class="x">lambda SQL constructs should not invoke functions from closure variables</span>
<span class="x">to produce literal values since the lambda SQL system normally extracts</span>
<span class="x">bound values without actually invoking the lambda or any functions within it.</span></pre></div>
</div>
<p>Above, the use of <code class="docutils literal notranslate"><span class="pre">get_x()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_y()</span></code>, if they are necessary, should
occur <strong>outside</strong> of the lambda and assigned to a local closure variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">get_x</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">x</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">get_y</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span> <span class="o">=</span> <span class="n">get_x</span><span class="p">(),</span> <span class="n">get_y</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span><span class="p">)))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
</li>
<li><p><strong>Avoid referring to non-SQL constructs inside of lambdas as they are not
cacheable by default</strong> - this issue refers to how the <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.LambdaElement" title="sqlalchemy.sql.expression.LambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">LambdaElement</span></code></a>
creates a cache key from other closure variables within the statement.  In order
to provide the best guarantee of an accurate cache key, all objects located
in the closure of the lambda are considered to be significant, and none
will be assumed to be appropriate for a cache key by default.
So the following example will also raise a rather detailed error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">foo</span><span class="o">.</span><span class="n">y</span><span class="p">)))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">my_stmt</span><span class="p">(</span><span class="n">Foo</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  # ...</span>
<span class="gr">sqlalchemy.exc.InvalidRequestError</span>: <span class="n">Closure variable named &#39;foo&#39; inside of</span>
<span class="x">lambda callable &lt;code object &lt;lambda&gt; at 0x7fed15f35450, file</span>
<span class="x">&quot;&lt;stdin&gt;&quot;, line 2&gt; does not refer to a cacheable SQL element, and also</span>
<span class="x">does not appear to be serving as a SQL literal bound value based on the</span>
<span class="x">default SQL expression returned by the function.  This variable needs to</span>
<span class="x">remain outside the scope of a SQL-generating lambda so that a proper cache</span>
<span class="x">key may be generated from the lambda&#39;s state.  Evaluate this variable</span>
<span class="x">outside of the lambda, set track_on=[&lt;elements&gt;] to explicitly select</span>
<span class="x">closure elements to track, or set track_closure_variables=False to exclude</span>
<span class="x">closure variables from being part of the cache key.</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>The above error indicates that <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.LambdaElement" title="sqlalchemy.sql.expression.LambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">LambdaElement</span></code></a> will not assume
that the <code class="docutils literal notranslate"><span class="pre">Foo</span></code> object passed in will continue to behave the same in all
cases.    It also won’t assume it can use <code class="docutils literal notranslate"><span class="pre">Foo</span></code> as part of the cache key
by default; if it were to use the <code class="docutils literal notranslate"><span class="pre">Foo</span></code> object as part of the cache key,
if there were many different <code class="docutils literal notranslate"><span class="pre">Foo</span></code> objects this would fill up the cache
with duplicate information, and would also hold long-lasting references to
all of these objects.</p>
<p>The best way to resolve the above situation is to not refer to <code class="docutils literal notranslate"><span class="pre">foo</span></code>
inside of the lambda, and refer to it <strong>outside</strong> instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span> <span class="o">=</span> <span class="n">foo</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">foo</span><span class="o">.</span><span class="n">y</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span><span class="p">)))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>In some situations, if the SQL structure of the lambda is guaranteed to
never change based on input, to pass <code class="docutils literal notranslate"><span class="pre">track_closure_variables=False</span></code>
which will disable any tracking of closure variables other than those
used for bound parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span>
<span class="gp">... </span>        <span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">foo</span><span class="o">.</span><span class="n">y</span><span class="p">)),</span> <span class="n">track_closure_variables</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>There is also the option to add objects to the element to explicitly form
part of the cache key, using the <code class="docutils literal notranslate"><span class="pre">track_on</span></code> parameter; using this parameter
allows specific values to serve as the cache key and will also prevent other
closure variables from being considered.  This is useful for cases where part
of the SQL being constructed originates from a contextual object of some sort
that may have many different values.  In the example below, the first
segment of the SELECT statement will disable tracking of the <code class="docutils literal notranslate"><span class="pre">foo</span></code> variable,
whereas the second segment will explicitly track <code class="docutils literal notranslate"><span class="pre">self</span></code> as part of the
cache key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foo</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span>
<span class="gp">... </span>        <span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">column_expressions</span><span class="p">),</span> <span class="n">track_closure_variables</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">add_criteria</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">where_criteria</span><span class="p">,</span> <span class="n">track_on</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">track_on</span></code> means the given objects will be stored long term in the
lambda’s internal cache and will have strong references for as long as the
cache doesn’t clear out those objects (an LRU scheme of 1000 entries is used
by default).</p>
</li>
</ul>
</section>
<section id="cache-key-generation">
<h4>Cache Key Generation<a class="headerlink" href="#cache-key-generation" title="Link to this heading">¶</a></h4>
<p>In order to understand some of the options and behaviors which occur
with lambda SQL constructs, an understanding of the caching system
is helpful.</p>
<p>SQLAlchemy’s caching system normally generates a cache key from a given
SQL expression construct by producing a structure that represents all the
state within the construct:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">column</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_key</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">_generate_cache_key</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>  <span class="c1"># somewhat paraphrased</span>
<span class="go">CacheKey(key=(</span>
<span class="go">  &#39;0&#39;,</span>
<span class="go">  &lt;class &#39;sqlalchemy.sql.selectable.Select&#39;&gt;,</span>
<span class="go">  &#39;_raw_columns&#39;,</span>
<span class="go">  (</span>
<span class="go">    (</span>
<span class="go">      &#39;1&#39;,</span>
<span class="go">      &lt;class &#39;sqlalchemy.sql.elements.ColumnClause&#39;&gt;,</span>
<span class="go">      &#39;name&#39;,</span>
<span class="go">      &#39;q&#39;,</span>
<span class="go">      &#39;type&#39;,</span>
<span class="go">      (</span>
<span class="go">        &lt;class &#39;sqlalchemy.sql.sqltypes.NullType&#39;&gt;,</span>
<span class="go">      ),</span>
<span class="go">    ),</span>
<span class="go">  ),</span>
<span class="go">  # a few more elements are here, and many more for a more</span>
<span class="go">  # complicated SELECT statement</span>
<span class="go">),)</span></pre></div>
</div>
<p>The above key is stored in the cache which is essentially a dictionary, and the
value is a construct that among other things stores the string form of the SQL
statement, in this case the phrase “SELECT q”.  We can observe that even for an
extremely short query the cache key is pretty verbose as it has to represent
everything that may vary about what’s being rendered and potentially executed.</p>
<p>The lambda construction system by contrast creates a different kind of cache
key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">lambda_stmt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_key</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">_generate_cache_key</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
<span class="go">CacheKey(key=(</span>
<span class="go">  &lt;code object &lt;lambda&gt; at 0x7fed1617c710, file &quot;&lt;stdin&gt;&quot;, line 1&gt;,</span>
<span class="go">  &lt;class &#39;sqlalchemy.sql.lambdas.StatementLambdaElement&#39;&gt;,</span>
<span class="go">),)</span></pre></div>
</div>
<p>Above, we see a cache key that is vastly shorter than that of the non-lambda
statement, and additionally that production of the <code class="docutils literal notranslate"><span class="pre">select(column(&quot;q&quot;))</span></code>
construct itself was not even necessary; the Python lambda itself contains
an attribute called <code class="docutils literal notranslate"><span class="pre">__code__</span></code> which refers to a Python code object that
within the runtime of the application is immutable and permanent.</p>
<p>When the lambda also includes closure variables, in the normal case that these
variables refer to SQL constructs such as column objects, they become
part of the cache key, or if they refer to literal values that will be bound
parameters, they are placed in a separate element of the cache key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">parameter</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">col</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>The above <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.StatementLambdaElement" title="sqlalchemy.sql.expression.StatementLambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementLambdaElement</span></code></a> includes two lambdas, both
of which refer to the <code class="docutils literal notranslate"><span class="pre">col</span></code> closure variable, so the cache key will
represent both of these segments as well as the <code class="docutils literal notranslate"><span class="pre">column()</span></code> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">my_stmt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">_generate_cache_key</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="go">CacheKey(key=(</span>
<span class="go">  &lt;code object &lt;lambda&gt; at 0x7f07323c50e0, file &quot;&lt;stdin&gt;&quot;, line 3&gt;,</span>
<span class="go">  (</span>
<span class="go">    &#39;0&#39;,</span>
<span class="go">    &lt;class &#39;sqlalchemy.sql.elements.ColumnClause&#39;&gt;,</span>
<span class="go">    &#39;name&#39;,</span>
<span class="go">    &#39;q&#39;,</span>
<span class="go">    &#39;type&#39;,</span>
<span class="go">    (</span>
<span class="go">      &lt;class &#39;sqlalchemy.sql.sqltypes.NullType&#39;&gt;,</span>
<span class="go">    ),</span>
<span class="go">  ),</span>
<span class="go">  &lt;code object &lt;lambda&gt; at 0x7f07323c5190, file &quot;&lt;stdin&gt;&quot;, line 4&gt;,</span>
<span class="go">  &lt;class &#39;sqlalchemy.sql.lambdas.LinkedLambdaElement&#39;&gt;,</span>
<span class="go">  (</span>
<span class="go">    &#39;0&#39;,</span>
<span class="go">    &lt;class &#39;sqlalchemy.sql.elements.ColumnClause&#39;&gt;,</span>
<span class="go">    &#39;name&#39;,</span>
<span class="go">    &#39;q&#39;,</span>
<span class="go">    &#39;type&#39;,</span>
<span class="go">    (</span>
<span class="go">      &lt;class &#39;sqlalchemy.sql.sqltypes.NullType&#39;&gt;,</span>
<span class="go">    ),</span>
<span class="go">  ),</span>
<span class="go">  (</span>
<span class="go">    &#39;0&#39;,</span>
<span class="go">    &lt;class &#39;sqlalchemy.sql.elements.ColumnClause&#39;&gt;,</span>
<span class="go">    &#39;name&#39;,</span>
<span class="go">    &#39;q&#39;,</span>
<span class="go">    &#39;type&#39;,</span>
<span class="go">    (</span>
<span class="go">      &lt;class &#39;sqlalchemy.sql.sqltypes.NullType&#39;&gt;,</span>
<span class="go">    ),</span>
<span class="go">  ),</span>
<span class="go">),)</span></pre></div>
</div>
<p>The second part of the cache key has retrieved the bound parameters that will
be used when the statement is invoked:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span><span class="o">.</span><span class="n">bindparams</span>
<span class="go">[BindParameter(&#39;%(139668884281280 parameter)s&#39;, 5, type_=Integer())]</span></pre></div>
</div>
<p>For a series of examples of “lambda” caching with performance comparisons,
see the “short_selects” test suite within the <a class="reference internal" href="../orm/examples.html#examples-performance"><span class="std std-ref">Performance</span></a>
performance example.</p>
</section>
</section>
</section>
<section id="insert-many-values-behavior-for-insert-statements">
<span id="engine-insertmanyvalues"></span><h2>“Insert Many Values” Behavior for INSERT statements<a class="headerlink" href="#insert-many-values-behavior-for-insert-statements" title="Link to this heading">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0: </span>see <a class="reference internal" href="../changelog/whatsnew_20.html#change-6047"><span class="std std-ref">Optimized ORM bulk insert now implemented for all backends other than MySQL</span></a> for background on the change
including sample performance tests</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="../glossary.html#term-insertmanyvalues"><span class="xref std std-term">insertmanyvalues</span></a> feature is a <strong>transparently available</strong>
performance feature which requires no end-user intervention in order for
it to take place as needed.   This section describes the architecture
of the feature as well as how to measure its performance and tune its
behavior in order to optimize the speed of bulk INSERT statements,
particularly as used by the ORM.</p>
</div>
<p>As more databases have added support for INSERT..RETURNING, SQLAlchemy has
undergone a major change in how it approaches the subject of INSERT statements
where there’s a need to acquire server-generated values, most importantly
server-generated primary key values which allow the new row to be referenced in
subsequent operations. In particular, this scenario has long been a significant
performance issue in the ORM, which relies on being able to retrieve
server-generated primary key values in order to correctly populate the
<a class="reference internal" href="../glossary.html#term-identity-map"><span class="xref std std-term">identity map</span></a>.</p>
<p>With recent support for RETURNING added to SQLite and MariaDB, SQLAlchemy no
longer needs to rely upon the single-row-only
<a class="reference external" href="https://peps.python.org/pep-0249/#lastrowid">cursor.lastrowid</a> attribute
provided by the <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a> for most backends; RETURNING may now be used for
all <a class="reference internal" href="../dialects/index.html#included-dialects"><span class="std std-ref">SQLAlchemy-included</span></a> backends with the exception
of MySQL. The remaining performance
limitation, that the
<a class="reference external" href="https://peps.python.org/pep-0249/#executemany">cursor.executemany()</a> DBAPI
method does not allow for rows to be fetched, is resolved for most backends by
foregoing the use of <code class="docutils literal notranslate"><span class="pre">executemany()</span></code> and instead restructuring individual
INSERT statements to each accommodate a large number of rows in a single
statement that is invoked using <code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code>. This approach originates
from the
<a class="reference external" href="https://www.psycopg.org/docs/extras.html#fast-execution-helpers">psycopg2 fast execution helpers</a>
feature of the <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> DBAPI, which SQLAlchemy incrementally added more
and more support towards in recent release series.</p>
<section id="current-support">
<h3>Current Support<a class="headerlink" href="#current-support" title="Link to this heading">¶</a></h3>
<p>The feature is enabled for all backend included in SQLAlchemy that support
RETURNING, with the exception of Oracle for which both the cx_Oracle and
OracleDB drivers offer their own equivalent feature. The feature normally takes
place when making use of the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.returning" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.returning()</span></code></a> method of an
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct in conjunction with <a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a>
execution, which occurs when passing a list of dictionaries to the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute.params.parameters" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execute.parameters</span></code></a> parameter of the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> or <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> methods (as
well as equivalent methods under <a class="reference internal" href="../orm/extensions/asyncio.html"><span class="std std-ref">asyncio</span></a> and
shorthand methods like <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.scalars" title="sqlalchemy.orm.Session.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code></a>). It also takes place
within the ORM <a class="reference internal" href="../glossary.html#term-unit-of-work"><span class="xref std std-term">unit of work</span></a> process when using methods such as
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.add" title="sqlalchemy.orm.Session.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></a> and <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.add_all" title="sqlalchemy.orm.Session.add_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add_all()</span></code></a> to add rows.</p>
<p>For SQLAlchemy’s included dialects, support or equivalent support is currently
as follows:</p>
<ul class="simple">
<li><p>SQLite - supported for SQLite versions 3.35 and above</p></li>
<li><p>PostgreSQL - all supported Postgresql versions (9 and above)</p></li>
<li><p>SQL Server - all supported SQL Server versions <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></li>
<li><p>MariaDB - supported for MariaDB versions 10.5 and above</p></li>
<li><p>MySQL - no support, no RETURNING feature is present</p></li>
<li><p>Oracle - supports RETURNING with executemany using native cx_Oracle / OracleDB
APIs, for all supported Oracle versions 9 and above, using multi-row OUT
parameters. This is not the same implementation as “executemanyvalues”, however has
the same usage patterns and equivalent performance benefits.</p></li>
</ul>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0.10: </span></p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>”insertmanyvalues” support for Microsoft SQL Server
is restored, after being temporarily disabled in version 2.0.9.</p>
</aside>
</aside>
</div>
</section>
<section id="disabling-the-feature">
<h3>Disabling the feature<a class="headerlink" href="#disabling-the-feature" title="Link to this heading">¶</a></h3>
<p>To disable the “insertmanyvalues” feature for a given backend for an
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> overall, pass the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.use_insertmanyvalues" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.use_insertmanyvalues</span></code></a> parameter as <code class="docutils literal notranslate"><span class="pre">False</span></code> to
<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;mariadb+mariadbconnector://scott:tiger@host/db&quot;</span><span class="p">,</span> <span class="n">use_insertmanyvalues</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span></pre></div>
</div>
<p>The feature can also be disabled from being used implicitly for a particular
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object by passing the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.implicit_returning" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.implicit_returning</span></code></a> parameter as <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;t&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">implicit_returning</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
<p>The reason one might want to disable RETURNING for a specific table is to
work around backend-specific limitations.</p>
</section>
<section id="batched-mode-operation">
<h3>Batched Mode Operation<a class="headerlink" href="#batched-mode-operation" title="Link to this heading">¶</a></h3>
<p>The feature has two modes of operation, which are selected transparently on a
per-dialect, per-<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> basis. One is <strong>batched mode</strong>,
which reduces the number of database round trips by rewriting an
INSERT statement of the form:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="k">data</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">%</span><span class="p">(</span><span class="k">data</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">RETURNING</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">id</span></pre></div>
</div>
<p>into a “batched” form such as:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="k">data</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span>
<span class="w">    </span><span class="p">(</span><span class="o">%</span><span class="p">(</span><span class="n">data_0</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">x_0</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">y_0</span><span class="p">)</span><span class="n">s</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="o">%</span><span class="p">(</span><span class="n">data_1</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">x_1</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">y_1</span><span class="p">)</span><span class="n">s</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="o">%</span><span class="p">(</span><span class="n">data_2</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">x_2</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">y_2</span><span class="p">)</span><span class="n">s</span><span class="p">),</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="p">(</span><span class="o">%</span><span class="p">(</span><span class="n">data_78</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">x_78</span><span class="p">)</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="n">y_78</span><span class="p">)</span><span class="n">s</span><span class="p">)</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">id</span></pre></div>
</div>
<p>where above, the statement is organized against a subset (a “batch”) of the
input data, the size of which is determined by the database backend as well as
the number of parameters in each batch to correspond to known limits for
statement size / number of parameters.  The feature then executes the INSERT
statement once for each batch of input data until all records are consumed,
concatenating the RETURNING results for each batch into a single large
rowset that’s available from a single <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<p>This “batched” form allows INSERT of many rows using much fewer database round
trips, and has been shown to allow dramatic performance improvements for most
backends where it’s supported.</p>
</section>
<section id="correlating-returning-rows-to-parameter-sets">
<span id="engine-insertmanyvalues-returning-order"></span><h3>Correlating RETURNING rows to parameter sets<a class="headerlink" href="#correlating-returning-rows-to-parameter-sets" title="Link to this heading">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.10.</span></p>
</div>
<p>The “batch” mode query illustrated in the previous section does not guarantee
the order of records returned would correspond with that of the input data.
When used by the SQLAlchemy ORM <a class="reference internal" href="../glossary.html#term-unit-of-work"><span class="xref std std-term">unit of work</span></a> process, as well as for
applications which correlate returned server-generated values with input data,
the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.returning" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.returning()</span></code></a> and <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a>
methods include an option
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.returning.params.sort_by_parameter_order" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Insert.returning.sort_by_parameter_order</span></code></a> which indicates that
“insertmanyvalues” mode should guarantee this correspondence. This is <strong>not
related</strong> to the order in which records are actually INSERTed by the database
backend, which is <strong>not</strong> assumed under any circumstances; only that the
returned records should be organized when received back to correspond to the
order in which the original input data was passed.</p>
<p>When the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.returning.params.sort_by_parameter_order" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Insert.returning.sort_by_parameter_order</span></code></a> parameter is
present, for tables that use server-generated integer primary key values such
as <code class="docutils literal notranslate"><span class="pre">IDENTITY</span></code>, PostgreSQL <code class="docutils literal notranslate"><span class="pre">SERIAL</span></code>, MariaDB <code class="docutils literal notranslate"><span class="pre">AUTO_INCREMENT</span></code>, or SQLite’s
<code class="docutils literal notranslate"><span class="pre">ROWID</span></code> scheme, “batch” mode may instead opt to use a more complex
INSERT..RETURNING form, in conjunction with post-execution sorting of rows
based on the returned values, or if
such a form is not available, the “insertmanyvalues” feature may gracefully
degrade to “non-batched” mode which runs individual INSERT statements for each
parameter set.</p>
<p>For example, on SQL Server when an auto incrementing <code class="docutils literal notranslate"><span class="pre">IDENTITY</span></code> column is
used as the primary key, the following SQL form is used:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="k">data</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="k">OUTPUT</span><span class="w"> </span><span class="n">inserted</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">inserted</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id__1</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">p0</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="p">(</span><span class="k">VALUES</span>
<span class="w">    </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="mi">77</span><span class="p">)</span>
<span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">imp_sen</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">,</span><span class="w"> </span><span class="n">sen_counter</span><span class="p">)</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">sen_counter</span></pre></div>
</div>
<p>A similar form is used for PostgreSQL as well, when primary key columns use
SERIAL or IDENTITY. The above form <strong>does not</strong> guarantee the order in which
rows are inserted. However, it does guarantee that the IDENTITY or SERIAL
values will be created in order with each parameter set <a class="footnote-reference brackets" href="#id5" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>. The
“insertmanyvalues” feature then sorts the returned rows for the above INSERT
statement by incrementing integer identity.</p>
<p>For the SQLite database, there is no appropriate INSERT form that can
correlate the production of new ROWID values with the order in which
the parameter sets are passed.  As a result, when using server-generated
primary key values, the SQLite backend will degrade to “non-batched”
mode when ordered RETURNING is requested.
For MariaDB, the default INSERT form used by insertmanyvalues is sufficient,
as this database backend will line up the
order of AUTO_INCREMENT with the order of input data when using InnoDB <a class="footnote-reference brackets" href="#id6" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>.</p>
<p>For a client-side generated primary key, such as when using the Python
<code class="docutils literal notranslate"><span class="pre">uuid.uuid4()</span></code> function to generate new values for a <a class="reference internal" href="type_basics.html#sqlalchemy.types.Uuid" title="sqlalchemy.types.Uuid"><code class="xref py py-class docutils literal notranslate"><span class="pre">Uuid</span></code></a> column,
the “insertmanyvalues” feature transparently includes this column in the
RETURNING records and correlates its value to that of the given input records,
thus maintaining correspondence between input records and result rows. From
this, it follows that all backends allow for batched, parameter-correlated
RETURNING order when client-side-generated primary key values are used.</p>
<p>The subject of how “insertmanyvalues” “batch” mode determines a column or
columns to use as a point of correspondence between input parameters and
RETURNING rows is known as an <a class="reference internal" href="../glossary.html#term-insert-sentinel"><span class="xref std std-term">insert sentinel</span></a>, which is a specific
column or columns that are used to track such values. The “insert sentinel” is
normally selected automatically, however can also be user-configuration for
extremely special cases; the section
<a class="reference internal" href="#engine-insertmanyvalues-sentinel-columns"><span class="std std-ref">Configuring Sentinel Columns</span></a> describes this.</p>
<p>For backends that do not offer an appropriate INSERT form that can deliver
server-generated values deterministically aligned with input values, or
for <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> configurations that feature other kinds of
server generated primary key values, “insertmanyvalues” mode will make use
of <strong>non-batched</strong> mode when guaranteed RETURNING ordering is requested.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<blockquote>
<div><aside class="footnote-list brackets">
<aside class="footnote brackets" id="id5" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
</aside>
</aside>
<ul>
<li><p>Microsoft SQL Server rationale</p>
<p>“INSERT queries that use SELECT with ORDER BY to populate rows guarantees
how identity values are computed but not the order in which the rows are inserted.”
<a class="reference external" href="https://learn.microsoft.com/en-us/sql/t-sql/statements/insert-transact-sql?view=sql-server-ver16#limitations-and-restrictions">https://learn.microsoft.com/en-us/sql/t-sql/statements/insert-transact-sql?view=sql-server-ver16#limitations-and-restrictions</a></p>
</li>
<li><p>PostgreSQL batched INSERT Discussion</p>
<p>Original description in 2018 <a class="reference external" href="https://www.postgresql.org/message-id/29386.1528813619&#64;sss.pgh.pa.us">https://www.postgresql.org/message-id/29386.1528813619&#64;sss.pgh.pa.us</a></p>
<p>Follow up in 2023 - <a class="reference external" href="https://www.postgresql.org/message-id/be108555-da2a-4abc-a46b-acbe8b55bd25%40app.fastmail.com">https://www.postgresql.org/message-id/be108555-da2a-4abc-a46b-acbe8b55bd25%40app.fastmail.com</a></p>
</li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">3</a><span class="fn-bracket">]</span></span>
</aside>
</aside>
</div></blockquote>
<ul>
<li><p>MariaDB AUTO_INCREMENT behavior (using the same InnoDB engine as MySQL):</p>
<p><a class="reference external" href="https://dev.mysql.com/doc/refman/8.0/en/innodb-auto-increment-handling.html">https://dev.mysql.com/doc/refman/8.0/en/innodb-auto-increment-handling.html</a></p>
<p><a class="reference external" href="https://dba.stackexchange.com/a/72099">https://dba.stackexchange.com/a/72099</a></p>
</li>
</ul>
</div>
</section>
<section id="non-batched-mode-operation">
<span id="engine-insertmanyvalues-non-batch"></span><h3>Non-Batched Mode Operation<a class="headerlink" href="#non-batched-mode-operation" title="Link to this heading">¶</a></h3>
<p>For <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> configurations that do not have client side primary
key values, and offer server-generated primary key values (or no primary key)
that the database in question is not able to invoke in a deterministic or
sortable way relative to multiple parameter sets, the “insertmanyvalues”
feature when tasked with satisfying the
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.returning.params.sort_by_parameter_order" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Insert.returning.sort_by_parameter_order</span></code></a> requirement for an
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> statement may instead opt to use <strong>non-batched mode</strong>.</p>
<p>In this mode, the original SQL form of INSERT is maintained, and the
“insertmanyvalues” feature will instead run the statement as given for each
parameter set individually, organizing the returned rows into a full result
set. Unlike previous SQLAlchemy versions, it does so in a tight loop that
minimizes Python overhead. In some cases, such as on SQLite, “non-batched” mode
performs exactly as well as “batched” mode.</p>
</section>
<section id="statement-execution-model">
<h3>Statement Execution Model<a class="headerlink" href="#statement-execution-model" title="Link to this heading">¶</a></h3>
<p>For both “batched” and “non-batched” modes, the feature will necessarily
invoke <strong>multiple INSERT statements</strong> using the DBAPI <code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code> method,
within the scope of  <strong>single</strong> call to the Core-level
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method,
with each statement containing up to a fixed limit of parameter sets.
This limit is configurable as described below at <a class="reference internal" href="#engine-insertmanyvalues-page-size"><span class="std std-ref">Controlling the Batch Size</span></a>.
The separate calls to <code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code> are logged individually and
also individually passed along to event listeners such as
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a> (see <a class="reference internal" href="#engine-insertmanyvalues-events"><span class="std std-ref">Logging and Events</span></a>
below).</p>
<section id="configuring-sentinel-columns">
<span id="engine-insertmanyvalues-sentinel-columns"></span><h4>Configuring Sentinel Columns<a class="headerlink" href="#configuring-sentinel-columns" title="Link to this heading">¶</a></h4>
<p>In typical cases, the “insertmanyvalues” feature in order to provide
INSERT..RETURNING with deterministic row order will automatically determine a
sentinel column from a given table’s primary key, gracefully degrading to “row
at a time” mode if one cannot be identified. As a completely <strong>optional</strong>
feature, to get full “insertmanyvalues” bulk performance for tables that have
server generated primary keys whose default generator functions aren’t
compatible with the “sentinel” use case, other non-primary key columns may be
marked as “sentinel” columns assuming they meet certain requirements. A typical
example is a non-primary key <a class="reference internal" href="type_basics.html#sqlalchemy.types.Uuid" title="sqlalchemy.types.Uuid"><code class="xref py py-class docutils literal notranslate"><span class="pre">Uuid</span></code></a> column with a client side
default such as the Python <code class="docutils literal notranslate"><span class="pre">uuid.uuid4()</span></code> function.  There is also a construct to create
simple integer columns with a a client side integer counter oriented towards
the “insertmanyvalues” use case.</p>
<p>Sentinel columns may be indicated by adding <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.insert_sentinel" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.insert_sentinel</span></code></a>
to qualifying columns.   The most basic “qualifying” column is a not-nullable,
unique column with a client side default, such as a UUID column as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">uuid</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">FetchedValue</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Integer</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Uuid</span>

<span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;some_table&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="c1"># assume some arbitrary server-side function generates</span>
    <span class="c1"># primary key values, so cannot be tracked by a bulk insert</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">server_default</span><span class="o">=</span><span class="n">FetchedValue</span><span class="p">(),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span>
        <span class="s2">&quot;uniqueid&quot;</span><span class="p">,</span>
        <span class="n">Uuid</span><span class="p">(),</span>
        <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span>
        <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">insert_sentinel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>When using ORM Declarative models, the same forms are available using
the <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-class docutils literal notranslate"><span class="pre">mapped_column</span></code></a> construct:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">uuid</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">DeclarativeBase</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Mapped</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">mapped_column</span>


<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;my_table&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">FetchedValue</span><span class="p">())</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">uniqueid</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">insert_sentinel</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>While the values generated by the default generator <strong>must</strong> be unique, the
actual UNIQUE constraint on the above “sentinel” column, indicated by the
<code class="docutils literal notranslate"><span class="pre">unique=True</span></code> parameter, itself is optional and may be omitted if not
desired.</p>
<p>There is also a special form of “insert sentinel” that’s a dedicated nullable
integer column which makes use of a special default integer counter that’s only
used during “insertmanyvalues” operations; as an additional behavior, the
column will omit itself from SQL statements and result sets and behave in a
mostly transparent manner.  It does need to be physically present within
the actual database table, however.  This style of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
may be constructed using the function <a class="reference internal" href="metadata.html#sqlalchemy.schema.insert_sentinel" title="sqlalchemy.schema.insert_sentinel"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Integer</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Uuid</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">insert_sentinel</span>

<span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;some_table&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
    <span class="n">insert_sentinel</span><span class="p">(</span><span class="s2">&quot;sentinel&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>When using ORM Declarative, a Declarative-friendly version of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.insert_sentinel" title="sqlalchemy.schema.insert_sentinel"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a> is available called
<a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.orm_insert_sentinel" title="sqlalchemy.orm.orm_insert_sentinel"><code class="xref py py-func docutils literal notranslate"><span class="pre">orm_insert_sentinel()</span></code></a>, which has the ability to be used on the Base
class or a mixin; if packaged using <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-func docutils literal notranslate"><span class="pre">declared_attr()</span></code></a>, the column will
apply itself to all table-bound subclasses including within joined inheritance
hierarchies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declared_attr</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">DeclarativeBase</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Mapped</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">mapped_column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">orm_insert_sentinel</span>


<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">_sentinel</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">orm_insert_sentinel</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;my_table&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">FetchedValue</span><span class="p">())</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">MySubClass</span><span class="p">(</span><span class="n">MyClass</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;sub_table&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;my_table.id&quot;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MySingleInhClass</span><span class="p">(</span><span class="n">MyClass</span><span class="p">):</span>
    <span class="k">pass</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>In the example above, both “my_table” and “sub_table” will have an additional
integer column named “_sentinel” that can be used by the “insertmanyvalues”
feature to help optimize bulk inserts used by the ORM.</p>
</section>
</section>
<section id="controlling-the-batch-size">
<span id="engine-insertmanyvalues-page-size"></span><h3>Controlling the Batch Size<a class="headerlink" href="#controlling-the-batch-size" title="Link to this heading">¶</a></h3>
<p>A key characteristic of “insertmanyvalues” is that the size of the INSERT
statement is limited on a fixed max number of “values” clauses as well as a
dialect-specific fixed total number of bound parameters that may be represented
in one INSERT statement at a time. When the number of parameter dictionaries
given exceeds a fixed limit, or when the total number of bound parameters to be
rendered in a single INSERT statement exceeds a fixed limit (the two fixed
limits are separate), multiple INSERT statements will be invoked within the
scope of a single <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> call, each of which
accommodate for a portion of the parameter dictionaries, known as a
“batch”.  The number of parameter dictionaries represented within each
“batch” is then known as the “batch size”.  For example, a batch size of
500 means that each INSERT statement emitted will INSERT at most 500 rows.</p>
<p>It’s potentially important to be able to adjust the batch size,
as a larger batch size may be more performant for an INSERT where the value
sets themselves are relatively small, and a smaller batch size may be more
appropriate for an INSERT that uses very large value sets, where both the size
of the rendered SQL as well as the total data size being passed in one
statement may benefit from being limited to a certain size based on backend
behavior and memory constraints.  For this reason the batch size
can be configured on a per-<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> as well as a per-statement
basis.   The parameter limit on the other hand is fixed based on the known
characteristics of the database in use.</p>
<p>The batch size defaults to 1000 for most backends, with an additional
per-dialect “max number of parameters” limiting factor that may reduce the
batch size further on a per-statement basis. The max number of parameters
varies by dialect and server version; the largest size is 32700 (chosen as a
healthy distance away from PostgreSQL’s limit of 32767 and SQLite’s modern
limit of 32766, while leaving room for additional parameters in the statement
as well as for DBAPI quirkiness). Older versions of SQLite (prior to 3.32.0)
will set this value to 999. MariaDB has no established limit however 32700
remains as a limiting factor for SQL message size.</p>
<p>The value of the “batch size” can be affected <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
wide via the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.insertmanyvalues_page_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.insertmanyvalues_page_size</span></code></a> parameter.
Such as, to affect INSERT statements to include up to 100 parameter sets
in each statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">insertmanyvalues_page_size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span></pre></div>
</div>
<p>The batch size may also be affected on a per statement basis using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.insertmanyvalues_page_size" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.insertmanyvalues_page_size</span></code></a>
execution option, such as per execution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">e</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
        <span class="n">parameterlist</span><span class="p">,</span>
        <span class="n">execution_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;insertmanyvalues_page_size&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
    <span class="p">)</span></pre></div>
</div>
<p>Or configured on the statement itself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
    <span class="o">.</span><span class="n">returning</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">insertmanyvalues_page_size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">with</span> <span class="n">e</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">parameterlist</span><span class="p">)</span></pre></div>
</div>
</section>
<section id="logging-and-events">
<span id="engine-insertmanyvalues-events"></span><h3>Logging and Events<a class="headerlink" href="#logging-and-events" title="Link to this heading">¶</a></h3>
<p>The “insertmanyvalues” feature integrates fully with SQLAlchemy’s <a class="reference internal" href="engines.html#dbengine-logging"><span class="std std-ref">statement
logging</span></a> as well as cursor events such as <a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a>.
When the list of parameters is broken into separate batches, <strong>each INSERT
statement is logged and passed to event handlers individually</strong>.   This is a major change
compared to how the psycopg2-only feature worked in previous 1.x series of
SQLAlchemy, where the production of multiple INSERT statements was hidden from
logging and events.  Logging display will truncate the long lists of parameters for readability,
and will also indicate the specific batch of each statement. The example below illustrates
an excerpt of this logging:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>INSERT INTO a (data, x, y) VALUES (?, ?, ?), ... 795 characters truncated ...  (?, ?, ?), (?, ?, ?) RETURNING id
[generated in 0.00177s (insertmanyvalues) 1/10 (unordered)] (&#39;d0&#39;, 0, 0, &#39;d1&#39;,  ...
INSERT INTO a (data, x, y) VALUES (?, ?, ?), ... 795 characters truncated ...  (?, ?, ?), (?, ?, ?) RETURNING id
[insertmanyvalues 2/10 (unordered)] (&#39;d100&#39;, 100, 1000, &#39;d101&#39;, ...

...

INSERT INTO a (data, x, y) VALUES (?, ?, ?), ... 795 characters truncated ...  (?, ?, ?), (?, ?, ?) RETURNING id
[insertmanyvalues 10/10 (unordered)] (&#39;d900&#39;, 900, 9000, &#39;d901&#39;, ...</pre></div>
</div>
<p>When <a class="reference internal" href="#engine-insertmanyvalues-non-batch"><span class="std std-ref">non-batch mode</span></a> takes place, logging
will indicate this along with the insertmanyvalues message:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>...

INSERT INTO a (data, x, y) VALUES (?, ?, ?) RETURNING id
[insertmanyvalues 67/78 (ordered; batch not supported)] (&#39;d66&#39;, 66, 66)
INSERT INTO a (data, x, y) VALUES (?, ?, ?) RETURNING id
[insertmanyvalues 68/78 (ordered; batch not supported)] (&#39;d67&#39;, 67, 67)
INSERT INTO a (data, x, y) VALUES (?, ?, ?) RETURNING id
[insertmanyvalues 69/78 (ordered; batch not supported)] (&#39;d68&#39;, 68, 68)
INSERT INTO a (data, x, y) VALUES (?, ?, ?) RETURNING id
[insertmanyvalues 70/78 (ordered; batch not supported)] (&#39;d69&#39;, 69, 69)

...</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="engines.html#dbengine-logging"><span class="std std-ref">Configuring Logging</span></a></p>
</div>
</section>
<section id="upsert-support">
<h3>Upsert Support<a class="headerlink" href="#upsert-support" title="Link to this heading">¶</a></h3>
<p>The PostgreSQL, SQLite, and MariaDB dialects offer backend-specific
“upsert” constructs <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.insert" title="sqlalchemy.dialects.postgresql.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a>, <a class="reference internal" href="../dialects/sqlite.html#sqlalchemy.dialects.sqlite.insert" title="sqlalchemy.dialects.sqlite.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a>
and <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.insert" title="sqlalchemy.dialects.mysql.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a>, which are each <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> constructs that
have an additional method such as <code class="docutils literal notranslate"><span class="pre">on_conflict_do_update()`</span> <span class="pre">or</span>
<span class="pre">``on_duplicate_key()</span></code>.   These constructs also support “insertmanyvalues”
behaviors when they are used with RETURNING, allowing efficient upserts
with RETURNING to take place.</p>
</section>
</section>
<section id="engine-disposal">
<span id="id7"></span><h2>Engine Disposal<a class="headerlink" href="#engine-disposal" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> refers to a connection pool, which means under normal
circumstances, there are open database connections present while the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object is still resident in memory.   When an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
is garbage collected, its connection pool is no longer referred to by
that <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, and assuming none of its connections are still checked
out, the pool and its connections will also be garbage collected, which has the
effect of closing out the actual database connections as well.   But otherwise,
the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> will hold onto open database connections assuming
it uses the normally default pool implementation of <a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is intended to normally be a permanent
fixture established up-front and maintained throughout the lifespan of an
application.  It is <strong>not</strong> intended to be created and disposed on a
per-connection basis; it is instead a registry that maintains both a pool
of connections as well as configurational information about the database
and DBAPI in use, as well as some degree of internal caching of per-database
resources.</p>
<p>However, there are many cases where it is desirable that all connection resources
referred to by the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> be completely closed out.  It’s
generally not a good idea to rely on Python garbage collection for this
to occur for these cases; instead, the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> can be explicitly disposed using
the <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> method.   This disposes of the engine’s
underlying connection pool and replaces it with a new one that’s empty.
Provided that the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
is discarded at this point and no longer used, all <strong>checked-in</strong> connections
which it refers to will also be fully closed.</p>
<p>Valid use cases for calling <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> include:</p>
<ul class="simple">
<li><p>When a program wants to release any remaining checked-in connections
held by the connection pool and expects to no longer be connected
to that database at all for any future operations.</p></li>
<li><p>When a program uses multiprocessing or <code class="docutils literal notranslate"><span class="pre">fork()</span></code>, and an
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object is copied to the child process,
<a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> should be called so that the engine creates
brand new database connections local to that fork.   Database connections
generally do <strong>not</strong> travel across process boundaries.  Use the
<a class="reference internal" href="#sqlalchemy.engine.Engine.dispose.params.close" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Engine.dispose.close</span></code></a> parameter set to False in this case.
See the section <a class="reference internal" href="pooling.html#pooling-multiprocessing"><span class="std std-ref">Using Connection Pools with Multiprocessing or os.fork()</span></a> for more background on this
use case.</p></li>
<li><p>Within test suites or multitenancy scenarios where many
ad-hoc, short-lived <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects may be created and disposed.</p></li>
</ul>
<p>Connections that are <strong>checked out</strong> are <strong>not</strong> discarded when the
engine is disposed or garbage collected, as these connections are still
strongly referenced elsewhere by the application.
However, after <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> is called, those
connections are no longer associated with that <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>; when they
are closed, they will be returned to their now-orphaned connection pool
which will ultimately be garbage collected, once all connections which refer
to it are also no longer referenced anywhere.
Since this process is not easy to control, it is strongly recommended that
<a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> is called only after all checked out connections
are checked in or otherwise de-associated from their pool.</p>
<p>An alternative for applications that are negatively impacted by the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object’s use of connection pooling is to disable pooling
entirely.  This typically incurs only a modest performance impact upon the
use of new connections, and means that when a connection is checked in,
it is entirely closed out and is not held in memory.  See <a class="reference internal" href="pooling.html#pool-switching"><span class="std std-ref">Switching Pool Implementations</span></a>
for guidelines on how to disable pooling.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="pooling.html"><span class="std std-ref">Connection Pooling</span></a></p>
<p><a class="reference internal" href="pooling.html#pooling-multiprocessing"><span class="std std-ref">Using Connection Pools with Multiprocessing or os.fork()</span></a></p>
</div>
</section>
<section id="working-with-driver-sql-and-raw-dbapi-connections">
<span id="dbapi-connections"></span><h2>Working with Driver SQL and Raw DBAPI Connections<a class="headerlink" href="#working-with-driver-sql-and-raw-dbapi-connections" title="Link to this heading">¶</a></h2>
<p>The introduction on using <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> made use of the
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct in order to illustrate how textual SQL statements
may be invoked.  When working with SQLAlchemy, textual SQL is actually more
of the exception rather than the norm, as the Core expression language
and the ORM both abstract away the textual representation of SQL.  However, the
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct itself also provides some abstraction of textual
SQL in that it normalizes how bound parameters are passed, as well as that
it supports datatyping behavior for parameters and result set rows.</p>
<section id="invoking-sql-strings-directly-to-the-driver">
<h3>Invoking SQL strings directly to the driver<a class="headerlink" href="#invoking-sql-strings-directly-to-the-driver" title="Link to this heading">¶</a></h3>
<p>For the use case where one wants to invoke textual SQL directly passed to the
underlying driver (known as the <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a>) without any intervention
from the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct, the <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a>
method may be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span><span class="s2">&quot;SET param=&#39;bar&#39;&quot;</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span>Added the <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a> method.</p>
</div>
</section>
<section id="working-with-the-dbapi-cursor-directly">
<span id="dbapi-connections-cursor"></span><h3>Working with the DBAPI cursor directly<a class="headerlink" href="#working-with-the-dbapi-cursor-directly" title="Link to this heading">¶</a></h3>
<p>There are some cases where SQLAlchemy does not provide a genericized way
at accessing some <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a> functions, such as calling stored procedures as well
as dealing with multiple result sets.  In these cases, it’s just as expedient
to deal with the raw DBAPI connection directly.</p>
<p>The most common way to access the raw DBAPI connection is to get it
from an already present <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object directly.  It is
present using the <a class="reference internal" href="#sqlalchemy.engine.Connection.connection" title="sqlalchemy.engine.Connection.connection"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.connection</span></code></a> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">dbapi_conn</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">connection</span></pre></div>
</div>
<p>The DBAPI connection here is actually a “proxied” in terms of the
originating connection pool, however this is an implementation detail
that in most cases can be ignored.    As this DBAPI connection is still
contained within the scope of an owning <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object, it is
best to make use of the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object for most features such
as transaction control as well as calling the <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a>
method; if these operations are performed on the DBAPI connection directly,
the owning <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> will not be aware of these changes in state.</p>
<p>To overcome the limitations imposed by the DBAPI connection that is
maintained by an owning <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, a DBAPI connection is also
available without the need to procure a
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> first, using the <a class="reference internal" href="#sqlalchemy.engine.Engine.raw_connection" title="sqlalchemy.engine.Engine.raw_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.raw_connection()</span></code></a> method
of <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbapi_conn</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">raw_connection</span><span class="p">()</span></pre></div>
</div>
<p>This DBAPI connection is again a “proxied” form as was the case before.
The purpose of this proxying is now apparent, as when we call the <code class="docutils literal notranslate"><span class="pre">.close()</span></code>
method of this connection, the DBAPI connection is typically not actually
closed, but instead <a class="reference internal" href="../glossary.html#term-released"><span class="xref std std-term">released</span></a> back to the
engine’s connection pool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbapi_conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
<p>While SQLAlchemy may in the future add built-in patterns for more DBAPI
use cases, there are diminishing returns as these cases tend to be rarely
needed and they also vary highly dependent on the type of DBAPI in use,
so in any case the direct DBAPI calling pattern is always there for those
cases where it is needed.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../faq/connections.html#faq-dbapi-connection"><span class="std std-ref">How do I get at the raw DBAPI connection when using an Engine?</span></a> - includes additional details about how
the DBAPI connection is accessed as well as the “driver” connection
when using asyncio drivers.</p>
</div>
<p>Some recipes for DBAPI connection use follow.</p>
</section>
<section id="calling-stored-procedures-and-user-defined-functions">
<span id="stored-procedures"></span><h3>Calling Stored Procedures and User Defined Functions<a class="headerlink" href="#calling-stored-procedures-and-user-defined-functions" title="Link to this heading">¶</a></h3>
<p>SQLAlchemy supports calling stored procedures and user defined functions
several ways. Please note that all DBAPIs have different practices, so you must
consult your underlying DBAPI’s documentation for specifics in relation to your
particular usage. The following examples are hypothetical and may not work with
your underlying DBAPI.</p>
<p>For stored procedures or functions with special syntactical or parameter concerns,
DBAPI-level <a class="reference external" href="https://legacy.python.org/dev/peps/pep-0249/#callproc">callproc</a>
may potentially be used with your DBAPI. An example of this pattern is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">raw_connection</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">cursor_obj</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor_obj</span><span class="o">.</span><span class="n">callproc</span><span class="p">(</span><span class="s2">&quot;my_procedure&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">])</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span><span class="n">cursor_obj</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>
    <span class="n">cursor_obj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not all DBAPIs use <cite>callproc</cite> and overall usage details will vary. The above
example is only an illustration of how it might look to use a particular DBAPI
function.</p>
</div>
<p>Your DBAPI may not have a <code class="docutils literal notranslate"><span class="pre">callproc</span></code> requirement <em>or</em> may require a stored
procedure or user defined function to be invoked with another pattern, such as
normal SQLAlchemy connection usage. One example of this usage pattern is,
<em>at the time of this documentation’s writing</em>, executing a stored procedure in
the PostgreSQL database with the psycopg2 DBAPI, which should be invoked
with normal connection usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CALL my_procedure();&quot;</span><span class="p">)</span></pre></div>
</div>
<p>This above example is hypothetical. The underlying database is not guaranteed to
support “CALL” or “SELECT” in these situations, and the keyword may vary
dependent on the function being a stored procedure or a user defined function.
You should consult your underlying DBAPI and database documentation in these
situations to determine the correct syntax and patterns to use.</p>
</section>
<section id="multiple-result-sets">
<h3>Multiple Result Sets<a class="headerlink" href="#multiple-result-sets" title="Link to this heading">¶</a></h3>
<p>Multiple result set support is available from a raw DBAPI cursor using the
<a class="reference external" href="https://legacy.python.org/dev/peps/pep-0249/#nextset">nextset</a> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">raw_connection</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">cursor_obj</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor_obj</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;select * from table1; select * from table2&quot;</span><span class="p">)</span>
    <span class="n">results_one</span> <span class="o">=</span> <span class="n">cursor_obj</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">cursor_obj</span><span class="o">.</span><span class="n">nextset</span><span class="p">()</span>
    <span class="n">results_two</span> <span class="o">=</span> <span class="n">cursor_obj</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">cursor_obj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
</section>
</section>
<section id="registering-new-dialects">
<h2>Registering New Dialects<a class="headerlink" href="#registering-new-dialects" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> function call locates the given dialect
using setuptools entrypoints.   These entry points can be established
for third party dialects within the setup.py script.  For example,
to create a new dialect “foodialect://”, the steps are as follows:</p>
<ol class="arabic">
<li><p>Create a package called <code class="docutils literal notranslate"><span class="pre">foodialect</span></code>.</p></li>
<li><p>The package should have a module containing the dialect class,
which is typically a subclass of <a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect" title="sqlalchemy.engine.default.DefaultDialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.default.DefaultDialect</span></code></a>.
In this example let’s say it’s called <code class="docutils literal notranslate"><span class="pre">FooDialect</span></code> and its module is accessed
via <code class="docutils literal notranslate"><span class="pre">foodialect.dialect</span></code>.</p></li>
<li><p>The entry point can be established in <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> as follows:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[options.entry_points]</span>
<span class="na">sqlalchemy.dialects</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">foodialect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">foodialect.dialect:FooDialect</span></pre></div>
</div>
</li>
</ol>
<p>If the dialect is providing support for a particular DBAPI on top of
an existing SQLAlchemy-supported database, the name can be given
including a database-qualification.  For example, if <code class="docutils literal notranslate"><span class="pre">FooDialect</span></code>
were in fact a MySQL dialect, the entry point could be established like this:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[options.entry_points]</span>
<span class="na">sqlalchemy.dialects</span>
<span class="w">    </span><span class="na">mysql.foodialect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">foodialect.dialect:FooDialect</span></pre></div>
</div>
<p>The above entrypoint would then be accessed as <code class="docutils literal notranslate"><span class="pre">create_engine(&quot;mysql+foodialect://&quot;)</span></code>.</p>
<section id="registering-dialects-in-process">
<h3>Registering Dialects In-Process<a class="headerlink" href="#registering-dialects-in-process" title="Link to this heading">¶</a></h3>
<p>SQLAlchemy also allows a dialect to be registered within the current process, bypassing
the need for separate installation.   Use the <code class="docutils literal notranslate"><span class="pre">register()</span></code> function as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">registry</span>


<span class="n">registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s2">&quot;mysql.foodialect&quot;</span><span class="p">,</span> <span class="s2">&quot;myapp.dialect&quot;</span><span class="p">,</span> <span class="s2">&quot;MyMySQLDialect&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The above will respond to <code class="docutils literal notranslate"><span class="pre">create_engine(&quot;mysql+foodialect://&quot;)</span></code> and load the
<code class="docutils literal notranslate"><span class="pre">MyMySQLDialect</span></code> class from the <code class="docutils literal notranslate"><span class="pre">myapp.dialect</span></code> module.</p>
</section>
</section>
<section id="connection-engine-api">
<h2>Connection / Engine API<a class="headerlink" href="#connection-engine-api" title="Link to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.Connection"><span class="sig-name descname">Connection</span></a></p></td>
<td><p>Provides high-level functionality for a wrapped DB-API connection.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><span class="sig-name descname">CreateEnginePlugin</span></a></p></td>
<td><p>A set of hooks intended to augment the construction of an
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object based on entrypoint names in a URL.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.Engine"><span class="sig-name descname">Engine</span></a></p></td>
<td><p>Connects a <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> and
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> together to provide a
source of database connectivity and behavior.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><span class="sig-name descname">ExceptionContext</span></a></p></td>
<td><p>Encapsulate information about an error condition in progress.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction"><span class="sig-name descname">NestedTransaction</span></a></p></td>
<td><p>Represent a ‘nested’, or SAVEPOINT transaction.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.RootTransaction"><span class="sig-name descname">RootTransaction</span></a></p></td>
<td><p>Represent the “root” transaction on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.Transaction"><span class="sig-name descname">Transaction</span></a></p></td>
<td><p>Represent a database transaction in progress.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><span class="sig-name descname">TwoPhaseTransaction</span></a></p></td>
<td><p>Represent a two-phase transaction.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Provides high-level functionality for a wrapped DB-API connection.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object is procured by calling the
<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> method of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
object, and provides services for execution of SQL statements as well
as transaction control.</p>
<p>The Connection object is <strong>not</strong> thread-safe. While a Connection can be
shared among threads using properly synchronized access, it is still
possible that the underlying DBAPI connection may not support shared
access between threads. Check the DBAPI documentation for details.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested"><span class="sig-name descname">begin_nested()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase"><span class="sig-name descname">begin_twophase()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.connection"><span class="sig-name descname">connection</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.default_isolation_level"><span class="sig-name descname">default_isolation_level</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.detach"><span class="sig-name descname">detach()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql"><span class="sig-name descname">exec_driver_sql()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.execute"><span class="sig-name descname">execute()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options"><span class="sig-name descname">execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.get_execution_options"><span class="sig-name descname">get_execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level"><span class="sig-name descname">get_isolation_level()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.get_nested_transaction"><span class="sig-name descname">get_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.get_transaction"><span class="sig-name descname">get_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.in_nested_transaction"><span class="sig-name descname">in_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.in_transaction"><span class="sig-name descname">in_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate"><span class="sig-name descname">invalidate()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.invalidated"><span class="sig-name descname">invalidated</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Connection.schema_for_object"><span class="sig-name descname">schema_for_object()</span></a></p>
</div>
<p>The Connection object represents a single DBAPI connection checked out
from the connection pool. In this state, the connection pool has no
affect upon the connection, including its expiration or timeout state.
For the connection pool to properly manage connections, connections
should be returned to the connection pool (i.e. <code class="docutils literal notranslate"><span class="pre">connection.close()</span></code>)
whenever the connection is not in use.</p>
<div class="class-bases docutils container" id="index-0">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.interfaces.ConnectionEventsTarget</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.inspection.Inspectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pooling.html#sqlalchemy.pool.PoolProxiedConnection" title="sqlalchemy.pool.PoolProxiedConnection"><span class="pre">PoolProxiedConnection</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_has_events</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_allow_revalidate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_allow_autobegin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a new Connection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.base.RootTransaction"><span class="pre">RootTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.begin" title="Link to this definition">¶</a></dt>
<dd><p>Begin a transaction prior to autobegin occurring.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">trans</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;sandy&quot;</span><span class="p">})</span></pre></div>
</div>
<p>The returned object is an instance of <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>.
This object represents the “scope” of the transaction,
which completes when either the <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a>
or <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> method is called; the object
also works as a context manager as illustrated above.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method begins a
transaction that normally will be begun in any case when the connection
is first used to execute a statement.  The reason this method might be
used would be to invoke the <a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.begin" title="sqlalchemy.events.ConnectionEvents.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.begin()</span></code></a>
event at a specific time, or to organize code within the scope of a
connection checkout in terms of context managed blocks, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span></pre></div>
</div>
<p>The above code is not  fundamentally any different in its behavior than
the following code  which does not use
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>; the below style is known
as “commit as you go” style:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></pre></div>
</div>
<p>From a database point of view, the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>
method does not emit any SQL or change the state of the underlying
DBAPI connection in any way; the Python DBAPI does not have any
concept of explicit transaction begin.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../tutorial/dbapi_transactions.html#tutorial-working-with-transactions"><span class="std std-ref">Working with Transactions and the DBAPI</span></a> - in the
<a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy Unified Tutorial</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> - use a SAVEPOINT</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a> -
use a two phase /XID transaction</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> - context manager available from
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.base.NestedTransaction"><span class="pre">NestedTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.begin_nested" title="Link to this definition">¶</a></dt>
<dd><p>Begin a nested transaction (i.e. SAVEPOINT) and return a transaction
handle that controls the scope of the SAVEPOINT.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin_nested</span><span class="p">():</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;sandy&quot;</span><span class="p">})</span></pre></div>
</div>
<p>The returned object is an instance of
<a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, which includes transactional
methods <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.commit" title="sqlalchemy.engine.NestedTransaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NestedTransaction.commit()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.rollback" title="sqlalchemy.engine.NestedTransaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NestedTransaction.rollback()</span></code></a>; for a nested transaction,
these methods correspond to the operations “RELEASE SAVEPOINT &lt;name&gt;”
and “ROLLBACK TO SAVEPOINT &lt;name&gt;”. The name of the savepoint is local
to the <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a> object and is generated
automatically. Like any other <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>, the
<a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a> may be used as a context manager as
illustrated above which will “release” or “rollback” corresponding to
if the operation within the block were successful or raised an
exception.</p>
<p>Nested transactions require SAVEPOINT support in the underlying
database, else the behavior is undefined. SAVEPOINT is commonly used to
run operations within a transaction that may fail, while continuing the
outer transaction. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">exc</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">trans</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin_nested</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;sandy&quot;</span><span class="p">})</span>
        <span class="n">trans</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">exc</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>  <span class="c1"># catch for duplicate username</span>
        <span class="n">trans</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>  <span class="c1"># rollback to savepoint</span>

    <span class="c1"># outer transaction continues</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span></pre></div>
</div>
<p>If <a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> is called without first
calling <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> or
<a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a>, the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object
will “autobegin” the outer transaction first. This outer transaction
may be committed using “commit-as-you-go” style, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>  <span class="c1"># begin() wasn&#39;t called</span>

    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin_nested</span><span class="p">():</span> <span class="n">will</span> <span class="n">auto</span><span class="o">-</span><span class="s2">&quot;begin()&quot;</span> <span class="n">first</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span>
    <span class="c1"># savepoint is released</span>

    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span>

    <span class="c1"># explicitly commit outer transaction</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># can continue working with connection here</span></pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> will now participate
in the connection “autobegin” behavior that is new as of
2.0 / “future” style connections in 1.4.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a></p>
<p><a class="reference internal" href="../orm/session_transaction.html#session-begin-nested"><span class="std std-ref">Using SAVEPOINT</span></a> - ORM support for SAVEPOINT</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.begin_twophase">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">begin_twophase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.base.TwoPhaseTransaction"><span class="pre">TwoPhaseTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.begin_twophase" title="Link to this definition">¶</a></dt>
<dd><p>Begin a two-phase or XA transaction and return a transaction
handle.</p>
<p>The returned object is an instance of <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>,
which in addition to the methods provided by
<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>, also provides a
<a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TwoPhaseTransaction.prepare()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Connection.begin_twophase.params.xid"></span><strong>xid</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.begin_twophase.params.xid">¶</a> – the two phase transaction id.  If not supplied, a
random id will be generated.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.close" title="Link to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This results in a release of the underlying database
resources, that is, the DBAPI connection referenced
internally. The DBAPI connection is typically restored
back to the connection-holding <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> referenced
by the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> that produced this
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>. Any transactional state present on
the DBAPI connection is also unconditionally released via
the DBAPI connection’s <code class="docutils literal notranslate"><span class="pre">rollback()</span></code> method, regardless
of any <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object that may be
outstanding with regards to this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This has the effect of also calling <a class="reference internal" href="#sqlalchemy.engine.Connection.rollback" title="sqlalchemy.engine.Connection.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a>
if any transaction is in place.</p>
<p>After <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a> is called, the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is permanently in a closed state,
and will allow no further operations.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.closed" title="Link to this definition">¶</a></dt>
<dd><p>Return True if this connection is closed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.commit" title="Link to this definition">¶</a></dt>
<dd><p>Commit the transaction that is currently in progress.</p>
<p>This method commits the current transaction if one has been started.
If no transaction was started, the method has no effect, assuming
the connection is in a non-invalidated state.</p>
<p>A transaction is begun on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> automatically
whenever a statement is first executed, or when the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is called.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.commit" title="sqlalchemy.engine.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a> method only acts upon
the primary database transaction that is linked to the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object.  It does not operate upon a
SAVEPOINT that would have been invoked from the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> method; for control of a
SAVEPOINT, call <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.commit" title="sqlalchemy.engine.NestedTransaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NestedTransaction.commit()</span></code></a> on the
<a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a> that is returned by the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> method itself.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.connection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.connection" title="Link to this definition">¶</a></dt>
<dd><p>The underlying DB-API connection managed by this Connection.</p>
<p>This is a SQLAlchemy connection-pool proxied connection
which then has the attribute
<code class="xref py py-attr docutils literal notranslate"><span class="pre">_ConnectionFairy.dbapi_connection</span></code> that refers to the
actual driver connection.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dbapi-connections"><span class="std std-ref">Working with Driver SQL and Raw DBAPI Connections</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.default_isolation_level">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">default_isolation_level</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.default_isolation_level" title="Link to this definition">¶</a></dt>
<dd><p>The initial-connection time isolation level associated with the
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> in use.</p>
<p>This value is independent of the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options.params.isolation_level" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Engine.execution_options.isolation_level</span></code></a> execution
options, and is determined by the <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> when the
first connection is created, by performing a SQL query against the
database for the current isolation level before any additional commands
have been emitted.</p>
<p>Calling this accessor does not invoke any new SQL queries.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a>
- view current actual isolation level</p>
<p><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a>
- set per <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> isolation level</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
- set per <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> isolation level</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.detach">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">detach</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.detach" title="Link to this definition">¶</a></dt>
<dd><p>Detach the underlying DB-API connection from its connection pool.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SET search_path TO schema1, schema2&quot;</span><span class="p">))</span>

    <span class="c1"># work with connection</span>

<span class="c1"># connection is fully closed (since we used &quot;with:&quot;, can</span>
<span class="c1"># also call .close())</span></pre></div>
</div>
<p>This <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> instance will remain usable.
When closed
(or exited from a context manager context as above),
the DB-API connection will be literally closed and not
returned to its originating pool.</p>
<p>This method can be used to insulate the rest of an application
from a modified state on a connection (such as a transaction
isolation level or similar).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.exec_driver_sql">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">exec_driver_sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DBAPIAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><span class="pre">CursorResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="Link to this definition">¶</a></dt>
<dd><p>Executes a string SQL statement on the DBAPI cursor directly,
without any SQL compilation steps.</p>
<p>This can be used to pass any string directly to the
<code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code> method of the DBAPI in use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.Connection.exec_driver_sql.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql.params.statement">¶</a> – The statement str to be executed.   Bound parameters
must use the underlying DBAPI’s paramstyle, such as “qmark”,
“pyformat”, “format”, etc.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.exec_driver_sql.params.parameters"></span><strong>parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql.params.parameters">¶</a> – represent bound parameter values to be used in the
execution.  The format is one of:   a dictionary of named parameters,
a tuple of positional parameters, or a list containing either
dictionaries or tuples for multiple-execute support.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>a <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<p>E.g. multiple dictionaries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (</span><span class="si">%(id)s</span><span class="s2">, </span><span class="si">%(value)s</span><span class="s2">)&quot;</span><span class="p">,</span>
    <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;v1&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;v2&quot;</span><span class="p">}]</span>
<span class="p">)</span></pre></div>
</div>
<p>Single dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (</span><span class="si">%(id)s</span><span class="s2">, </span><span class="si">%(value)s</span><span class="s2">)&quot;</span><span class="p">,</span>
    <span class="n">dict</span><span class="p">(</span><span class="n">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>Single tuple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (?, ?)&quot;</span><span class="p">,</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;v1&#39;</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a> method does
not participate in the
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_execute" title="sqlalchemy.events.ConnectionEvents.before_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_execute()</span></code></a> and
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.after_execute" title="sqlalchemy.events.ConnectionEvents.after_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.after_execute()</span></code></a> events.   To
intercept calls to <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a>, use
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a> and
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.after_cursor_execute" title="sqlalchemy.events.ConnectionEvents.after_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.after_cursor_execute()</span></code></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="target" id="index-1"></span><a class="pep reference external" href="https://peps.python.org/pep-0249/"><strong>PEP 249</strong></a></p>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><span class="pre">CursorResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.execute" title="Link to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and returns a
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.Connection.execute.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execute.params.statement">¶</a> – <p>The statement to be executed.  This is always
an object that is in both the <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> and
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a> hierarchies, including:</p>
<ul>
<li><p><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a></p></li>
<li><p><a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a>, <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>,
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delete</span></code></a></p></li>
<li><p><a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.TextClause" title="sqlalchemy.sql.expression.TextClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextClause</span></code></a> and
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TextualSelect" title="sqlalchemy.sql.expression.TextualSelect"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextualSelect</span></code></a></p></li>
<li><p><a class="reference internal" href="ddl.html#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a> and objects which inherit from
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a></p></li>
</ul>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execute.params.parameters"></span><strong>parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execute.params.parameters">¶</a> – parameters which will be bound into the statement.
This may be either a dictionary of parameter names to values,
or a mutable sequence (e.g. a list) of dictionaries.  When a
list of dictionaries is passed, the underlying statement execution
will make use of the DBAPI <code class="docutils literal notranslate"><span class="pre">cursor.executemany()</span></code> method.
When a single dictionary is passed, the DBAPI <code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code>
method will be used.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execute.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execute.params.execution_options">¶</a> – optional dictionary of execution options,
which will be associated with the statement execution.  This
dictionary can provide a subset of the options that are accepted
by <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.base.Connection"><span class="pre">Connection</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.execution_options" title="Link to this definition">¶</a></dt>
<dd><p>Set non-SQL options for the connection which take effect
during execution.</p>
<p>This method modifies this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> <strong>in-place</strong>;
the return value is the same <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object
upon which the method is called.   Note that this is in contrast
to the behavior of the <code class="docutils literal notranslate"><span class="pre">execution_options</span></code> methods on other
objects such as <a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a> and
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a>.  The rationale is that many
such execution options necessarily modify the state of the base
DBAPI connection in any case so there is no feasible means of
keeping the effect of such an option localized to a “sub” connection.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>
method, in contrast to other objects with this method, modifies
the connection in-place without creating copy of it.</p>
</div>
<p>As discussed elsewhere, the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>
method accepts any arbitrary parameters including user defined names.
All parameters given are consumable in a number of ways including
by using the <a class="reference internal" href="#sqlalchemy.engine.Connection.get_execution_options" title="sqlalchemy.engine.Connection.get_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_execution_options()</span></code></a> method.
See the examples at <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a>
and <a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a>.</p>
<p>The keywords that are currently recognized by SQLAlchemy itself
include all those listed under <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a>,
as well as others that are specific to <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.compiled_cache"></span><strong>compiled_cache</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.compiled_cache">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p>A dictionary where <a class="reference internal" href="internals.html#sqlalchemy.engine.Compiled" title="sqlalchemy.engine.Compiled"><code class="xref py py-class docutils literal notranslate"><span class="pre">Compiled</span></code></a> objects
will be cached when the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
compiles a clause
expression into a <a class="reference internal" href="internals.html#sqlalchemy.engine.Compiled" title="sqlalchemy.engine.Compiled"><code class="xref py py-class docutils literal notranslate"><span class="pre">Compiled</span></code></a> object.  This dictionary will
supersede the statement cache that may be configured on the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> itself.   If set to None, caching
is disabled, even if the engine has a configured cache size.</p>
<p>Note that the ORM makes use of its own “compiled” caches for
some operations, including flush operations.  The caching
used by the ORM internally supersedes a cache dictionary
specified here.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.logging_token"></span><strong>logging_token</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.logging_token">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a>.</p>
<p>Adds the specified string token surrounded by brackets in log
messages logged by the connection, i.e. the logging that’s enabled
either via the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.echo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo</span></code></a> flag or via the
<code class="docutils literal notranslate"><span class="pre">logging.getLogger(&quot;sqlalchemy.engine&quot;)</span></code> logger. This allows a
per-connection or per-sub-engine token to be available which is
useful for debugging concurrent connection scenarios.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="engines.html#dbengine-logging-tokens"><span class="std std-ref">Setting Per-Connection / Sub-Engine Tokens</span></a> - usage example</p>
<p><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.logging_name" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.logging_name</span></code></a> - adds a name to the
name used by the Python logger object itself.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.isolation_level"></span><strong>isolation_level</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p>Set the transaction isolation level for the lifespan of this
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object.
Valid values include those string
values accepted by the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a>
parameter passed to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.  These levels are
semi-database specific; see individual dialect documentation for
valid levels.</p>
<p>The isolation level option applies the isolation level by emitting
statements on the DBAPI connection, and <strong>necessarily affects the
original Connection object overall</strong>. The isolation level will remain
at the given setting until explicitly changed, or when the DBAPI
connection itself is <a class="reference internal" href="../glossary.html#term-released"><span class="xref std std-term">released</span></a> to the connection pool, i.e. the
<a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a> method is called, at which time an
event handler will emit additional statements on the DBAPI connection
in order to revert the isolation level change.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">isolation_level</span></code> execution option may only be
established before the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is
called, as well as before any SQL statements are emitted which
would otherwise trigger “autobegin”, or directly after a call to
<a class="reference internal" href="#sqlalchemy.engine.Connection.commit" title="sqlalchemy.engine.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a> or
<a class="reference internal" href="#sqlalchemy.engine.Connection.rollback" title="sqlalchemy.engine.Connection.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a>. A database cannot change the
isolation level on a transaction in progress.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">isolation_level</span></code> execution option is implicitly
reset if the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is invalidated, e.g. via
the <a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a> method, or if a
disconnection error occurs. The new connection produced after the
invalidation will <strong>not</strong> have the selected isolation level
re-applied to it automatically.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dbapi-autocommit"><span class="std std-ref">Setting Transaction Isolation Levels including DBAPI Autocommit</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a>
- view current actual level</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.no_parameters"></span><strong>no_parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.no_parameters">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a>.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, if the final parameter
list or dictionary is totally empty, will invoke the
statement on the cursor as <code class="docutils literal notranslate"><span class="pre">cursor.execute(statement)</span></code>,
not passing the parameter collection at all.
Some DBAPIs such as psycopg2 and mysql-python consider
percent signs as significant only when parameters are
present; this option allows code to generate SQL
containing percent signs (and possibly other characters)
that is neutral regarding whether it’s executed by the DBAPI
or piped into a script that’s later invoked by
command line tools.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.stream_results"></span><strong>stream_results</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a>.</p>
<p>Indicate to the dialect that results should be
“streamed” and not pre-buffered, if possible.  For backends
such as PostgreSQL, MySQL and MariaDB, this indicates the use of
a “server side cursor” as opposed to a client side cursor.
Other backends such as that of Oracle may already use server
side cursors by default.</p>
<p>The usage of
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> is
usually combined with setting a fixed number of rows to to be fetched
in batches, to allow for efficient iteration of database rows while
at the same time not loading all result rows into memory at once;
this can be configured on a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object using the
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method, after execution has
returned a new <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.   If
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> is not used,
the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
mode of operation will instead use a dynamically sized buffer
which buffers sets of rows at a time, growing on each batch
based on a fixed growth size up until a limit which may
be configured using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.max_row_buffer" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.max_row_buffer</span></code></a>
parameter.</p>
<p>When using the ORM to fetch ORM mapped objects from a result,
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> should always be used with
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>,
so that the ORM does not fetch all rows into new ORM objects at once.</p>
<p>For typical use, the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a> execution
option should be preferred, which sets up both
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> at once. This option is supported
both at a core level by <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> as well as by the
ORM <code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code>; the latter is described at
<a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - background on
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.max_row_buffer" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.max_row_buffer</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a>
describing the ORM version of <code class="docutils literal notranslate"><span class="pre">yield_per</span></code></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.max_row_buffer"></span><strong>max_row_buffer</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.max_row_buffer">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a>.  Sets a maximum
buffer size to use when the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
execution option is used on a backend that supports server side
cursors.  The default value if not specified is 1000.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a></p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.yield_per"></span><strong>yield_per</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a>.  Integer value applied which will
set the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
execution option and invoke <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a>
automatically at once.  Allows equivalent functionality as
is present when using this parameter with the ORM.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - background and examples
on using server side cursors with Core.</p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a>
describing the ORM version of <code class="docutils literal notranslate"><span class="pre">yield_per</span></code></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.insertmanyvalues_page_size"></span><strong>insertmanyvalues_page_size</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.insertmanyvalues_page_size">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>. Number of rows to format into an
INSERT statement when the statement uses “insertmanyvalues” mode,
which is a paged form of bulk insert that is used for many backends
when using <a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a> execution typically in conjunction
with RETURNING. Defaults to 1000. May also be modified on a
per-engine basis using the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.insertmanyvalues_page_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.insertmanyvalues_page_size</span></code></a> parameter.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-insertmanyvalues"><span class="std std-ref">“Insert Many Values” Behavior for INSERT statements</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.schema_translate_map"></span><strong>schema_translate_map</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a>.</p>
<p>A dictionary mapping schema names to schema names, that will be
applied to the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a> element of each
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
encountered when SQL or DDL expression elements
are compiled into strings; the resulting schema name will be
converted based on presence in the map of the original name.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#schema-translating"><span class="std std-ref">Translation of Schema Names</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.preserve_rowcount"></span><strong>preserve_rowcount</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.preserve_rowcount">¶</a> – <p>Boolean; when True, the <code class="docutils literal notranslate"><span class="pre">cursor.rowcount</span></code>
attribute will be unconditionally memoized within the result and
made available via the <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> attribute.
Normally, this attribute is only preserved for UPDATE and DELETE
statements.  Using this option, the DBAPIs rowcount value can
be accessed for other kinds of statements such as INSERT and SELECT,
to the degree that the DBAPI supports these statements.  See
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> for notes regarding the behavior
of this attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.28.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
<p><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.get_execution_options" title="sqlalchemy.engine.Connection.get_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_execution_options()</span></code></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-execution-options"><span class="std std-ref">ORM Execution Options</span></a> - documentation on all
ORM-specific execution options</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.get_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">get_execution_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_ExecuteOptions</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.get_execution_options" title="Link to this definition">¶</a></dt>
<dd><p>Get the non-SQL options which will take effect during execution.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.get_isolation_level">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">get_isolation_level</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'SERIALIZABLE'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'REPEATABLE</span> <span class="pre">READ'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'READ</span> <span class="pre">COMMITTED'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'READ</span> <span class="pre">UNCOMMITTED'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'AUTOCOMMIT'</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.get_isolation_level" title="Link to this definition">¶</a></dt>
<dd><p>Return the current <strong>actual</strong> isolation level that’s present on
the database within the scope of this connection.</p>
<p>This attribute will perform a live SQL operation against the database
in order to procure the current isolation level, so the value returned
is the actual level on the underlying DBAPI connection regardless of
how this state was set. This will be one of the four actual isolation
modes <code class="docutils literal notranslate"><span class="pre">READ</span> <span class="pre">UNCOMMITTED</span></code>, <code class="docutils literal notranslate"><span class="pre">READ</span> <span class="pre">COMMITTED</span></code>, <code class="docutils literal notranslate"><span class="pre">REPEATABLE</span> <span class="pre">READ</span></code>,
<code class="docutils literal notranslate"><span class="pre">SERIALIZABLE</span></code>. It will <strong>not</strong> include the <code class="docutils literal notranslate"><span class="pre">AUTOCOMMIT</span></code> isolation
level setting. Third party dialects may also feature additional
isolation level settings.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method <strong>will not report</strong> on the <code class="docutils literal notranslate"><span class="pre">AUTOCOMMIT</span></code>
isolation level, which is a separate <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">dbapi</span></a> setting that’s
independent of <strong>actual</strong> isolation level.  When <code class="docutils literal notranslate"><span class="pre">AUTOCOMMIT</span></code> is
in use, the database connection still has a “traditional” isolation
mode in effect, that is typically one of the four values
<code class="docutils literal notranslate"><span class="pre">READ</span> <span class="pre">UNCOMMITTED</span></code>, <code class="docutils literal notranslate"><span class="pre">READ</span> <span class="pre">COMMITTED</span></code>, <code class="docutils literal notranslate"><span class="pre">REPEATABLE</span> <span class="pre">READ</span></code>,
<code class="docutils literal notranslate"><span class="pre">SERIALIZABLE</span></code>.</p>
</div>
<p>Compare to the <a class="reference internal" href="#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.default_isolation_level</span></code></a>
accessor which returns the isolation level that is present on the
database at initial connection time.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.default_isolation_level</span></code></a>
- view default level</p>
<p><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a>
- set per <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> isolation level</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
- set per <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> isolation level</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.get_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">get_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.base.NestedTransaction"><span class="pre">NestedTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.get_nested_transaction" title="Link to this definition">¶</a></dt>
<dd><p>Return the current nested transaction in progress, if any.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.get_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.base.RootTransaction"><span class="pre">RootTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.get_transaction" title="Link to this definition">¶</a></dt>
<dd><p>Return the current root transaction in progress, if any.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.in_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">in_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.in_nested_transaction" title="Link to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.in_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.in_transaction" title="Link to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.info" title="Link to this definition">¶</a></dt>
<dd><p>Info dictionary associated with the underlying DBAPI connection
referred to by this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, allowing user-defined
data to be associated with the connection.</p>
<p>The data here will follow along with the DBAPI connection including
after it is returned to the connection pool and used again
in subsequent instances of <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.invalidate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseException</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.invalidate" title="Link to this definition">¶</a></dt>
<dd><p>Invalidate the underlying DBAPI connection associated with
this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>An attempt will be made to close the underlying DBAPI connection
immediately; however if this operation fails, the error is logged
but not raised.  The connection is then discarded whether or not
close() succeeded.</p>
<p>Upon the next use (where “use” typically means using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method or similar),
this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> will attempt to
procure a new DBAPI connection using the services of the
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> as a source of connectivity (e.g.
a “reconnection”).</p>
<p>If a transaction was in progress (e.g. the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method has been called) when
<a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a> method is called, at the DBAPI
level all state associated with this transaction is lost, as
the DBAPI connection is closed.  The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
will not allow a reconnection to proceed until the
<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object is ended, by calling the
<a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a> method; until that point, any attempt at
continuing to use the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> will raise an
<a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a>.
This is to prevent applications from accidentally
continuing an ongoing transactional operations despite the
fact that the transaction has been lost due to an
invalidation.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a> method,
just like auto-invalidation,
will at the connection pool level invoke the
<a class="reference internal" href="events.html#sqlalchemy.events.PoolEvents.invalidate" title="sqlalchemy.events.PoolEvents.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PoolEvents.invalidate()</span></code></a> event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Connection.invalidate.params.exception"></span><strong>exception</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.invalidate.params.exception">¶</a> – an optional <code class="docutils literal notranslate"><span class="pre">Exception</span></code> instance that’s the
reason for the invalidation.  is passed along to event handlers
and logging functions.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="pooling.html#pool-connection-invalidation"><span class="std std-ref">More on Invalidation</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.invalidated">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">invalidated</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.invalidated" title="Link to this definition">¶</a></dt>
<dd><p>Return True if this connection was invalidated.</p>
<p>This does not indicate whether or not the connection was
invalidated at the pool level, however</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.rollback" title="Link to this definition">¶</a></dt>
<dd><p>Roll back the transaction that is currently in progress.</p>
<p>This method rolls back the current transaction if one has been started.
If no transaction was started, the method has no effect.  If a
transaction was started and the connection is in an invalidated state,
the transaction is cleared using this method.</p>
<p>A transaction is begun on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> automatically
whenever a statement is first executed, or when the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is called.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.rollback" title="sqlalchemy.engine.Connection.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a> method only acts
upon the primary database transaction that is linked to the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object.  It does not operate upon a
SAVEPOINT that would have been invoked from the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> method; for control of a
SAVEPOINT, call <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.rollback" title="sqlalchemy.engine.NestedTransaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NestedTransaction.rollback()</span></code></a> on the
<a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a> that is returned by the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> method itself.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreSingleExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.scalar" title="Link to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and returns a scalar object.</p>
<p>This method is shorthand for invoking the
<a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a> method after invoking the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method.  Parameters are equivalent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a scalar Python value representing the first column of the
first row returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><span class="pre">ScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.scalars" title="Link to this definition">¶</a></dt>
<dd><p>Executes and returns a scalar result set, which yields scalar values
from the first column of each row.</p>
<p>This method is equivalent to calling <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>
to receive a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object, then invoking the
<a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> method to produce a
<a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.24.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.schema_for_object">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">schema_for_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">HasSchemaAttr</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.schema_for_object" title="Link to this definition">¶</a></dt>
<dd><p>Return the schema name for the given schema item taking into
account current schema translate map.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">CreateEnginePlugin</span></span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin" title="Link to this definition">¶</a></dt>
<dd><p>A set of hooks intended to augment the construction of an
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object based on entrypoint names in a URL.</p>
<p>The purpose of <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> is to allow third-party
systems to apply engine, pool and dialect level event listeners without
the need for the target application to be modified; instead, the plugin
names can be added to the database URL.  Target applications for
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> include:</p>
<ul class="simple">
<li><p>connection and SQL performance tools, e.g. which use events to track
number of checkouts and/or time spent with statements</p></li>
<li><p>connectivity plugins such as proxies</p></li>
</ul>
<p>A rudimentary <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> that attaches a logger
to an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.engine</span> <span class="kn">import</span> <span class="n">CreateEnginePlugin</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">event</span>

<span class="k">class</span> <span class="nc">LogCursorEventsPlugin</span><span class="p">(</span><span class="n">CreateEnginePlugin</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># consume the parameter &quot;log_cursor_logging_name&quot; from the</span>
        <span class="c1"># URL query</span>
        <span class="n">logging_name</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_cursor_logging_name&quot;</span><span class="p">,</span> <span class="s2">&quot;log_cursor&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logging_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="s2">&quot;update the URL to one that no longer includes our parameters&quot;</span>
        <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="n">difference_update_query</span><span class="p">([</span><span class="s2">&quot;log_cursor_logging_name&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">engine_created</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine</span><span class="p">):</span>
        <span class="s2">&quot;attach an event listener after the new Engine is constructed&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;before_cursor_execute&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_event</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_log_event</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">conn</span><span class="p">,</span>
        <span class="n">cursor</span><span class="p">,</span>
        <span class="n">statement</span><span class="p">,</span>
        <span class="n">parameters</span><span class="p">,</span>
        <span class="n">context</span><span class="p">,</span>
        <span class="n">executemany</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Plugin logged cursor event: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">statement</span><span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>Plugins are registered using entry points in a similar way as that
of dialects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;sqlalchemy.plugins&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;log_cursor_plugin = myapp.plugins:LogCursorEventsPlugin&#39;</span>
    <span class="p">]</span></pre></div>
</div>
<p>A plugin that uses the above names would be invoked from a database
URL as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/test?&quot;</span>
    <span class="s2">&quot;plugin=log_cursor_plugin&amp;log_cursor_logging_name=mylogger&quot;</span>
<span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">plugin</span></code> URL parameter supports multiple instances, so that a URL
may specify multiple plugins; they are loaded in the order stated
in the URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
  <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/test?&quot;</span>
  <span class="s2">&quot;plugin=plugin_one&amp;plugin=plugin_twp&amp;plugin=plugin_three&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The plugin names may also be passed directly to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>
using the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.plugins" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.plugins</span></code></a> argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
  <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
  <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;myplugin&quot;</span><span class="p">])</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.3: </span>plugin names can also be specified
to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> as a list</p>
</div>
<p>A plugin may consume plugin-specific arguments from the
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object as well as the <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> dictionary, which is
the dictionary of arguments passed to the <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>
call.  “Consuming” these arguments includes that they must be removed
when the plugin initializes, so that the arguments are not passed along
to the <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> constructor, where they will raise an
<a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> because they are not known by the dialect.</p>
<p>As of version 1.4 of SQLAlchemy, arguments should continue to be consumed
from the <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> dictionary directly, by removing the values with a
method such as <code class="docutils literal notranslate"><span class="pre">dict.pop</span></code>. Arguments from the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object
should be consumed by implementing the
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a> method, returning a new copy
of the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> with plugin-specific parameters removed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">CreateEnginePlugin</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_one</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;my_argument_one&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_two</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;my_argument_two&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_three</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;my_argument_three&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="n">difference_update_query</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;my_argument_one&quot;</span><span class="p">,</span> <span class="s2">&quot;my_argument_two&quot;</span><span class="p">]</span>
        <span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>Arguments like those illustrated above would be consumed from a
<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> call such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
  <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/test?&quot;</span>
  <span class="s2">&quot;plugin=myplugin&amp;my_argument_one=foo&amp;my_argument_two=bar&quot;</span><span class="p">,</span>
  <span class="n">my_argument_three</span><span class="o">=</span><span class="s1">&#39;bat&#39;</span>
<span class="p">)</span></pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object is now immutable; a
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> that needs to alter the
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> should implement the newly added
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a> method, which
is invoked after the plugin is constructed.</p>
<p>For migration, construct the plugin in the following way, checking
for the existence of the <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a>
method to detect which version is running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">CreateEnginePlugin</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">hasattr</span><span class="p">(</span><span class="n">CreateEnginePlugin</span><span class="p">,</span> <span class="s2">&quot;update_url&quot;</span><span class="p">):</span>
            <span class="c1"># detect the 1.4 API</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_one</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;my_argument_one&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_two</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;my_argument_two&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># detect the 1.3 and earlier API - mutate the</span>
            <span class="c1"># URL directly</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_one</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;my_argument_one&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_two</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;my_argument_two&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_three</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;my_argument_three&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="c1"># this method is only called in the 1.4 version</span>
        <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="n">difference_update_query</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;my_argument_one&quot;</span><span class="p">,</span> <span class="s2">&quot;my_argument_two&quot;</span><span class="p">]</span>
        <span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../changelog/migration_14.html#change-5526"><span class="std std-ref">The URL object is now immutable</span></a> - overview of the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> change which
also includes notes regarding <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a>.</p>
</div>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created"><span class="sig-name descname">engine_created()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.handle_dialect_kwargs"><span class="sig-name descname">handle_dialect_kwargs()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.handle_pool_kwargs"><span class="sig-name descname">handle_pool_kwargs()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url"><span class="sig-name descname">update_url()</span></a></p>
</div>
<p>When the engine creation process completes and produces the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object, it is again passed to the plugin via the
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created" title="sqlalchemy.engine.CreateEnginePlugin.engine_created"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.engine_created()</span></code></a> hook.  In this hook, additional
changes can be made to the engine, most typically involving setup of
events (e.g. those defined in <a class="reference internal" href="events.html"><span class="std std-ref">Core Events</span></a>).</p>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><span class="pre">URL</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a>.</p>
<p>The plugin object is instantiated individually for each call
to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.  A single <code class="xref py py-class docutils literal notranslate">
<span class="pre">Engine</span></code> will be
passed to the <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created" title="sqlalchemy.engine.CreateEnginePlugin.engine_created"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.engine_created()</span></code></a> method
corresponding to this URL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.CreateEnginePlugin.params.url"></span><strong>url</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.params.url">¶</a> – <p>the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object.  The plugin may inspect
the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> for arguments.  Arguments used by the
plugin should be removed, by returning an updated <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>
from the <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a> method.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object is now immutable, so a
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> that needs to alter the
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object should implement the
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a> method.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.CreateEnginePlugin.params.kwargs"></span><strong>kwargs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.params.kwargs">¶</a> – The keyword arguments passed to
<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.engine_created">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">engine_created</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created" title="Link to this definition">¶</a></dt>
<dd><p>Receive the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
object when it is fully constructed.</p>
<p>The plugin may make additional changes to the engine, such as
registering engine or connection pool events.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.handle_dialect_kwargs">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">handle_dialect_kwargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><span class="pre">Dialect</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.handle_dialect_kwargs" title="Link to this definition">¶</a></dt>
<dd><p>parse and modify dialect kwargs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.handle_pool_kwargs">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">handle_pool_kwargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pool_cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.base.Pool"><span class="pre">Pool</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.handle_pool_kwargs" title="Link to this definition">¶</a></dt>
<dd><p>parse and modify pool kwargs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.update_url">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">update_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><span class="pre">URL</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><span class="pre">URL</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="Link to this definition">¶</a></dt>
<dd><p>Update the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>.</p>
<p>A new <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> should be returned.   This method is
typically used to consume configuration arguments from the
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> which must be removed, as they will not be
recognized by the dialect.  The
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL.difference_update_query" title="sqlalchemy.engine.URL.difference_update_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.difference_update_query()</span></code></a> method is available
to remove these arguments.   See the docstring at
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> for an example.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Engine</span></span><a class="headerlink" href="#sqlalchemy.engine.Engine" title="Link to this definition">¶</a></dt>
<dd><p>Connects a <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> and
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> together to provide a
source of database connectivity and behavior.</p>
<p>An <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object is instantiated publicly using the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> function.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="engines.html"><span class="doc">Engine Configuration</span></a></p>
<p><a class="reference internal" href="#"><span class="std std-ref">Working with Engines and Connections</span></a></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.clear_compiled_cache"><span class="sig-name descname">clear_compiled_cache()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.connect"><span class="sig-name descname">connect()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose"><span class="sig-name descname">dispose()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.driver"><span class="sig-name descname">driver</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.engine"><span class="sig-name descname">engine</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options"><span class="sig-name descname">execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.get_execution_options"><span class="sig-name descname">get_execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.name"><span class="sig-name descname">name</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.raw_connection"><span class="sig-name descname">raw_connection()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine.update_execution_options"><span class="sig-name descname">update_execution_options()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.interfaces.ConnectionEventsTarget</span></code>, <a class="reference internal" href="internals.html#sqlalchemy.log.Identified" title="sqlalchemy.log.Identified"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.log.Identified</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.inspection.Inspectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.base.Connection"><span class="pre">Connection</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.begin" title="Link to this definition">¶</a></dt>
<dd><p>Return a context manager delivering a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
with a <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> established.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into table (x, y, z) values (1, 2, 3)&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;my_special_procedure(5)&quot;</span><span class="p">))</span></pre></div>
</div>
<p>Upon successful operation, the <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
is committed.  If an error is raised, the <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
is rolled back.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> - procure a
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> from
an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> - start a <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
for a particular <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.clear_compiled_cache">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">clear_compiled_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.clear_compiled_cache" title="Link to this definition">¶</a></dt>
<dd><p>Clear the compiled cache associated with the dialect.</p>
<p>This applies <strong>only</strong> to the built-in cache that is established
via the <code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code> parameter.
It will not impact any dictionary caches that were passed via the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.compiled_cache" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.compiled_cache</span></code></a> parameter.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.connect">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.base.Connection"><span class="pre">Connection</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.connect" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> acts as a Python context manager, so
the typical use of this method looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into table values (&#39;foo&#39;)&quot;</span><span class="p">))</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></pre></div>
</div>
<p>Where above, after the block is completed, the connection is “closed”
and its underlying DBAPI resources are returned to the connection pool.
This also has the effect of rolling back any transaction that
was explicitly begun or was begun via autobegin, and will
emit the <a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.rollback" title="sqlalchemy.events.ConnectionEvents.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.rollback()</span></code></a> event if one was
started and is still in progress.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.dispose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">dispose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.dispose" title="Link to this definition">¶</a></dt>
<dd><p>Dispose of the connection pool used by this
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p>A new connection pool is created immediately after the old one has been
disposed. The previous connection pool is disposed either actively, by
closing out all currently checked-in connections in that pool, or
passively, by losing references to it but otherwise not closing any
connections. The latter strategy is more appropriate for an initializer
in a forked Python process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Engine.dispose.params.close"></span><strong>close</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Engine.dispose.params.close">¶</a> – <p>if left at its default of <code class="docutils literal notranslate"><span class="pre">True</span></code>, has the
effect of fully closing all <strong>currently checked in</strong>
database connections.  Connections that are still checked out
will <strong>not</strong> be closed, however they will no longer be associated
with this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
so when they are closed individually, eventually the
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> which they are associated with will
be garbage collected and they will be closed out fully, if
not already closed on checkin.</p>
<p>If set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the previous connection pool is de-referenced,
and otherwise not touched in any way.</p>
</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.33: </span>Added the <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose.params.close" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Engine.dispose.close</span></code></a>
parameter to allow the replacement of a connection pool in a child
process without interfering with the connections used by the parent
process.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-disposal"><span class="std std-ref">Engine Disposal</span></a></p>
<p><a class="reference internal" href="pooling.html#pooling-multiprocessing"><span class="std std-ref">Using Connection Pools with Multiprocessing or os.fork()</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.driver">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">driver</span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.driver" title="Link to this definition">¶</a></dt>
<dd><p>Driver name of the <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>
in use by this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.engine">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.engine" title="Link to this definition">¶</a></dt>
<dd><p>Returns this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p>Used for legacy schemes that accept <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> /
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects within the same variable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">OptionEngine</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.execution_options" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> that will provide
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects with the given execution options.</p>
<p>The returned <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> remains related to the original
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> in that it shares the same connection pool and
other state:</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> used by the new <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
is the
same instance.  The <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a>
method will replace
the connection pool instance for the parent engine as well
as this one.</p></li>
<li><p>Event listeners are “cascaded” - meaning, the new
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
inherits the events of the parent, and new events can be associated
with the new <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> individually.</p></li>
<li><p>The logging configuration and logging_name is copied from the parent
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p></li>
</ul>
<p>The intent of the <a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a> method is
to implement schemes where multiple <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
objects refer to the same connection pool, but are differentiated
by options that affect some execution-level behavior for each
engine.    One such example is breaking into separate “reader” and
“writer” <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> instances, where one
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
has a lower <a class="reference internal" href="../glossary.html#term-isolation-level"><span class="xref std std-term">isolation level</span></a> setting configured or is even
transaction-disabled using “autocommit”.  An example of this
configuration is at <a class="reference internal" href="#dbapi-autocommit-multiple"><span class="std std-ref">Maintaining Multiple Isolation Levels for a Single Engine</span></a>.</p>
<p>Another example is one that
uses a custom option <code class="docutils literal notranslate"><span class="pre">shard_id</span></code> which is consumed by an event
to change the current schema on a database connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">event</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.engine</span> <span class="kn">import</span> <span class="n">Engine</span>

<span class="n">primary_engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mysql+mysqldb://&quot;</span><span class="p">)</span>
<span class="n">shard1</span> <span class="o">=</span> <span class="n">primary_engine</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">shard_id</span><span class="o">=</span><span class="s2">&quot;shard1&quot;</span><span class="p">)</span>
<span class="n">shard2</span> <span class="o">=</span> <span class="n">primary_engine</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">shard_id</span><span class="o">=</span><span class="s2">&quot;shard2&quot;</span><span class="p">)</span>

<span class="n">shards</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span> <span class="s2">&quot;shard_1&quot;</span><span class="p">:</span> <span class="s2">&quot;db1&quot;</span><span class="p">,</span> <span class="s2">&quot;shard_2&quot;</span><span class="p">:</span> <span class="s2">&quot;db2&quot;</span><span class="p">}</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="s2">&quot;before_cursor_execute&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_switch_shard</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">stmt</span><span class="p">,</span>
        <span class="n">params</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">executemany</span><span class="p">):</span>
    <span class="n">shard_id</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get_execution_options</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;shard_id&#39;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>
    <span class="n">current_shard</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;current_shard&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">current_shard</span> <span class="o">!=</span> <span class="n">shard_id</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;use </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">shards</span><span class="p">[</span><span class="n">shard_id</span><span class="p">])</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;current_shard&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shard_id</span></pre></div>
</div>
<p>The above recipe illustrates two <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects that
will each serve as factories for <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects
that have pre-established “shard_id” execution options present. A
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a> event handler
then interprets this execution option to emit a MySQL <code class="docutils literal notranslate"><span class="pre">use</span></code> statement
to switch databases before a statement execution, while at the same
time keeping track of which database we’ve established using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.info" title="sqlalchemy.engine.Connection.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.info</span></code></a> dictionary.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>
- update execution options
on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.update_execution_options" title="sqlalchemy.engine.Engine.update_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.update_execution_options()</span></code></a>
- update the execution
options for a given <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> in place.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.get_execution_options" title="sqlalchemy.engine.Engine.get_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.get_execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.get_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">get_execution_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_ExecuteOptions</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.get_execution_options" title="Link to this definition">¶</a></dt>
<dd><p>Get the non-SQL options which will take effect during execution.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.name">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.name" title="Link to this definition">¶</a></dt>
<dd><p>String name of the <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>
in use by this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.raw_connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">raw_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="pooling.html#sqlalchemy.pool.PoolProxiedConnection" title="sqlalchemy.pool.PoolProxiedConnection"><span class="pre">PoolProxiedConnection</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.raw_connection" title="Link to this definition">¶</a></dt>
<dd><p>Return a “raw” DBAPI connection from the connection pool.</p>
<p>The returned object is a proxied version of the DBAPI
connection object used by the underlying driver in use.
The object will have all the same behavior as the real DBAPI
connection, except that its <code class="docutils literal notranslate"><span class="pre">close()</span></code> method will result in the
connection being returned to the pool, rather than being closed
for real.</p>
<p>This method provides direct DBAPI connection access for
special situations when the API provided by
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
is not needed.   When a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object is already
present, the DBAPI connection is available using
the <a class="reference internal" href="#sqlalchemy.engine.Connection.connection" title="sqlalchemy.engine.Connection.connection"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.connection</span></code></a> accessor.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dbapi-connections"><span class="std std-ref">Working with Driver SQL and Raw DBAPI Connections</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.update_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">update_execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.update_execution_options" title="Link to this definition">¶</a></dt>
<dd><p>Update the default execution_options dictionary
of this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p>The given keys/values in **opt are added to the
default execution options that will be used for
all connections.  The initial contents of this dictionary
can be sent via the <code class="docutils literal notranslate"><span class="pre">execution_options</span></code> parameter
to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">ExceptionContext</span></span><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext" title="Link to this definition">¶</a></dt>
<dd><p>Encapsulate information about an error condition in progress.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.chained_exception"><span class="sig-name descname">chained_exception</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.connection"><span class="sig-name descname">connection</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.cursor"><span class="sig-name descname">cursor</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.dialect"><span class="sig-name descname">dialect</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.engine"><span class="sig-name descname">engine</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.execution_context"><span class="sig-name descname">execution_context</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect"><span class="sig-name descname">invalidate_pool_on_disconnect</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.is_disconnect"><span class="sig-name descname">is_disconnect</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.is_pre_ping"><span class="sig-name descname">is_pre_ping</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.original_exception"><span class="sig-name descname">original_exception</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.parameters"><span class="sig-name descname">parameters</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.sqlalchemy_exception"><span class="sig-name descname">sqlalchemy_exception</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.statement"><span class="sig-name descname">statement</span></a></p>
</div>
<p>This object exists solely to be passed to the
<a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.handle_error" title="sqlalchemy.events.DialectEvents.handle_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.handle_error()</span></code></a> event,
supporting an interface that
can be extended without backwards-incompatibility.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.chained_exception">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">chained_exception</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">BaseException</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.chained_exception" title="Link to this definition">¶</a></dt>
<dd><p>The exception that was returned by the previous handler in the
exception chain, if any.</p>
<p>If present, this exception will be the one ultimately raised by
SQLAlchemy unless a subsequent handler replaces it.</p>
<p>May be None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.connection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><span class="pre">Connection</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.connection" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> in use during the exception.</p>
<p>This member is present, except in the case of a failure when
first connecting.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.engine" title="sqlalchemy.engine.ExceptionContext.engine"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExceptionContext.engine</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.cursor">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">cursor</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.DBAPICursor" title="sqlalchemy.engine.interfaces.DBAPICursor"><span class="pre">DBAPICursor</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.cursor" title="Link to this definition">¶</a></dt>
<dd><p>The DBAPI cursor object.</p>
<p>May be None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.dialect">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">dialect</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><span class="pre">Dialect</span></a></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.dialect" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> in use.</p>
<p>This member is present for all invocations of the event hook.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.engine">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">engine</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.engine" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> in use during the exception.</p>
<p>This member is present in all cases except for when handling an error
within the connection pool “pre-ping” process.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.execution_context">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">execution_context</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><span class="pre">ExecutionContext</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.execution_context" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> corresponding to the execution
operation in progress.</p>
<p>This is present for statement execution operations, but not for
operations such as transaction begin/end.  It also is not present when
the exception was raised before the <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>
could be constructed.</p>
<p>Note that the <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.statement" title="sqlalchemy.engine.ExceptionContext.statement"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExceptionContext.statement</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.parameters" title="sqlalchemy.engine.ExceptionContext.parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExceptionContext.parameters</span></code></a> members may represent a
different value than that of the <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>,
potentially in the case where a
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a> event or similar
modified the statement/parameters to be sent.</p>
<p>May be None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">invalidate_pool_on_disconnect</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Represent whether all connections in the pool should be invalidated
when a “disconnect” condition is in effect.</p>
<p>Setting this flag to False within the scope of the
<a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.handle_error" title="sqlalchemy.events.DialectEvents.handle_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.handle_error()</span></code></a>
event will have the effect such
that the full collection of connections in the pool will not be
invalidated during a disconnect; only the current connection that is the
subject of the error will actually be invalidated.</p>
<p>The purpose of this flag is for custom disconnect-handling schemes where
the invalidation of other connections in the pool is to be performed
based on other conditions, or even on a per-connection basis.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.is_disconnect">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">is_disconnect</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.is_disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Represent whether the exception as occurred represents a “disconnect”
condition.</p>
<p>This flag will always be True or False within the scope of the
<a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.handle_error" title="sqlalchemy.events.DialectEvents.handle_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.handle_error()</span></code></a> handler.</p>
<p>SQLAlchemy will defer to this flag in order to determine whether or not
the connection should be invalidated subsequently.    That is, by
assigning to this flag, a “disconnect” event which then results in
a connection and pool invalidation can be invoked or prevented by
changing this flag.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The pool “pre_ping” handler enabled using the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.pool_pre_ping" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.pool_pre_ping</span></code></a> parameter does <strong>not</strong>
consult this event before deciding if the “ping” returned false,
as opposed to receiving an unhandled error.   For this use case, the
<a class="reference internal" href="pooling.html#pool-disconnects-pessimistic-custom"><span class="std std-ref">legacy recipe based on engine_connect() may be used</span></a>.  A future API allow more
comprehensive customization of the “disconnect” detection mechanism
across all functions.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.is_pre_ping">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">is_pre_ping</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.is_pre_ping" title="Link to this definition">¶</a></dt>
<dd><p>Indicates if this error is occurring within the “pre-ping” step
performed when <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.pool_pre_ping" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.pool_pre_ping</span></code></a> is set to
<code class="docutils literal notranslate"><span class="pre">True</span></code>.  In this mode, the <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.engine" title="sqlalchemy.engine.ExceptionContext.engine"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExceptionContext.engine</span></code></a> attribute
will be <code class="docutils literal notranslate"><span class="pre">None</span></code>.  The dialect in use is accessible via the
<a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.dialect" title="sqlalchemy.engine.ExceptionContext.dialect"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExceptionContext.dialect</span></code></a> attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.5.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.original_exception">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">original_exception</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">BaseException</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.original_exception" title="Link to this definition">¶</a></dt>
<dd><p>The exception object which was caught.</p>
<p>This member is always present.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.parameters">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">parameters</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">_DBAPIAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.parameters" title="Link to this definition">¶</a></dt>
<dd><p>Parameter collection that was emitted directly to the DBAPI.</p>
<p>May be None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.sqlalchemy_exception">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">sqlalchemy_exception</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><span class="pre">StatementError</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.sqlalchemy_exception" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.exc.StatementError</span></code></a> which wraps the original,
and will be raised if exception handling is not circumvented by the event.</p>
<p>May be None, as not all exception types are wrapped by SQLAlchemy.
For DBAPI-level exceptions that subclass the dbapi’s Error class, this
field will always be present.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.statement">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">statement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.statement" title="Link to this definition">¶</a></dt>
<dd><p>String SQL statement that was emitted directly to the DBAPI.</p>
<p>May be None.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.NestedTransaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">NestedTransaction</span></span><a class="headerlink" href="#sqlalchemy.engine.NestedTransaction" title="Link to this definition">¶</a></dt>
<dd><p>Represent a ‘nested’, or SAVEPOINT transaction.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a> object is created by calling the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> method of
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>When using <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, the semantics of “begin” /
“commit” / “rollback” are as follows:</p>
<ul class="simple">
<li><p>the “begin” operation corresponds to the “BEGIN SAVEPOINT” command, where
the savepoint is given an explicit name that is part of the state
of this object.</p></li>
<li><p>The <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.commit" title="sqlalchemy.engine.NestedTransaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NestedTransaction.commit()</span></code></a> method corresponds to a
“RELEASE SAVEPOINT” operation, using the savepoint identifier associated
with this <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>.</p></li>
<li><p>The <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.rollback" title="sqlalchemy.engine.NestedTransaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NestedTransaction.rollback()</span></code></a> method corresponds to a
“ROLLBACK TO SAVEPOINT” operation, using the savepoint identifier
associated with this <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>.</p></li>
</ul>
<p>The rationale for mimicking the semantics of an outer transaction in
terms of savepoints so that code may deal with a “savepoint” transaction
and an “outer” transaction in an agnostic way.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_transaction.html#session-begin-nested"><span class="std std-ref">Using SAVEPOINT</span></a> - ORM version of the SAVEPOINT API.</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.rollback"><span class="sig-name descname">rollback()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.NestedTransaction</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.NestedTransaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.NestedTransaction.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.NestedTransaction.close" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.close" title="sqlalchemy.engine.Transaction.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.close()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Close this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.NestedTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.NestedTransaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.NestedTransaction.commit" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Commit this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a COMMIT.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“RELEASE SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.NestedTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.NestedTransaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.NestedTransaction.rollback" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Roll back this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a ROLLBACK.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“ROLLBACK TO SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.RootTransaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">RootTransaction</span></span><a class="headerlink" href="#sqlalchemy.engine.RootTransaction" title="Link to this definition">¶</a></dt>
<dd><p>Represent the “root” transaction on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This corresponds to the current “BEGIN/COMMIT/ROLLBACK” that’s occurring
for the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>. The <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>
is created by calling upon the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method, and
remains associated with the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> throughout its
active span. The current <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a> in use is
accessible via the <a class="reference internal" href="#sqlalchemy.engine.Connection.get_transaction" title="sqlalchemy.engine.Connection.get_transaction"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.get_transaction</span></code></a> method of
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>In <a class="reference internal" href="../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a> use, the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> also employs
“autobegin” behavior that will create a new
<a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a> whenever a connection in a
non-transactional state is used to emit commands on the DBAPI connection.
The scope of the <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a> in 2.0 style
use can be controlled using the <a class="reference internal" href="#sqlalchemy.engine.Connection.commit" title="sqlalchemy.engine.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.Connection.rollback" title="sqlalchemy.engine.Connection.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a> methods.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.RootTransaction.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.RootTransaction.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.RootTransaction.rollback"><span class="sig-name descname">rollback()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RootTransaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RootTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.RootTransaction.close" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.close" title="sqlalchemy.engine.Transaction.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.close()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Close this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RootTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RootTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.RootTransaction.commit" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Commit this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a COMMIT.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“RELEASE SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RootTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RootTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.RootTransaction.rollback" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Roll back this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a ROLLBACK.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“ROLLBACK TO SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Transaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Transaction</span></span><a class="headerlink" href="#sqlalchemy.engine.Transaction" title="Link to this definition">¶</a></dt>
<dd><p>Represent a database transaction in progress.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object is procured by
calling the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method of
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost/test&quot;</span><span class="p">)</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">trans</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into x (a, b) values (1, 2)&quot;</span><span class="p">))</span>
<span class="n">trans</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></pre></div>
</div>
<p>The object provides <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rollback()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a>
methods in order to control transaction boundaries.  It
also implements a context manager interface so that
the Python <code class="docutils literal notranslate"><span class="pre">with</span></code> statement can be used with the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into x (a, b) values (1, 2)&quot;</span><span class="p">))</span></pre></div>
</div>
<p>The Transaction object is <strong>not</strong> threadsafe.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Transaction.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback"><span class="sig-name descname">rollback()</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a></p>
</div>
<div class="class-bases docutils container" id="index-2">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.util.TransactionalContext</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Transaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Transaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Transaction.close" title="Link to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Transaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Transaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Transaction.commit" title="Link to this definition">¶</a></dt>
<dd><p>Commit this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a COMMIT.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“RELEASE SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Transaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Transaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Transaction.rollback" title="Link to this definition">¶</a></dt>
<dd><p>Roll back this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a ROLLBACK.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“ROLLBACK TO SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">TwoPhaseTransaction</span></span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction" title="Link to this definition">¶</a></dt>
<dd><p>Represent a two-phase transaction.</p>
<p>A new <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a> object may be procured
using the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a> method.</p>
<p>The interface is the same as that of <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
with the addition of the <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare()</span></code></a> method.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare"><span class="sig-name descname">prepare()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.rollback"><span class="sig-name descname">rollback()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction.close" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.close" title="sqlalchemy.engine.Transaction.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.close()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Close this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction.commit" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Commit this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a COMMIT.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“RELEASE SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction.prepare">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction.</span></code></a><span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="Link to this definition">¶</a></dt>
<dd><p>Prepare this <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>.</p>
<p>After a PREPARE, the transaction can be committed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction.rollback" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Roll back this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a ROLLBACK.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“ROLLBACK TO SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

</dd></dl>

</section>
<section id="result-set-api">
<h2>Result Set API<a class="headerlink" href="#result-set-api" title="Link to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult"><span class="sig-name descname">ChunkedIteratorResult</span></a></p></td>
<td><p>An <a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">IteratorResult</span></code></a> that works from an
iterator-producing callable.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><span class="sig-name descname">CursorResult</span></a></p></td>
<td><p>A Result that is representing state from a DBAPI cursor.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.FilterResult"><span class="sig-name descname">FilterResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns objects other than
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects, such as dictionaries or scalar objects.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.FrozenResult"><span class="sig-name descname">FrozenResult</span></a></p></td>
<td><p>Represents a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object in a “frozen” state suitable
for caching.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.IteratorResult"><span class="sig-name descname">IteratorResult</span></a></p></td>
<td><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that gets data from a Python iterator of
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects or similar row-like data.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><span class="sig-name descname">MappingResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns dictionary values
rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.MergedResult"><span class="sig-name descname">MergedResult</span></a></p></td>
<td><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that is merged from any number of
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> objects.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.Result"><span class="sig-name descname">Result</span></a></p></td>
<td><p>Represent a set of database results.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.Row"><span class="sig-name descname">Row</span></a></p></td>
<td><p>Represent a single result row.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.RowMapping"><span class="sig-name descname">RowMapping</span></a></p></td>
<td><p>A <code class="docutils literal notranslate"><span class="pre">Mapping</span></code> that maps column names and objects to <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
values.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><span class="sig-name descname">ScalarResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns scalar values
rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.TupleResult"><span class="sig-name descname">TupleResult</span></a></p></td>
<td><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that’s typed as returning plain
Python tuples instead of rows.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.ChunkedIteratorResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">ChunkedIteratorResult</span></span><a class="headerlink" href="#sqlalchemy.engine.ChunkedIteratorResult" title="Link to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">IteratorResult</span></code></a> that works from an
iterator-producing callable.</p>
<p>The given <code class="docutils literal notranslate"><span class="pre">chunks</span></code> argument is a function that is given a number of rows
to return in each chunk, or <code class="docutils literal notranslate"><span class="pre">None</span></code> for all rows.  The function should
then return an un-consumed iterator of lists, each list of the requested
size.</p>
<p>The function can be called at any time again, in which case it should
continue from the same result set but adjust the chunk size as given.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult" title="sqlalchemy.engine.ChunkedIteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.ChunkedIteratorResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.IteratorResult</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ChunkedIteratorResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ChunkedIteratorResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.ChunkedIteratorResult.yield_per" title="Link to this definition">¶</a></dt>
<dd><p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>This impacts the underlying behavior of the result when iterating over
the result object, or otherwise making use of  methods such as
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> that return one row at a time.   Data
from the underlying cursor or other data source will be buffered up to
this many rows in memory, and the buffered collection will then be
yielded out one row at a time or as many rows are requested. Each time
the buffer clears, it will be refreshed to this many rows or as many
rows remain if fewer remain.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method is generally used in
conjunction with the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
execution option, which will allow the database dialect in use to make
use of a server side cursor, if the DBAPI supports a specific “server
side cursor” mode separate from its default mode of operation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Consider using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a>
execution option, which will simultaneously set
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
to ensure the use of server side cursors, as well as automatically
invoke the <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method to establish
a fixed row buffer size at once.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a>
execution option is available for ORM operations, with
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>-oriented use described at
<a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a>. The Core-only version which works
with <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is new as of SQLAlchemy 1.4.40.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.ChunkedIteratorResult.yield_per.params.num"></span><strong>num</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult.yield_per.params.num">¶</a> – number of rows to fetch each time the buffer is refilled.
If set to a value below 1, fetches all rows for the next buffer.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - describes Core behavior for
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">CursorResult</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult" title="Link to this definition">¶</a></dt>
<dd><p>A Result that is representing state from a DBAPI cursor.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult`</span></code>
class replaces the previous <code class="xref py py-class docutils literal notranslate"><span class="pre">ResultProxy</span></code> interface.
This classes are based on the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> calling API
which provides an updated usage model and calling facade for
SQLAlchemy Core and SQLAlchemy ORM.</p>
</div>
<p>Returns database rows via the <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> class, which provides
additional API features and behaviors on top of the raw data returned by
the DBAPI.   Through the use of filters such as the <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a>
method, other kinds of objects may also be returned.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../tutorial/data_select.html#tutorial-selecting-data"><span class="std std-ref">Using SELECT Statements</span></a> - introductory material for accessing
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.columns"><span class="sig-name descname">columns()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchone"><span class="sig-name descname">fetchone()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.freeze"><span class="sig-name descname">freeze()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key"><span class="sig-name descname">inserted_primary_key</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><span class="sig-name descname">inserted_primary_key_rows</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.is_insert"><span class="sig-name descname">is_insert</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.keys"><span class="sig-name descname">keys()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.last_inserted_params"><span class="sig-name descname">last_inserted_params()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.last_updated_params"><span class="sig-name descname">last_updated_params()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.lastrow_has_defaults"><span class="sig-name descname">lastrow_has_defaults()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.lastrowid"><span class="sig-name descname">lastrowid</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.mappings"><span class="sig-name descname">mappings()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.merge"><span class="sig-name descname">merge()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.postfetch_cols"><span class="sig-name descname">postfetch_cols()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.prefetch_cols"><span class="sig-name descname">prefetch_cols()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.returned_defaults"><span class="sig-name descname">returned_defaults</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.returned_defaults_rows"><span class="sig-name descname">returned_defaults_rows</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.returns_rows"><span class="sig-name descname">returns_rows</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount"><span class="sig-name descname">rowcount</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.scalar_one"><span class="sig-name descname">scalar_one()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.scalar_one_or_none"><span class="sig-name descname">scalar_one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.splice_horizontally"><span class="sig-name descname">splice_horizontally()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.splice_vertically"><span class="sig-name descname">splice_vertically()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount"><span class="sig-name descname">supports_sane_multi_rowcount()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.supports_sane_rowcount"><span class="sig-name descname">supports_sane_rowcount()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.t"><span class="sig-name descname">t</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.tuples"><span class="sig-name descname">tuples()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.CursorResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.all" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return all rows in a sequence.</p>
<p>Closes the result set after invocation.   Subsequent invocations
will return an empty sequence.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a sequence of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - How to stream a large result set
without loading it completely in python.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.close" title="Link to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<p>This closes out the underlying DBAPI cursor corresponding to the
statement execution, if one is still present.  Note that the DBAPI
cursor is automatically released when the <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>
exhausts all available rows.  <a class="reference internal" href="#sqlalchemy.engine.CursorResult.close" title="sqlalchemy.engine.CursorResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a> is
generally an optional method except in the case when discarding a
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> that still has additional rows pending
for fetch.</p>
<p>After this method is called, it is no longer valid to call upon
the fetch methods, which will raise a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceClosedError</span></code></a>
on subsequent use.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#"><span class="std std-ref">Working with Engines and Connections</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.columns" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Establish the columns that should be returned in each row.</p>
<p>This method may be used to limit the columns returned as well
as to reorder them.   The given list of expressions are normally
a series of integers or string key names.   They may also be
appropriate <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> objects which correspond to
a given statement construct.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>Due to a bug in 1.4, the
<a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> method had an incorrect behavior
where calling upon the method with just one index would cause the
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object to yield scalar values rather than
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.   In version 2.0, this behavior
has been corrected such that calling upon
<a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> with a single index will
produce a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object that continues
to yield <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects, which include
only a single column.</p>
</div>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">statement</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>

<span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">):</span>
    <span class="c1"># ...</span></pre></div>
</div>
<p>Example of using the column objects from the statement itself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span>
        <span class="n">statement</span><span class="o">.</span><span class="n">selected_columns</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
        <span class="n">statement</span><span class="o">.</span><span class="n">selected_columns</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span>
<span class="p">):</span>
    <span class="c1"># ...</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.columns.params.*col_expressions"></span><strong>*col_expressions</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.columns.params.*col_expressions">¶</a> – indicates columns to be returned.  Elements
may be integer row indexes, string column names, or appropriate
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> objects corresponding to a select construct.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object with the modifications
given.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.fetchall" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.fetchall" title="sqlalchemy.engine.Result.fetchall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchall()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>A synonym for the <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.fetchmany" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Fetch many rows.</p>
<p>When all rows are exhausted, returns an empty sequence.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch rows in groups, use the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>
method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a sequence of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.fetchone" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Fetch one row.</p>
<p>When all rows are exhausted, returns None.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch the first row of a result only, use the
<a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> method.  To iterate through all
rows, iterate the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object if no filters are applied,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.first" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Fetch the first row or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no row is present.</p>
<p>Closes the result set and discards remaining rows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the
<a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a> method,
or combine <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a>.</p>
<p>Additionally, in contrast to the behavior of the legacy  ORM
<a class="reference internal" href="../orm/queryguide/query.html#sqlalchemy.orm.Query.first" title="sqlalchemy.orm.Query.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.first()</span></code></a> method, <strong>no limit is applied</strong> to the
SQL query which was invoked to produce this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>;
for a DBAPI driver that buffers results in memory before yielding
rows, all rows will be sent to the Python process and all but
the first row will be discarded.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../changelog/migration_20.html#migration-20-unify-select"><span class="std std-ref">ORM Query Unified with Core Select</span></a></p>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object, or None
if no rows remain.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.freeze">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">freeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.result.FrozenResult"><span class="pre">FrozenResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.freeze" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.freeze" title="sqlalchemy.engine.Result.freeze"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.freeze()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return a callable object that will produce copies of this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> when invoked.</p>
<p>The callable object returned is an instance of
<a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>.</p>
<p>This is used for result set caching.  The method must be called
on the result when it has been unconsumed, and calling the method
will consume the result fully.   When the <a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>
is retrieved from a cache, it can be called any number of times where
it will produce a new <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object each time
against its stored set of rows.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_events.html#do-orm-execute-re-executing"><span class="std std-ref">Re-Executing Statements</span></a> - example usage within the
ORM to implement a result-set cache.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.inserted_primary_key">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">inserted_primary_key</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="Link to this definition">¶</a></dt>
<dd><p>Return the primary key for the row just inserted.</p>
<p>The return value is a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object representing
a named tuple of primary key values in the order in which the
primary key columns are configured in the source
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4.8: </span>- the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>
value is now a named tuple via the <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> class,
rather than a plain tuple.</p>
</div>
<p>This accessor only applies to single row <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a>
constructs which did not explicitly specify
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.returning" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.returning()</span></code></a>.    Support for multirow inserts,
while not yet available for most backends, would be accessed using
the <a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key_rows" title="sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key_rows</span></code></a> accessor.</p>
<p>Note that primary key columns which specify a server_default clause, or
otherwise do not qualify as “autoincrement” columns (see the notes at
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>), and were generated using the database-side
default, will appear in this list as <code class="docutils literal notranslate"><span class="pre">None</span></code> unless the backend
supports “returning” and the insert statement executed with the
“implicit returning” enabled.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() construct.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.inserted_primary_key_rows">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">inserted_primary_key_rows</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.inserted_primary_key_rows" title="Link to this definition">¶</a></dt>
<dd><p>Return the value of
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>
as a row contained within a list; some dialects may support a
multiple row form as well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As indicated below, in current SQLAlchemy versions this
accessor is only useful beyond what’s already supplied by
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> when using the
<a class="reference internal" href="../dialects/postgresql.html#postgresql-psycopg2"><span class="std std-ref">psycopg2</span></a> dialect.   Future versions hope to
generalize this feature to more dialects.</p>
</div>
<p>This accessor is added to support dialects that offer the feature
that is currently implemented by the <a class="reference internal" href="../dialects/postgresql.html#psycopg2-executemany-mode"><span class="std std-ref">Psycopg2 Fast Execution Helpers</span></a>
feature, currently <strong>only the psycopg2 dialect</strong>, which provides
for many rows to be INSERTed at once while still retaining the
behavior of being able to return server-generated primary key values.</p>
<ul class="simple">
<li><p><strong>When using the psycopg2 dialect, or other dialects that may support
“fast executemany” style inserts in upcoming releases</strong> : When
invoking an INSERT statement while passing a list of rows as the
second argument to <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>, this accessor
will then provide a list of rows, where each row contains the primary
key value for each row that was INSERTed.</p></li>
<li><p><strong>When using all other dialects / backends that don’t yet support
this feature</strong>: This accessor is only useful for <strong>single row INSERT
statements</strong>, and returns the same information as that of the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> within a
single-element list. When an INSERT statement is executed in
conjunction with a list of rows to be INSERTed, the list will contain
one row per row inserted in the statement, however it will contain
<code class="docutils literal notranslate"><span class="pre">None</span></code> for any server-generated values.</p></li>
</ul>
<p>Future releases of SQLAlchemy will further generalize the
“fast execution helper” feature of psycopg2 to suit other dialects,
thus allowing this accessor to be of more general use.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.is_insert">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">is_insert</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.is_insert" title="Link to this definition">¶</a></dt>
<dd><p>True if this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> is the result
of a executing an expression language compiled
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> construct.</p>
<p>When True, this implies that the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">inserted_primary_key</span></code></a> attribute is accessible,
assuming the statement did not include
a user defined “returning” construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RMKeyView</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.keys" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.last_inserted_params">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">last_inserted_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.last_inserted_params" title="Link to this definition">¶</a></dt>
<dd><p>Return the collection of inserted parameters from this
execution.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.last_updated_params">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">last_updated_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.last_updated_params" title="Link to this definition">¶</a></dt>
<dd><p>Return the collection of updated parameters from this
execution.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an update() construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.lastrow_has_defaults">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">lastrow_has_defaults</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.lastrow_has_defaults" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">lastrow_has_defaults()</span></code> from the underlying
<a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>.</p>
<p>See <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> for details.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.lastrowid">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">lastrowid</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.lastrowid" title="Link to this definition">¶</a></dt>
<dd><p>Return the ‘lastrowid’ accessor on the DBAPI cursor.</p>
<p>This is a DBAPI specific method and is only functional
for those backends which support it, for statements
where it is appropriate.  It’s behavior is not
consistent across backends.</p>
<p>Usage of this method is normally unnecessary when
using insert() expression constructs; the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> attribute provides a
tuple of primary key values for a newly inserted row,
regardless of database backend.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.mappings">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">mappings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.result.MappingResult"><span class="pre">MappingResult</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.mappings" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.mappings" title="sqlalchemy.engine.Result.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.mappings()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Apply a mappings filter to returned rows, returning an instance of
<a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a>.</p>
<p>When this filter is applied, fetching rows will return
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> objects instead of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a new <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> filtering object
referring to this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">others</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.result.Result"><span class="pre">Result</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.MergedResult" title="sqlalchemy.engine.result.MergedResult"><span class="pre">MergedResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.merge" title="Link to this definition">¶</a></dt>
<dd><p>Merge this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> with other compatible result
objects.</p>
<p>The object returned is an instance of <a class="reference internal" href="#sqlalchemy.engine.MergedResult" title="sqlalchemy.engine.MergedResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MergedResult</span></code></a>,
which will be composed of iterators from the given result
objects.</p>
<p>The new result will use the metadata from this result object.
The subsequent result objects must be against an identical
set of result / cursor metadata, otherwise the behavior is
undefined.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.one" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return exactly one row or raise an exception.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a> if the result returns no
rows, or <a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a> if multiple rows
would be returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the
<a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a> method, or combine
<a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>, <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.one_or_none" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return at most one result or raise an exception.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if the result has no rows.
Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>
if multiple rows are returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no row
is available.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.partitions" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Iterate through sub-lists of rows of the size given.</p>
<p>Each list will be of the size given, excluding the last list to
be yielded, which may have a small number of rows.  No empty
lists will be yielded.</p>
<p>The result object is automatically closed when the iterator
is fully consumed.</p>
<p>Note that the backend driver will usually buffer the entire result
ahead of time unless the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> execution
option is used indicating that the driver should not pre-buffer
results, if possible.   Not all drivers support this option and
the option is silently ignored for those who do not.</p>
<p>When using the ORM, the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> method
is typically more effective from a memory perspective when it is
combined with use of the
<a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">yield_per execution option</span></a>,
which instructs both the DBAPI driver to use server side cursors,
if available, as well as instructs the ORM loading internals to only
build a certain amount of ORM objects from a result at a time before
yielding them out.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.partitions.params.size"></span><strong>size</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.partitions.params.size">¶</a> – indicate the maximum number of rows to be present
in each list yielded.  If None, makes use of the value set by
the <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a>, method, if it were called,
or the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a>
execution option, which is equivalent in this regard.  If
yield_per weren’t set, it makes use of the
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> default, which may be backend
specific and not well defined.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>iterator of lists</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.postfetch_cols">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">postfetch_cols</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.postfetch_cols" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">postfetch_cols()</span></code> from the underlying
<a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>.</p>
<p>See <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> for details.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() or update() construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.prefetch_cols">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">prefetch_cols</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.prefetch_cols" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">prefetch_cols()</span></code> from the underlying
<a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>.</p>
<p>See <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> for details.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() or update() construct.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.returned_defaults">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">returned_defaults</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.returned_defaults" title="Link to this definition">¶</a></dt>
<dd><p>Return the values of default columns that were fetched using
the <code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code> feature.</p>
<p>The value is an instance of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>
if <code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code> was not used or if the
backend does not support RETURNING.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.returned_defaults_rows">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">returned_defaults_rows</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.returned_defaults_rows" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of rows each containing the values of default
columns that were fetched using
the <code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code> feature.</p>
<p>The return value is a list of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.returns_rows">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">returns_rows</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.returns_rows" title="Link to this definition">¶</a></dt>
<dd><p>True if this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> returns zero or more
rows.</p>
<p>I.e. if it is legal to call the methods
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchone" title="sqlalchemy.engine.CursorResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchone()</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchmany" title="sqlalchemy.engine.CursorResult.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchmany()</span></code></a>
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchall" title="sqlalchemy.engine.CursorResult.fetchall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchall()</span></code></a>.</p>
<p>Overall, the value of <a class="reference internal" href="#sqlalchemy.engine.CursorResult.returns_rows" title="sqlalchemy.engine.CursorResult.returns_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returns_rows</span></code></a> should
always be synonymous with whether or not the DBAPI cursor had a
<code class="docutils literal notranslate"><span class="pre">.description</span></code> attribute, indicating the presence of result columns,
noting that a cursor that returns zero rows still has a
<code class="docutils literal notranslate"><span class="pre">.description</span></code> if a row-returning statement was emitted.</p>
<p>This attribute should be True for all results that are against
SELECT statements, as well as for DML statements INSERT/UPDATE/DELETE
that use RETURNING.   For INSERT/UPDATE/DELETE statements that were
not using RETURNING, the value will usually be False, however
there are some dialect-specific exceptions to this, such as when
using the MSSQL / pyodbc dialect a SELECT is emitted inline in
order to retrieve an inserted primary key value.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.rowcount">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">rowcount</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.rowcount" title="Link to this definition">¶</a></dt>
<dd><p>Return the ‘rowcount’ for this result.</p>
<p>The primary purpose of ‘rowcount’ is to report the number of rows
matched by the WHERE criterion of an UPDATE or DELETE statement
executed once (i.e. for a single parameter set), which may then be
compared to the number of rows expected to be updated or deleted as a
means of asserting data integrity.</p>
<p>This attribute is transferred from the <code class="docutils literal notranslate"><span class="pre">cursor.rowcount</span></code> attribute
of the DBAPI before the cursor is closed, to support DBAPIs that
don’t make this value available after cursor close.   Some DBAPIs may
offer meaningful values for other kinds of statements, such as INSERT
and SELECT statements as well.  In order to retrieve <code class="docutils literal notranslate"><span class="pre">cursor.rowcount</span></code>
for these statements, set the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.preserve_rowcount" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.preserve_rowcount</span></code></a>
execution option to True, which will cause the <code class="docutils literal notranslate"><span class="pre">cursor.rowcount</span></code>
value to be unconditionally memoized before any results are returned
or the cursor is closed, regardless of statement type.</p>
<p>For cases where the DBAPI does not support rowcount for a particular
kind of statement and/or execution, the returned value will be <code class="docutils literal notranslate"><span class="pre">-1</span></code>,
which is delivered directly from the DBAPI and is part of <span class="target" id="index-3"></span><a class="pep reference external" href="https://peps.python.org/pep-0249/"><strong>PEP 249</strong></a>.
All DBAPIs should support rowcount for single-parameter-set
UPDATE and DELETE statements, however.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notes regarding <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a>:</p>
<ul class="simple">
<li><p>This attribute returns the number of rows <em>matched</em>,
which is not necessarily the same as the number of rows
that were actually <em>modified</em>. For example, an UPDATE statement
may have no net change on a given row if the SET values
given are the same as those present in the row already.
Such a row would be matched but not modified.
On backends that feature both styles, such as MySQL,
rowcount is configured to return the match
count in all cases.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> in the default case is
<em>only</em> useful in conjunction with an UPDATE or DELETE statement,
and only with a single set of parameters. For other kinds of
statements, SQLAlchemy will not attempt to pre-memoize the value
unless the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.preserve_rowcount" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.preserve_rowcount</span></code></a>
execution option is used.  Note that contrary to <span class="target" id="index-4"></span><a class="pep reference external" href="https://peps.python.org/pep-0249/"><strong>PEP 249</strong></a>, many
DBAPIs do not support rowcount values for statements that are not
UPDATE or DELETE, particularly when rows are being returned which
are not fully pre-buffered.   DBAPIs that dont support rowcount
for a particular kind of statement should return the value <code class="docutils literal notranslate"><span class="pre">-1</span></code>
for such statements.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> may not be meaningful
when executing a single statement with multiple parameter sets
(i.e. an <a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a>). Most DBAPIs do not sum “rowcount”
values across multiple parameter sets and will return <code class="docutils literal notranslate"><span class="pre">-1</span></code>
when accessed.</p></li>
<li><p>SQLAlchemy’s <a class="reference internal" href="#engine-insertmanyvalues"><span class="std std-ref">“Insert Many Values” Behavior for INSERT statements</span></a> feature does support
a correct population of <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a>
when the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.preserve_rowcount" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.preserve_rowcount</span></code></a>
execution option is set to True.</p></li>
<li><p>Statements that use RETURNING may not support rowcount, returning
a <code class="docutils literal notranslate"><span class="pre">-1</span></code> value instead.</p></li>
</ul>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-update-delete-rowcount"><span class="std std-ref">Getting Affected Row Count from UPDATE, DELETE</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy Unified Tutorial</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.preserve_rowcount" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.preserve_rowcount</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.scalar" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Fetch the first column of the first row, and close the result set.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if there are no rows to fetch.</p>
<p>No validation is performed to test if additional rows remain.</p>
<p>After calling this method, the object is fully closed,
e.g. the <a class="reference internal" href="#sqlalchemy.engine.CursorResult.close" title="sqlalchemy.engine.CursorResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a>
method will have been called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a Python scalar value, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.scalar_one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.scalar_one" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return exactly one scalar result or raise an exception.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.scalar_one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.scalar_one_or_none" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one_or_none" title="sqlalchemy.engine.Result.scalar_one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one_or_none()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return exactly one scalar result or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><span class="pre">ScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.scalars" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return a <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> filtering object which
will return single elements rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select int_id from table&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span></pre></div>
</div>
<p>When results are fetched from the <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a>
filtering object, the single column-row that would be returned by the
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> is instead returned as the column’s value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.scalars.params.index"></span><strong>index</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.scalars.params.index">¶</a> – integer or row key indicating the column to be fetched
from each row, defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code> indicating the first column.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a new <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> filtering object referring
to this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.splice_horizontally">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">splice_horizontally</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.splice_horizontally" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> that “horizontally splices”
together the rows of this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> with that of another
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This method is for the benefit of the SQLAlchemy ORM and is
not intended for general use.</p>
</div>
<p>“horizontally splices” means that for each row in the first and second
result sets, a new row that concatenates the two rows together is
produced, which then becomes the new row.  The incoming
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> must have the identical number of rows.  It is
typically expected that the two result sets come from the same sort
order as well, as the result rows are spliced together based on their
position in the result.</p>
<p>The expected use case here is so that multiple INSERT..RETURNING
statements (which definitely need to be sorted) against different
tables can produce a single result that looks like a JOIN of those two
tables.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r1</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span>
        <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_name</span><span class="p">,</span>
        <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
        <span class="n">sort_by_parameter_order</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">),</span>
    <span class="n">user_values</span>
<span class="p">)</span>

<span class="n">r2</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">addresses</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span>
        <span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">address_id</span><span class="p">,</span>
        <span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
        <span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
        <span class="n">sort_by_parameter_order</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">),</span>
    <span class="n">address_values</span>
<span class="p">)</span>

<span class="n">rows</span> <span class="o">=</span> <span class="n">r1</span><span class="o">.</span><span class="n">splice_horizontally</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="k">assert</span> <span class="p">(</span>
    <span class="n">rows</span> <span class="o">==</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;john&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;foo@bar.com&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;jack&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;bar@bat.com&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.splice_vertically" title="sqlalchemy.engine.CursorResult.splice_vertically"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.splice_vertically()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.splice_vertically">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">splice_vertically</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.splice_vertically" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> that “vertically splices”,
i.e. “extends”, the rows of this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> with that of
another <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This method is for the benefit of the SQLAlchemy ORM and is
not intended for general use.</p>
</div>
<p>“vertically splices” means the rows of the given result are appended to
the rows of this cursor result. The incoming <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>
must have rows that represent the identical list of columns in the
identical order as they are in this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.splice_horizontally" title="sqlalchemy.engine.CursorResult.splice_horizontally"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.splice_horizontally()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">supports_sane_multi_rowcount</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">supports_sane_multi_rowcount</span></code> from the dialect.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> for background.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.supports_sane_rowcount">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">supports_sane_rowcount</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.supports_sane_rowcount" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">supports_sane_rowcount</span></code> from the dialect.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> for background.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.t">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">t</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.t" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.t" title="sqlalchemy.engine.Result.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Result.t</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Apply a “typed tuple” typing filter to returned rows.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Result.t" title="sqlalchemy.engine.Result.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Result.t</span></code></a> attribute is a synonym for
calling the <a class="reference internal" href="#sqlalchemy.engine.Result.tuples" title="sqlalchemy.engine.Result.tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.tuples()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.tuples">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">tuples</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.TupleResult" title="sqlalchemy.engine.result.TupleResult"><span class="pre">TupleResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.tuples" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.tuples" title="sqlalchemy.engine.Result.tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.tuples()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Apply a “typed tuple” typing filter to returned rows.</p>
<p>This method returns the same <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object
at runtime,
however annotates as returning a <a class="reference internal" href="#sqlalchemy.engine.TupleResult" title="sqlalchemy.engine.TupleResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">TupleResult</span></code></a> object
that will indicate to <span class="target" id="index-5"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> typing tools that plain typed
<code class="docutils literal notranslate"><span class="pre">Tuple</span></code> instances are returned rather than rows.  This allows
tuple unpacking and <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> access of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects to by typed, for those cases where the statement invoked
itself included typing information.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the <a class="reference internal" href="#sqlalchemy.engine.TupleResult" title="sqlalchemy.engine.TupleResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">TupleResult</span></code></a> type at typing time.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.t" title="sqlalchemy.engine.Result.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Result.t</span></code></a> - shorter synonym</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._t" title="sqlalchemy.engine.Row._t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._t</span></code></a> - <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> version</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.unique" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
<p>When this filter is applied with no arguments, the rows or objects
returned will filtered such that each row is returned uniquely. The
algorithm used to determine this uniqueness is by default the Python
hashing identity of the whole tuple.   In some cases a specialized
per-entity hashing scheme may be used, such as when using the ORM, a
scheme is applied which  works against the primary key identity of
returned objects.</p>
<p>The unique filter is applied <strong>after all other filters</strong>, which means
if the columns returned have been refined using a method such as the
<a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a>
method, the uniquing is applied to <strong>only the column or columns
returned</strong>.   This occurs regardless of the order in which these
methods have been called upon the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<p>The unique filter also changes the calculus used for methods like
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>.
When using <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a>, these methods will continue
to yield the number of rows or objects requested, after uniquing
has been applied.  However, this necessarily impacts the buffering
behavior of the underlying cursor or datasource, such that multiple
underlying calls to <code class="docutils literal notranslate"><span class="pre">cursor.fetchmany()</span></code> may be necessary in order
to accumulate enough objects in order to provide a unique collection
of the requested size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.unique.params.strategy"></span><strong>strategy</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.unique.params.strategy">¶</a> – a callable that will be applied to rows or objects
being iterated, which should return an object that represents the
unique value of the row.   A Python <code class="docutils literal notranslate"><span class="pre">set()</span></code> is used to store
these identities.   If not passed, a default uniqueness strategy
is used which may have been assembled by the source of this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.yield_per" title="Link to this definition">¶</a></dt>
<dd><p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>This impacts the underlying behavior of the result when iterating over
the result object, or otherwise making use of  methods such as
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> that return one row at a time.   Data
from the underlying cursor or other data source will be buffered up to
this many rows in memory, and the buffered collection will then be
yielded out one row at a time or as many rows are requested. Each time
the buffer clears, it will be refreshed to this many rows or as many
rows remain if fewer remain.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method is generally used in
conjunction with the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
execution option, which will allow the database dialect in use to make
use of a server side cursor, if the DBAPI supports a specific “server
side cursor” mode separate from its default mode of operation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Consider using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a>
execution option, which will simultaneously set
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
to ensure the use of server side cursors, as well as automatically
invoke the <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method to establish
a fixed row buffer size at once.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a>
execution option is available for ORM operations, with
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>-oriented use described at
<a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a>. The Core-only version which works
with <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is new as of SQLAlchemy 1.4.40.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.yield_per.params.num"></span><strong>num</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.yield_per.params.num">¶</a> – number of rows to fetch each time the buffer is refilled.
If set to a value below 1, fetches all rows for the next buffer.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - describes Core behavior for
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.FilterResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">FilterResult</span></span><a class="headerlink" href="#sqlalchemy.engine.FilterResult" title="Link to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns objects other than
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects, such as dictionaries or scalar objects.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a> is the common base for additional result
APIs including <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> and <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code>.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.FilterResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.FilterResult.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.FilterResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.ResultInternal</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.FilterResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.FilterResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.FilterResult.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.FilterResult.close" title="Link to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.43.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.FilterResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.FilterResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.FilterResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.engine.FilterResult.closed" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the underlying <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> reports
closed</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.43.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.FilterResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.FilterResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.FilterResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.FilterResult.yield_per" title="Link to this definition">¶</a></dt>
<dd><p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> method is a pass through
to the <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method.  See that method’s
documentation for usage notes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>- added <a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a>
so that the method is available on all result set implementations</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - describes Core behavior for
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.FrozenResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">FrozenResult</span></span><a class="headerlink" href="#sqlalchemy.engine.FrozenResult" title="Link to this definition">¶</a></dt>
<dd><p>Represents a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object in a “frozen” state suitable
for caching.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a> object is returned from the
<a class="reference internal" href="#sqlalchemy.engine.Result.freeze" title="sqlalchemy.engine.Result.freeze"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.freeze()</span></code></a> method of any <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>
object.</p>
<p>A new iterable <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object is generated from a fixed
set of data each time the <a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a> is invoked as
a callable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

<span class="n">frozen</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>

<span class="n">unfrozen_result_one</span> <span class="o">=</span> <span class="n">frozen</span><span class="p">()</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">unfrozen_result_one</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">unfrozen_result_two</span> <span class="o">=</span> <span class="n">frozen</span><span class="p">()</span>
<span class="n">rows</span> <span class="o">=</span> <span class="n">unfrozen_result_two</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="c1"># ... etc</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_events.html#do-orm-execute-re-executing"><span class="std std-ref">Re-Executing Statements</span></a> - example usage within the
ORM to implement a result-set cache.</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_frozen_result()</span></code> - ORM function to merge
a frozen result back into a <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.FrozenResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.IteratorResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">IteratorResult</span></span><a class="headerlink" href="#sqlalchemy.engine.IteratorResult" title="Link to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that gets data from a Python iterator of
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects or similar row-like data.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.IteratorResult.closed"><span class="sig-name descname">closed</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.IteratorResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result</span></code></a>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.IteratorResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.IteratorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.IteratorResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.engine.IteratorResult.closed" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if this <a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">IteratorResult</span></code></a> has
been closed</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.43.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.MergedResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">MergedResult</span></span><a class="headerlink" href="#sqlalchemy.engine.MergedResult" title="Link to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that is merged from any number of
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> objects.</p>
<p>Returned by the <a class="reference internal" href="#sqlalchemy.engine.Result.merge" title="sqlalchemy.engine.Result.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.merge()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.MergedResult" title="sqlalchemy.engine.MergedResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.MergedResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.IteratorResult</span></code></a>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Result</span></span><a class="headerlink" href="#sqlalchemy.engine.Result" title="Link to this definition">¶</a></dt>
<dd><p>Represent a set of database results.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object provides a
completely updated usage model and calling facade for SQLAlchemy
Core and SQLAlchemy ORM.   In Core, it forms the basis of the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> object which replaces the previous
<code class="xref py py-class docutils literal notranslate"><span class="pre">ResultProxy</span></code> interface.   When using the ORM, a
higher level object called <a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult" title="sqlalchemy.engine.ChunkedIteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChunkedIteratorResult</span></code></a>
is normally used.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In SQLAlchemy 1.4 and above, this object is
used for ORM results returned by <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>, which can
yield instances of ORM mapped objects either individually or within
tuple-like rows. Note that the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object does not
deduplicate instances or rows automatically as is the case with the
legacy <a class="reference internal" href="../orm/queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object. For in-Python de-duplication of
instances or rows, use the <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> modifier
method.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../tutorial/dbapi_transactions.html#tutorial-fetching-rows"><span class="std std-ref">Fetching Rows</span></a> - in the <a class="reference internal" href="../tutorial/index.html"><span class="doc">SQLAlchemy Unified Tutorial</span></a></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.columns"><span class="sig-name descname">columns()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.fetchone"><span class="sig-name descname">fetchone()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.freeze"><span class="sig-name descname">freeze()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.keys"><span class="sig-name descname">keys()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.mappings"><span class="sig-name descname">mappings()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.merge"><span class="sig-name descname">merge()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one"><span class="sig-name descname">scalar_one()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one_or_none"><span class="sig-name descname">scalar_one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.scalars"><span class="sig-name descname">scalars()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.t"><span class="sig-name descname">t</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.tuples"><span class="sig-name descname">tuples()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.ResultInternal</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.all" title="Link to this definition">¶</a></dt>
<dd><p>Return all rows in a sequence.</p>
<p>Closes the result set after invocation.   Subsequent invocations
will return an empty sequence.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a sequence of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - How to stream a large result set
without loading it completely in python.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.close" title="Link to this definition">¶</a></dt>
<dd><p>close this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
<p>The behavior of this method is implementation specific, and is
not implemented by default.    The method should generally end
the resources in use by the result object and also cause any
subsequent iteration or row fetching to raise
<a class="reference internal" href="exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceClosedError</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.27: </span>- <code class="docutils literal notranslate"><span class="pre">.close()</span></code> was previously not generally
available for all <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> classes, instead only
being available on the <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> returned for
Core statement executions. As most other result objects, namely the
ones used by the ORM, are proxying a <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>
in any case, this allows the underlying cursor result to be closed
from the outside facade for the case when the ORM query is using
the <code class="docutils literal notranslate"><span class="pre">yield_per</span></code> execution option where it does not immediately
exhaust and autoclose the database cursor.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.engine.Result.closed" title="Link to this definition">¶</a></dt>
<dd><p>return <code class="docutils literal notranslate"><span class="pre">True</span></code> if this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> reports .closed</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.43.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.columns" title="Link to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
<p>This method may be used to limit the columns returned as well
as to reorder them.   The given list of expressions are normally
a series of integers or string key names.   They may also be
appropriate <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> objects which correspond to
a given statement construct.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>Due to a bug in 1.4, the
<a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> method had an incorrect behavior
where calling upon the method with just one index would cause the
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object to yield scalar values rather than
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.   In version 2.0, this behavior
has been corrected such that calling upon
<a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> with a single index will
produce a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object that continues
to yield <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects, which include
only a single column.</p>
</div>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">statement</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>

<span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">):</span>
    <span class="c1"># ...</span></pre></div>
</div>
<p>Example of using the column objects from the statement itself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span>
        <span class="n">statement</span><span class="o">.</span><span class="n">selected_columns</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
        <span class="n">statement</span><span class="o">.</span><span class="n">selected_columns</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span>
<span class="p">):</span>
    <span class="c1"># ...</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.columns.params.*col_expressions"></span><strong>*col_expressions</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.columns.params.*col_expressions">¶</a> – indicates columns to be returned.  Elements
may be integer row indexes, string column names, or appropriate
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> objects corresponding to a select construct.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object with the modifications
given.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.fetchall" title="Link to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.fetchmany" title="Link to this definition">¶</a></dt>
<dd><p>Fetch many rows.</p>
<p>When all rows are exhausted, returns an empty sequence.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch rows in groups, use the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>
method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a sequence of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.fetchone" title="Link to this definition">¶</a></dt>
<dd><p>Fetch one row.</p>
<p>When all rows are exhausted, returns None.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch the first row of a result only, use the
<a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> method.  To iterate through all
rows, iterate the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object if no filters are applied,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.first" title="Link to this definition">¶</a></dt>
<dd><p>Fetch the first row or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no row is present.</p>
<p>Closes the result set and discards remaining rows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the
<a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a> method,
or combine <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a>.</p>
<p>Additionally, in contrast to the behavior of the legacy  ORM
<a class="reference internal" href="../orm/queryguide/query.html#sqlalchemy.orm.Query.first" title="sqlalchemy.orm.Query.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.first()</span></code></a> method, <strong>no limit is applied</strong> to the
SQL query which was invoked to produce this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>;
for a DBAPI driver that buffers results in memory before yielding
rows, all rows will be sent to the Python process and all but
the first row will be discarded.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../changelog/migration_20.html#migration-20-unify-select"><span class="std std-ref">ORM Query Unified with Core Select</span></a></p>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object, or None
if no rows remain.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.freeze">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">freeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.result.FrozenResult"><span class="pre">FrozenResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.freeze" title="Link to this definition">¶</a></dt>
<dd><p>Return a callable object that will produce copies of this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> when invoked.</p>
<p>The callable object returned is an instance of
<a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>.</p>
<p>This is used for result set caching.  The method must be called
on the result when it has been unconsumed, and calling the method
will consume the result fully.   When the <a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>
is retrieved from a cache, it can be called any number of times where
it will produce a new <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object each time
against its stored set of rows.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_events.html#do-orm-execute-re-executing"><span class="std std-ref">Re-Executing Statements</span></a> - example usage within the
ORM to implement a result-set cache.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RMKeyView</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.keys" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.mappings">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">mappings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.result.MappingResult"><span class="pre">MappingResult</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.mappings" title="Link to this definition">¶</a></dt>
<dd><p>Apply a mappings filter to returned rows, returning an instance of
<a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a>.</p>
<p>When this filter is applied, fetching rows will return
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> objects instead of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a new <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> filtering object
referring to this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">others</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.result.Result"><span class="pre">Result</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.MergedResult" title="sqlalchemy.engine.result.MergedResult"><span class="pre">MergedResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.merge" title="Link to this definition">¶</a></dt>
<dd><p>Merge this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> with other compatible result
objects.</p>
<p>The object returned is an instance of <a class="reference internal" href="#sqlalchemy.engine.MergedResult" title="sqlalchemy.engine.MergedResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MergedResult</span></code></a>,
which will be composed of iterators from the given result
objects.</p>
<p>The new result will use the metadata from this result object.
The subsequent result objects must be against an identical
set of result / cursor metadata, otherwise the behavior is
undefined.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.one" title="Link to this definition">¶</a></dt>
<dd><p>Return exactly one row or raise an exception.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a> if the result returns no
rows, or <a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a> if multiple rows
would be returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the
<a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a> method, or combine
<a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>, <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.one_or_none" title="Link to this definition">¶</a></dt>
<dd><p>Return at most one result or raise an exception.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if the result has no rows.
Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>
if multiple rows are returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no row
is available.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.row.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.partitions" title="Link to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of rows of the size given.</p>
<p>Each list will be of the size given, excluding the last list to
be yielded, which may have a small number of rows.  No empty
lists will be yielded.</p>
<p>The result object is automatically closed when the iterator
is fully consumed.</p>
<p>Note that the backend driver will usually buffer the entire result
ahead of time unless the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> execution
option is used indicating that the driver should not pre-buffer
results, if possible.   Not all drivers support this option and
the option is silently ignored for those who do not.</p>
<p>When using the ORM, the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> method
is typically more effective from a memory perspective when it is
combined with use of the
<a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">yield_per execution option</span></a>,
which instructs both the DBAPI driver to use server side cursors,
if available, as well as instructs the ORM loading internals to only
build a certain amount of ORM objects from a result at a time before
yielding them out.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.partitions.params.size"></span><strong>size</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.partitions.params.size">¶</a> – indicate the maximum number of rows to be present
in each list yielded.  If None, makes use of the value set by
the <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a>, method, if it were called,
or the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a>
execution option, which is equivalent in this regard.  If
yield_per weren’t set, it makes use of the
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> default, which may be backend
specific and not well defined.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>iterator of lists</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.scalar" title="Link to this definition">¶</a></dt>
<dd><p>Fetch the first column of the first row, and close the result set.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if there are no rows to fetch.</p>
<p>No validation is performed to test if additional rows remain.</p>
<p>After calling this method, the object is fully closed,
e.g. the <a class="reference internal" href="#sqlalchemy.engine.CursorResult.close" title="sqlalchemy.engine.CursorResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a>
method will have been called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a Python scalar value, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.scalar_one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.scalar_one" title="Link to this definition">¶</a></dt>
<dd><p>Return exactly one scalar result or raise an exception.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.scalar_one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.scalar_one_or_none" title="Link to this definition">¶</a></dt>
<dd><p>Return exactly one scalar result or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><span class="pre">ScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.scalars" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> filtering object which
will return single elements rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select int_id from table&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span></pre></div>
</div>
<p>When results are fetched from the <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a>
filtering object, the single column-row that would be returned by the
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> is instead returned as the column’s value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.scalars.params.index"></span><strong>index</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.scalars.params.index">¶</a> – integer or row key indicating the column to be fetched
from each row, defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code> indicating the first column.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a new <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> filtering object referring
to this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.t">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">t</span></span><a class="headerlink" href="#sqlalchemy.engine.Result.t" title="Link to this definition">¶</a></dt>
<dd><p>Apply a “typed tuple” typing filter to returned rows.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Result.t" title="sqlalchemy.engine.Result.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Result.t</span></code></a> attribute is a synonym for
calling the <a class="reference internal" href="#sqlalchemy.engine.Result.tuples" title="sqlalchemy.engine.Result.tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.tuples()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.tuples">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">tuples</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.TupleResult" title="sqlalchemy.engine.result.TupleResult"><span class="pre">TupleResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_TP</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.tuples" title="Link to this definition">¶</a></dt>
<dd><p>Apply a “typed tuple” typing filter to returned rows.</p>
<p>This method returns the same <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object
at runtime,
however annotates as returning a <a class="reference internal" href="#sqlalchemy.engine.TupleResult" title="sqlalchemy.engine.TupleResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">TupleResult</span></code></a> object
that will indicate to <span class="target" id="index-6"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> typing tools that plain typed
<code class="docutils literal notranslate"><span class="pre">Tuple</span></code> instances are returned rather than rows.  This allows
tuple unpacking and <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> access of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects to by typed, for those cases where the statement invoked
itself included typing information.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the <a class="reference internal" href="#sqlalchemy.engine.TupleResult" title="sqlalchemy.engine.TupleResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">TupleResult</span></code></a> type at typing time.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.t" title="sqlalchemy.engine.Result.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Result.t</span></code></a> - shorter synonym</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._t" title="sqlalchemy.engine.Row._t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._t</span></code></a> - <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> version</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.unique" title="Link to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
<p>When this filter is applied with no arguments, the rows or objects
returned will filtered such that each row is returned uniquely. The
algorithm used to determine this uniqueness is by default the Python
hashing identity of the whole tuple.   In some cases a specialized
per-entity hashing scheme may be used, such as when using the ORM, a
scheme is applied which  works against the primary key identity of
returned objects.</p>
<p>The unique filter is applied <strong>after all other filters</strong>, which means
if the columns returned have been refined using a method such as the
<a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a>
method, the uniquing is applied to <strong>only the column or columns
returned</strong>.   This occurs regardless of the order in which these
methods have been called upon the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<p>The unique filter also changes the calculus used for methods like
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>.
When using <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a>, these methods will continue
to yield the number of rows or objects requested, after uniquing
has been applied.  However, this necessarily impacts the buffering
behavior of the underlying cursor or datasource, such that multiple
underlying calls to <code class="docutils literal notranslate"><span class="pre">cursor.fetchmany()</span></code> may be necessary in order
to accumulate enough objects in order to provide a unique collection
of the requested size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.unique.params.strategy"></span><strong>strategy</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.unique.params.strategy">¶</a> – a callable that will be applied to rows or objects
being iterated, which should return an object that represents the
unique value of the row.   A Python <code class="docutils literal notranslate"><span class="pre">set()</span></code> is used to store
these identities.   If not passed, a default uniqueness strategy
is used which may have been assembled by the source of this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Result.yield_per" title="Link to this definition">¶</a></dt>
<dd><p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>This impacts the underlying behavior of the result when iterating over
the result object, or otherwise making use of  methods such as
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> that return one row at a time.   Data
from the underlying cursor or other data source will be buffered up to
this many rows in memory, and the buffered collection will then be
yielded out one row at a time or as many rows are requested. Each time
the buffer clears, it will be refreshed to this many rows or as many
rows remain if fewer remain.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method is generally used in
conjunction with the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
execution option, which will allow the database dialect in use to make
use of a server side cursor, if the DBAPI supports a specific “server
side cursor” mode separate from its default mode of operation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Consider using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a>
execution option, which will simultaneously set
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
to ensure the use of server side cursors, as well as automatically
invoke the <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method to establish
a fixed row buffer size at once.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.yield_per" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.yield_per</span></code></a>
execution option is available for ORM operations, with
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>-oriented use described at
<a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a>. The Core-only version which works
with <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is new as of SQLAlchemy 1.4.40.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.yield_per.params.num"></span><strong>num</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.yield_per.params.num">¶</a> – number of rows to fetch each time the buffer is refilled.
If set to a value below 1, fetches all rows for the next buffer.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - describes Core behavior for
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">ScalarResult</span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult" title="Link to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns scalar values
rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> method.</p>
<p>A special limitation of <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> is that it has
no <code class="docutils literal notranslate"><span class="pre">fetchone()</span></code> method; since the semantics of <code class="docutils literal notranslate"><span class="pre">fetchone()</span></code> are that
the <code class="docutils literal notranslate"><span class="pre">None</span></code> value indicates no more results, this is not compatible
with <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> since there is no way to distinguish
between <code class="docutils literal notranslate"><span class="pre">None</span></code> as a row value versus <code class="docutils literal notranslate"><span class="pre">None</span></code> as an indicator.  Use
<code class="docutils literal notranslate"><span class="pre">next(result)</span></code> to receive values individually.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.ScalarResult.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.FilterResult</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.all" title="Link to this definition">¶</a></dt>
<dd><p>Return all scalar values in a sequence.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.close" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult.close" title="sqlalchemy.engine.FilterResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.close()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a></p>
</div>
<p>Close this <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.43.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.closed" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult.closed" title="sqlalchemy.engine.FilterResult.closed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FilterResult.closed</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a></p>
</div>
<p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the underlying <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> reports
closed</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.43.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.fetchall" title="Link to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.all" title="sqlalchemy.engine.ScalarResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ScalarResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.fetchmany" title="Link to this definition">¶</a></dt>
<dd><p>Fetch many objects.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_R</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.first" title="Link to this definition">¶</a></dt>
<dd><p>Fetch the first object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_R</span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.one" title="Link to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_R</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.one_or_none" title="Link to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_R</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.partitions" title="Link to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.unique" title="Link to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> for usage details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.yield_per" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a></p>
</div>
<p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> method is a pass through
to the <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method.  See that method’s
documentation for usage notes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>- added <a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a>
so that the method is available on all result set implementations</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - describes Core behavior for
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">MappingResult</span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult" title="Link to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns dictionary values
rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.engine.Result.mappings" title="sqlalchemy.engine.Result.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.mappings()</span></code></a> method.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.MappingResult.all"><span class="sig-name descname">all()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.closed"><span class="sig-name descname">closed</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.columns"><span class="sig-name descname">columns()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.fetchall"><span class="sig-name descname">fetchall()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.fetchmany"><span class="sig-name descname">fetchmany()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.fetchone"><span class="sig-name descname">fetchone()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.first"><span class="sig-name descname">first()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.keys"><span class="sig-name descname">keys()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.one"><span class="sig-name descname">one()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.one_or_none"><span class="sig-name descname">one_or_none()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.partitions"><span class="sig-name descname">partitions()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.unique"><span class="sig-name descname">unique()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.MappingResult.yield_per"><span class="sig-name descname">yield_per()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code>, <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.FilterResult</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.all" title="Link to this definition">¶</a></dt>
<dd><p>Return all scalar values in a sequence.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> except that
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.close" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult.close" title="sqlalchemy.engine.FilterResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.close()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a></p>
</div>
<p>Close this <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.43.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.closed" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult.closed" title="sqlalchemy.engine.FilterResult.closed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FilterResult.closed</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a></p>
</div>
<p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the underlying <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> reports
closed</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.43.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_KeyIndexType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.columns" title="Link to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.fetchall" title="Link to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.engine.MappingResult.all" title="sqlalchemy.engine.MappingResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MappingResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.fetchmany" title="Link to this definition">¶</a></dt>
<dd><p>Fetch many objects.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> except that
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.fetchone" title="Link to this definition">¶</a></dt>
<dd><p>Fetch one object.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> except that
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.first" title="Link to this definition">¶</a></dt>
<dd><p>Fetch the first object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> except that
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RMKeyView</span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.keys" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.one" title="Link to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a> except that
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.one_or_none" title="Link to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a> except that
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.row.RowMapping"><span class="pre">RowMapping</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.partitions" title="Link to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> except that
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
objects, are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.unique" title="Link to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> for usage details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.yield_per" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterResult</span></code></a></p>
</div>
<p>Configure the row-fetching strategy to fetch <code class="docutils literal notranslate"><span class="pre">num</span></code> rows at a time.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a> method is a pass through
to the <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method.  See that method’s
documentation for usage notes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.40: </span>- added <a class="reference internal" href="#sqlalchemy.engine.FilterResult.yield_per" title="sqlalchemy.engine.FilterResult.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilterResult.yield_per()</span></code></a>
so that the method is available on all result set implementations</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a> - describes Core behavior for
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a></p>
<p><a class="reference internal" href="../orm/queryguide/api.html#orm-queryguide-yield-per"><span class="std std-ref">Fetching Large Result Sets with Yield Per</span></a> - in the <a class="reference internal" href="../orm/queryguide/index.html"><span class="std std-ref">ORM Querying Guide</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Row</span></span><a class="headerlink" href="#sqlalchemy.engine.Row" title="Link to this definition">¶</a></dt>
<dd><p>Represent a single result row.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object represents a row of a database result.  It is
typically associated in the 1.x series of SQLAlchemy with the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> object, however is also used by the ORM for
tuple-like results as of SQLAlchemy 1.4.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object seeks to act as much like a Python named
tuple as possible.   For mapping (i.e. dictionary) behavior on a row,
such as testing for containment of keys, refer to the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a>
attribute.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../tutorial/data_select.html#tutorial-selecting-data"><span class="std std-ref">Using SELECT Statements</span></a> - includes examples of selecting
rows from SELECT statements.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>Renamed <code class="docutils literal notranslate"><span class="pre">RowProxy</span></code> to <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>. <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> is no longer a
“proxy” object in that it contains the final form of data within it,
and now acts mostly like a named tuple. Mapping-like functionality is
moved to the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute. See
<a class="reference internal" href="../changelog/migration_14.html#change-4710-core"><span class="std std-ref">RowProxy is no longer a “proxy”; is now called Row and behaves like an enhanced named tuple</span></a> for background on this change.</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._asdict"><span class="sig-name descname">_asdict()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Row._fields"><span class="sig-name descname">_fields</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Row._mapping"><span class="sig-name descname">_mapping</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Row._t"><span class="sig-name descname">_t</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Row._tuple"><span class="sig-name descname">_tuple()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Row.count"><span class="sig-name descname">count</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Row.index"><span class="sig-name descname">index</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Row.t"><span class="sig-name descname">t</span></a>, <a class="reference internal" href="#sqlalchemy.engine.Row.tuple"><span class="sig-name descname">tuple()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine._py_row.BaseRow</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Sequence</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row._asdict">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">_asdict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.Row._asdict" title="Link to this definition">¶</a></dt>
<dd><p>Return a new dict which maps field names to their corresponding
values.</p>
<p>This method is analogous to the Python named tuple <code class="docutils literal notranslate"><span class="pre">._asdict()</span></code>
method, and works by applying the <code class="docutils literal notranslate"><span class="pre">dict()</span></code> constructor to the
<a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row._fields">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">_fields</span></span><a class="headerlink" href="#sqlalchemy.engine.Row._fields" title="Link to this definition">¶</a></dt>
<dd><p>Return a tuple of string keys as represented by this
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>This attribute is analogous to the Python named tuple <code class="docutils literal notranslate"><span class="pre">._fields</span></code>
attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row._mapping">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">_mapping</span></span><a class="headerlink" href="#sqlalchemy.engine.Row._mapping" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> for this <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>This object provides a consistent Python mapping (i.e. dictionary)
interface for the data contained within the row.   The <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
by itself behaves like a named tuple.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._fields" title="sqlalchemy.engine.Row._fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._fields</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row._t">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">_t</span></span><a class="headerlink" href="#sqlalchemy.engine.Row._t" title="Link to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.engine.Row._tuple" title="sqlalchemy.engine.Row._tuple"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Row._tuple()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.19: </span>- The <a class="reference internal" href="#sqlalchemy.engine.Row._t" title="sqlalchemy.engine.Row._t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._t</span></code></a> attribute supersedes
the previous <a class="reference internal" href="#sqlalchemy.engine.Row.t" title="sqlalchemy.engine.Row.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row.t</span></code></a> attribute, which is now underscored
to avoid name conflicts with column names in the same way as other
named-tuple methods on <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.t" title="sqlalchemy.engine.Result.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Result.t</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row._tuple">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">_tuple</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_TP</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Row._tuple" title="Link to this definition">¶</a></dt>
<dd><p>Return a ‘tuple’ form of this <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>At runtime, this method returns “self”; the <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object is
already a named tuple. However, at the typing level, if this
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> is typed, the “tuple” return type will be a <span class="target" id="index-7"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a>
<code class="docutils literal notranslate"><span class="pre">Tuple</span></code> datatype that contains typing information about individual
elements, supporting typed unpacking and attribute access.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.19: </span>- The <a class="reference internal" href="#sqlalchemy.engine.Row._tuple" title="sqlalchemy.engine.Row._tuple"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Row._tuple()</span></code></a> method supersedes
the previous <a class="reference internal" href="#sqlalchemy.engine.Row.tuple" title="sqlalchemy.engine.Row.tuple"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Row.tuple()</span></code></a> method, which is now underscored
to avoid name conflicts with column names in the same way as other
named-tuple methods on <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._t" title="sqlalchemy.engine.Row._t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._t</span></code></a> - shorthand attribute notation</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.tuples" title="sqlalchemy.engine.Result.tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.tuples()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row.count">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">count</span></span><a class="headerlink" href="#sqlalchemy.engine.Row.count" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row.index">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">index</span></span><a class="headerlink" href="#sqlalchemy.engine.Row.index" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row.t">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">t</span></span><a class="headerlink" href="#sqlalchemy.engine.Row.t" title="Link to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.engine.Row._tuple" title="sqlalchemy.engine.Row._tuple"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Row._tuple()</span></code></a>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 2.0.19: </span>The <a class="reference internal" href="#sqlalchemy.engine.Row.t" title="sqlalchemy.engine.Row.t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row.t</span></code></a> attribute is deprecated in favor of <a class="reference internal" href="#sqlalchemy.engine.Row._t" title="sqlalchemy.engine.Row._t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._t</span></code></a>; all <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> methods and library-level attributes are intended to be underscored to avoid name conflicts.  Please use <a class="reference internal" href="#sqlalchemy.engine.Row._t" title="sqlalchemy.engine.Row._t"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._t</span></code></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row.tuple">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">tuple</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_TP</span></span></span><a class="headerlink" href="#sqlalchemy.engine.Row.tuple" title="Link to this definition">¶</a></dt>
<dd><p>Return a ‘tuple’ form of this <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 2.0.19: </span>The <a class="reference internal" href="#sqlalchemy.engine.Row.tuple" title="sqlalchemy.engine.Row.tuple"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Row.tuple()</span></code></a> method is deprecated in favor of <a class="reference internal" href="#sqlalchemy.engine.Row._tuple" title="sqlalchemy.engine.Row._tuple"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Row._tuple()</span></code></a>; all <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> methods and library-level attributes are intended to be underscored to avoid name conflicts.  Please use <a class="reference internal" href="#sqlalchemy.engine.Row._tuple" title="sqlalchemy.engine.Row._tuple"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Row._tuple()</span></code></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.RowMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">RowMapping</span></span><a class="headerlink" href="#sqlalchemy.engine.RowMapping" title="Link to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">Mapping</span></code> that maps column names and objects to <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> is available from a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> via the
<a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute, as well as from the iterable interface
provided by the <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> object returned by the
<a class="reference internal" href="#sqlalchemy.engine.Result.mappings" title="sqlalchemy.engine.Result.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.mappings()</span></code></a> method.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> supplies Python mapping (i.e. dictionary) access to
the  contents of the row.   This includes support for testing of
containment of specific keys (string column names or objects), as well
as iteration of keys, values, and items:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="k">if</span> <span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">_mapping</span><span class="p">:</span>
        <span class="n">print</span><span class="p">(</span><span class="s2">&quot;Column &#39;a&#39;: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">row</span><span class="o">.</span><span class="n">_mapping</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>

    <span class="n">print</span><span class="p">(</span><span class="s2">&quot;Column b: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">row</span><span class="o">.</span><span class="n">_mapping</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="p">])</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> object replaces the
mapping-like access previously provided by a database result row,
which now seeks to behave mostly like a named tuple.</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.RowMapping.items"><span class="sig-name descname">items()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.RowMapping.keys"><span class="sig-name descname">keys()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.RowMapping.values"><span class="sig-name descname">values()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.RowMapping</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine._py_row.BaseRow</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RowMapping.items">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RowMapping"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RowMapping.</span></code></a><span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ROMappingItemsView</span></span></span><a class="headerlink" href="#sqlalchemy.engine.RowMapping.items" title="Link to this definition">¶</a></dt>
<dd><p>Return a view of key/value tuples for the elements in the
underlying <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RowMapping.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RowMapping"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RowMapping.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RMKeyView</span></span></span><a class="headerlink" href="#sqlalchemy.engine.RowMapping.keys" title="Link to this definition">¶</a></dt>
<dd><p>Return a view of ‘keys’ for string column names represented
by the underlying <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RowMapping.values">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RowMapping"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RowMapping.</span></code></a><span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ROMappingKeysValuesView</span></span></span><a class="headerlink" href="#sqlalchemy.engine.RowMapping.values" title="Link to this definition">¶</a></dt>
<dd><p>Return a view of values for the values represented in the
underlying <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.TupleResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">TupleResult</span></span><a class="headerlink" href="#sqlalchemy.engine.TupleResult" title="Link to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that’s typed as returning plain
Python tuples instead of rows.</p>
<p>Since <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> acts like a tuple in every way already,
this class is a typing only class, regular <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> is
still used at runtime.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.TupleResult" title="sqlalchemy.engine.TupleResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.TupleResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.FilterResult" title="sqlalchemy.engine.FilterResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.FilterResult</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.util.langhelpers.TypingOnly</span></code>)</p>
</div>
</dd></dl>

</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="engines.html" title="previous chapter">Engine Configuration</a>
        Next:
        <a href="pooling.html" title="next chapter">Connection Pooling</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2024, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.2.6.

    Documentation last generated: Mon Aug  5 19:31:00 2024 JST

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      document.documentElement.dataset.content_root = '../';

    </script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


